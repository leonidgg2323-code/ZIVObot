<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ZIVO</title>
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#00b4ff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="ZIVO">
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<style>
:root{--bg:#050a14;--blue:#00b4ff;--blue2:#0066cc;--glow:rgba(0,180,255,0.3);--white:#e8f4ff;--gray:#3a5a7a;--danger:#ff4466;--ok:#00ffaa;--warn:#ffaa00;--card:rgba(10,22,40,0.8);--gold:#ffd700}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--white);font-family:'Exo 2',sans-serif;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,180,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,180,255,0.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
.app{position:relative;z-index:1;max-width:420px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}
/* HEADER */
.hdr{padding:16px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,180,255,0.1)}
.logo{font-size:26px;font-weight:900;letter-spacing:4px;text-shadow:0 0 20px var(--blue)}
.logo span{color:var(--blue)}
.hdr-r{display:flex;align-items:center;gap:8px;font-size:11px;font-family:'Share Tech Mono',monospace}
.dot{width:9px;height:9px;border-radius:50%;background:var(--gray)}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)}}
/* FACE */
.face-wrap{display:flex;flex-direction:column;align-items:center;padding:20px 0 10px}
.face{width:140px;height:140px;background:linear-gradient(135deg,#0d1f3a,#1a3a5c);border-radius:28px;border:2px solid var(--gray);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;transition:all .5s}
.face::before{content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,180,255,0.1),transparent);animation:scan 3s infinite}
@keyframes scan{0%{left:-100%}100%{left:200%}}
.eyes{display:flex;gap:24px;z-index:1}
.eye{width:28px;height:28px;background:var(--blue);border-radius:7px;box-shadow:0 0 16px var(--blue);animation:blink 4s infinite;position:relative;overflow:hidden}
.eye::after{content:'';position:absolute;top:4px;left:4px;width:8px;height:8px;background:rgba(255,255,255,.6);border-radius:2px}
@keyframes blink{0%,90%,100%{transform:scaleY(1)}95%{transform:scaleY(.1)}}
.face-name{margin-top:10px;font-size:20px;font-weight:900;letter-spacing:6px;color:var(--blue)}
.face-mood{font-size:10px;font-family:'Share Tech Mono',monospace;color:var(--gray);letter-spacing:2px;margin-top:2px}
/* PAGES */
.page{display:none;flex:1;padding:0 16px 100px}
/* CARDS / COMMON */
.card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:16px;padding:16px;margin-bottom:10px;backdrop-filter:blur(10px)}
.sec{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--gray);margin:18px 0 10px}
.inp{width:100%;background:rgba(0,180,255,0.05);border:1px solid rgba(0,180,255,0.25);border-radius:10px;padding:11px 13px;color:var(--white);font-family:'Exo 2',sans-serif;font-size:14px;outline:none}
.inp:focus{border-color:var(--blue)}
.inp-lbl{font-size:10px;letter-spacing:2px;color:var(--gray);margin-bottom:5px}
.inp-row{margin-bottom:10px}
.btn{width:100%;padding:14px;background:var(--blue);border:none;border-radius:12px;cursor:pointer;font-size:13px;font-weight:700;letter-spacing:2px;color:#000;font-family:'Exo 2',sans-serif;transition:all .2s;margin-top:4px}
.btn:active{opacity:.8;transform:scale(.98)}
.btn.gold{background:var(--gold)}
.btn-out{width:100%;padding:13px;background:transparent;border:1px solid var(--blue);border-radius:12px;cursor:pointer;font-size:12px;font-weight:700;letter-spacing:2px;color:var(--blue);font-family:'Exo 2',sans-serif;transition:all .2s;margin-top:6px}
.btn-out.red{border-color:var(--danger);color:var(--danger)}
/* AUTH SCREENS */
.auth-screen{padding:24px 20px;text-align:center;display:none}
.auth-icon{font-size:48px;margin-bottom:12px}
.auth-title{font-size:22px;font-weight:900;letter-spacing:3px;margin-bottom:6px}
.auth-sub{font-size:12px;color:var(--gray);margin-bottom:28px}
.auth-err{font-size:11px;color:var(--danger);margin-top:8px;display:none}
.auth-switch{background:none;border:none;color:var(--blue);font-size:12px;font-weight:700;cursor:pointer;margin-top:10px;display:block;width:100%;font-family:'Exo 2',sans-serif;letter-spacing:1px}
/* OFFLINE BANNER */
#offline-banner{text-align:center;padding:14px 20px;color:var(--gray);display:none}
/* HOME */
.stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin:12px 0}
.stat{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:14px;padding:12px 8px;text-align:center}
.stat-v{font-size:18px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace}
.stat-l{font-size:9px;color:var(--gray);letter-spacing:1px;text-transform:uppercase;margin-top:2px}
.batt-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.batt-pct{font-family:'Share Tech Mono',monospace;font-size:16px;color:var(--ok)}
.batt-bar{height:7px;background:rgba(0,180,255,0.1);border-radius:4px;overflow:hidden}
.batt-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--blue2),var(--blue));border-radius:4px;transition:width .5s}
.log-e{display:flex;gap:8px;padding:9px 12px;background:var(--card);border:1px solid rgba(0,180,255,0.1);border-radius:11px;margin-bottom:7px;align-items:flex-start}
.log-t{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--gray);white-space:nowrap;padding-top:1px}
.log-m{font-size:12px;line-height:1.4}
.log-m.info{color:var(--blue)}.log-m.warn{color:var(--warn)}.log-m.ok{color:var(--ok)}
/* TRIAL */
.trial-banner{background:linear-gradient(135deg,rgba(0,255,170,0.1),rgba(0,180,255,0.1));border:1px solid var(--ok);border-radius:14px;padding:14px 16px;margin-bottom:14px;display:flex;align-items:center;gap:12px}
.trial-days{font-size:28px;font-weight:900;color:var(--ok);font-family:'Share Tech Mono',monospace;min-width:40px}
/* CONTROL */
.dpad{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;width:190px;margin:0 auto 20px}
.db{height:52px;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;transition:all .15s;user-select:none}
.db:active{background:var(--blue);box-shadow:0 0 16px var(--glow);transform:scale(.95)}
.db-c{background:rgba(0,180,255,0.1);border-color:var(--blue);font-size:11px;font-weight:700;color:var(--blue)}
.db-e{background:transparent;border:none}
.act-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px}
.act-btn{padding:14px;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:14px;text-align:center;cursor:pointer;transition:all .2s}
.act-btn:active{transform:scale(.97);border-color:var(--blue)}
.act-ico{font-size:22px;margin-bottom:5px}
.act-lbl{font-size:10px;letter-spacing:1px;text-transform:uppercase;color:var(--gray)}
/* ZONE */
.bmap{width:100%;aspect-ratio:1;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:18px;position:relative;overflow:hidden;margin-bottom:14px}
.bmap::before{content:'';position:absolute;inset:0;background-image:linear-gradient(rgba(0,180,255,0.05) 1px,transparent 1px),linear-gradient(90deg,rgba(0,180,255,0.05) 1px,transparent 1px);background-size:28px 28px}
.bzone{position:absolute;inset:28px;border:2px dashed var(--blue);border-radius:10px;box-shadow:0 0 16px var(--glow)}
.zdot{position:absolute;width:18px;height:18px;background:var(--blue);border-radius:5px;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 12px var(--blue);animation:fl 3s ease-in-out infinite}
@keyframes fl{0%,100%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-5px)}}
.ch{position:absolute;width:12px;height:12px;background:var(--blue);border-radius:3px}
.ig{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.ic{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;padding:12px}
.ic-l{font-size:9px;color:var(--gray);letter-spacing:1px;text-transform:uppercase}
.ic-v{font-size:16px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace;margin-top:3px}
/* SETTINGS */
.lang-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.lang-btn{padding:12px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;text-align:center;cursor:pointer;transition:all .2s}
.lang-btn.on{border-color:var(--blue);background:rgba(0,180,255,0.1)}
.lang-flag{font-size:24px}
.lang-name{font-size:10px;color:var(--gray);margin-top:3px}
.tog-row{display:flex;align-items:center;justify-content:space-between;padding:14px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;margin-bottom:8px}
.tog-lbl{font-size:13px;font-weight:600}
.tog-desc{font-size:10px;color:var(--gray);margin-top:2px}
.tog{width:46px;height:24px;background:var(--gray);border-radius:12px;position:relative;cursor:pointer;transition:background .2s;flex-shrink:0}
.tog.on{background:var(--blue);box-shadow:0 0 8px var(--glow)}
.tog::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;background:white;border-radius:50%;transition:transform .2s}
.tog.on::after{transform:translateX(22px)}
/* PROFILE */
.prof-hdr{display:flex;align-items:center;gap:14px;padding:16px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:16px;margin-bottom:10px}
.avatar{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--blue2),var(--blue));display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
.prof-name{font-size:18px;font-weight:700}
.prof-since{font-size:11px;color:var(--gray);margin-top:2px}
.badge{display:inline-block;padding:2px 8px;border-radius:20px;font-size:10px;font-weight:700;letter-spacing:1px;margin-top:4px}
.badge.free{background:rgba(58,90,122,0.4);color:var(--gray);border:1px solid var(--gray)}
.badge.pro{background:rgba(255,215,0,0.15);color:var(--gold);border:1px solid var(--gold)}
.badge.trial{background:rgba(0,255,170,0.15);color:var(--ok);border:1px solid var(--ok)}
/* SMART */
.smart-hero{background:linear-gradient(135deg,rgba(0,180,255,0.1),rgba(0,102,204,0.15));border:1px solid var(--blue);border-radius:16px;padding:18px;margin-bottom:14px;text-align:center}
/* VOICES */
.voice-grid{display:grid;gap:10px;margin-bottom:14px}
.voice-card{display:flex;align-items:center;gap:12px;padding:14px;background:var(--card);border:2px solid rgba(0,180,255,0.15);border-radius:14px;cursor:pointer;transition:all .2s}
.voice-card.on{border-color:var(--blue);background:rgba(0,180,255,0.08)}
.voice-card.locked{opacity:.5}
.v-ava{width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,rgba(0,100,200,0.3),rgba(0,180,255,0.2));display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.v-name{font-size:14px;font-weight:700}
.v-desc{font-size:11px;color:var(--gray);margin-top:1px}
.v-play{margin-left:auto;width:32px;height:32px;border-radius:8px;background:rgba(0,180,255,0.1);border:1px solid rgba(0,180,255,0.3);display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}
.v-lock{margin-left:auto;font-size:16px}
/* SUBSCRIPTION */
.plan-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
.plan{background:var(--card);border:2px solid rgba(0,180,255,0.15);border-radius:16px;padding:16px;cursor:pointer;transition:all .2s;text-align:center;position:relative}
.plan.on{border-color:var(--blue);background:rgba(0,180,255,0.08)}
.plan.gld{border-color:var(--gold);background:rgba(255,215,0,0.05)}
.plan.gld.on{background:rgba(255,215,0,0.1)}
.plan-name{font-size:13px;font-weight:700;letter-spacing:1px}
.plan-price{font-size:22px;font-weight:900;color:var(--blue);font-family:'Share Tech Mono',monospace;margin:6px 0 2px}
.plan.gld .plan-price{color:var(--gold)}
.plan-per{font-size:10px;color:var(--gray)}
.plan-save{position:absolute;top:-8px;left:50%;transform:translateX(-50%);background:var(--ok);color:#000;font-size:9px;font-weight:700;padding:2px 8px;border-radius:10px;letter-spacing:1px;white-space:nowrap}
.plan-full{grid-column:1/-1}
.feat-list{margin:6px 0 0}
.feat{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:12px;border-bottom:1px solid rgba(0,180,255,0.07)}
.feat:last-child{border:none}
.feat-ico{font-size:14px;width:20px;text-align:center}
.feat-locked{opacity:.4}
/* NAV */
.nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:420px;background:rgba(5,10,20,0.97);border-top:1px solid rgba(0,180,255,0.15);display:flex;padding:8px 0 18px;backdrop-filter:blur(20px);z-index:100}
.ni{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer;padding:5px 0;transition:all .2s}
.ni-ico{font-size:20px;filter:grayscale(1) opacity(.4);transition:all .2s}
.ni-lbl{font-size:8px;letter-spacing:1px;text-transform:uppercase;color:var(--gray)}
.ni.on .ni-ico{filter:none}
.ni.on .ni-lbl{color:var(--blue)}
/* MODAL */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:200;display:none;align-items:flex-end;justify-content:center;backdrop-filter:blur(4px)}
.modal-bg.open{display:flex}
.modal{background:#0a1628;border:1px solid rgba(0,180,255,0.2);border-radius:20px 20px 0 0;padding:24px 20px 36px;width:100%;max-width:420px;max-height:85vh;overflow-y:auto;position:relative}
.modal-title{font-size:18px;font-weight:700;margin-bottom:16px;text-align:center}
.modal-x{position:absolute;top:16px;right:20px;font-size:22px;cursor:pointer;color:var(--gray);background:none;border:none;color:var(--gray)}
</style>
</head>
<body>
<div class="app">

  <!-- HEADER -->
  <div class="hdr">
    <div class="logo">ZI<span>V</span>O</div>
    <div class="hdr-r">
      <div class="dot" id="sdot"></div>
      <span id="stxt" style="color:var(--gray)"></span>
    </div>
  </div>

  <!-- FACE (always visible) -->
  <div class="face-wrap">
    <div class="face" id="zface">
      <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
    </div>
    <div class="face-name" id="botname">ZIVO</div>
    <div class="face-mood" id="moodtxt"></div>
  </div>

  <!-- REGISTER -->
  <div class="auth-screen" id="scr-reg">
    <div class="auth-icon">ğŸ‘‹</div>
    <div class="auth-title" id="reg-title">WELCOME</div>
    <div class="auth-sub" id="reg-sub">Create your account</div>
    <div class="card" style="text-align:left">
      <div class="inp-row">
        <div class="inp-lbl" id="reg-lbl-name">YOUR NAME</div>
        <input id="reg-name" class="inp" type="text" placeholder="Leo">
      </div>
      <div class="inp-row">
        <div class="inp-lbl" id="reg-lbl-email">EMAIL</div>
        <input id="reg-email" class="inp" type="email" placeholder="email@example.com">
      </div>
      <div class="inp-row" style="margin-bottom:0">
        <div class="inp-lbl" id="reg-lbl-pass">PASSWORD</div>
        <input id="reg-pass" class="inp" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
      </div>
      <div class="auth-err" id="reg-err"></div>
    </div>
    <button class="btn" id="reg-btn" onclick="doRegister()">CREATE ACCOUNT</button>
    <button class="auth-switch" onclick="showLogin()">Already have an account? <b>SIGN IN</b></button>
  </div>

  <!-- LOGIN -->
  <div class="auth-screen" id="scr-login">
    <div class="auth-icon">ğŸ”‘</div>
    <div class="auth-title" id="login-title">WELCOME BACK</div>
    <div class="auth-sub" id="login-sub">Sign in to continue</div>
    <div class="card" style="text-align:left">
      <div class="inp-row">
        <div class="inp-lbl" id="login-lbl-email">EMAIL</div>
        <input id="login-email" class="inp" type="email" placeholder="email@example.com">
      </div>
      <div class="inp-row" style="margin-bottom:0">
        <div class="inp-lbl" id="login-lbl-pass">PASSWORD</div>
        <input id="login-pass" class="inp" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
      </div>
      <div class="auth-err" id="login-err"></div>
    </div>
    <button class="btn" id="login-btn" onclick="doLogin()">SIGN IN</button>
    <button class="auth-switch" onclick="showReg()">No account? <b>CREATE ONE</b></button>
  </div>

  <!-- OFFLINE BANNER -->
  <div id="offline-banner">
    <div style="font-size:36px;margin-bottom:8px">ğŸ“¡</div>
    <div style="font-size:13px;font-weight:600;letter-spacing:2px;margin-bottom:4px" id="ob-title"></div>
    <div style="font-size:11px;opacity:.6;margin-bottom:18px" id="ob-desc"></div>
    <div class="card" style="text-align:left">
      <div style="font-size:10px;letter-spacing:2px;color:var(--gray);margin-bottom:6px" id="ob-lbl"></div>
      <input id="serial-inp" class="inp" type="text" maxlength="12" style="letter-spacing:3px;font-family:'Share Tech Mono',monospace;font-size:15px;text-transform:uppercase" placeholder="ZIVO-XXXXXX" oninput="this.value=this.value.toUpperCase()">
      <div id="serial-err" style="font-size:11px;color:var(--danger);margin-top:6px;display:none" id="ob-err"></div>
      <button class="btn" style="margin-top:12px" id="conn-btn" onclick="tryConnect()"></button>
    </div>
    <div style="margin-top:12px;font-size:11px;opacity:.4" id="ob-hint"></div>
  </div>

  <!-- PAGES WRAPPER (shown when connected) -->
  <div id="pages-wrap" style="display:none">

    <!-- HOME -->
    <div id="pg-home" class="page" style="display:block">
      <div class="trial-banner" id="trial-banner" style="display:none">
        <div class="trial-days" id="trial-d">7</div>
        <div>
          <div style="font-size:13px;font-weight:700" id="trial-title"></div>
          <div style="font-size:11px;color:var(--gray);margin-top:2px" id="trial-desc"></div>
        </div>
      </div>
      <div class="stats">
        <div class="stat"><div class="stat-v" id="temp-v">--</div><div class="stat-l" id="lbl-temp"></div></div>
        <div class="stat"><div class="stat-v" id="upt-v">--</div><div class="stat-l" id="lbl-upt"></div></div>
        <div class="stat"><div class="stat-v">âœ“</div><div class="stat-l">Wi-Fi</div></div>
      </div>
      <div class="card">
        <div class="batt-hdr">
          <span style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--gray)" id="lbl-batt"></span>
          <span class="batt-pct" id="batt-pct">--%</span>
        </div>
        <div class="batt-bar"><div class="batt-fill" id="batt-fill"></div></div>
      </div>
      <div class="sec" id="lbl-log"></div>
      <div id="log-list"></div>
    </div>

    <!-- CONTROL -->
    <div id="pg-control" class="page">
      <div class="sec" id="lbl-move"></div>
      <div class="dpad">
        <div class="db db-e"></div><div class="db" onclick="sendCmd('forward')">â–²</div><div class="db db-e"></div>
        <div class="db" onclick="sendCmd('left')">â—„</div><div class="db db-c">ZIVO</div><div class="db" onclick="sendCmd('right')">â–º</div>
        <div class="db db-e"></div><div class="db" onclick="sendCmd('backward')">â–¼</div><div class="db db-e"></div>
      </div>
      <div class="sec" id="lbl-actions"></div>
      <div class="act-grid">
        <div class="act-btn" onclick="sendCmd('wake')"><div class="act-ico">ğŸ¤</div><div class="act-lbl" id="lbl-wake"></div></div>
        <div class="act-btn" onclick="sendCmd('sleep')"><div class="act-ico">ğŸ˜´</div><div class="act-lbl" id="lbl-sleep"></div></div>
        <div class="act-btn" onclick="sendCmd('charge')"><div class="act-ico">ğŸ”‹</div><div class="act-lbl" id="lbl-charge"></div></div>
        <div class="act-btn" onclick="sendCmd('dance')"><div class="act-ico">ğŸ²</div><div class="act-lbl" id="lbl-dance"></div></div>
      </div>
    </div>

    <!-- ZONE -->
    <div id="pg-boundary" class="page">
      <div class="sec" id="lbl-zone"></div>
      <div class="bmap">
        <div class="bzone">
          <div class="ch" style="top:-6px;left:-6px"></div><div class="ch" style="top:-6px;right:-6px"></div>
          <div class="ch" style="bottom:-6px;left:-6px"></div><div class="ch" style="bottom:-6px;right:-6px"></div>
        </div>
        <div class="zdot"></div>
      </div>
      <div class="ig">
        <div class="ic"><div class="ic-l" id="lbl-zw"></div><div class="ic-v">80cm</div></div>
        <div class="ic"><div class="ic-l" id="lbl-zd"></div><div class="ic-v">60cm</div></div>
        <div class="ic"><div class="ic-l" id="lbl-ea"></div><div class="ic-v" style="color:var(--ok)" id="lbl-on"></div></div>
        <div class="ic"><div class="ic-l" id="lbl-falls"></div><div class="ic-v">0</div></div>
      </div>
    </div>

  </div><!-- /pages-wrap -->

  <!-- SETTINGS (always accessible) -->
  <div id="pg-settings" class="page" style="display:none">
    <div class="sec" id="lbl-lang"></div>
    <div class="lang-grid">
      <div class="lang-btn" onclick="setLang('ru',this)"><div class="lang-flag">ğŸ‡·ğŸ‡º</div><div class="lang-name">Ğ ÑƒÑÑĞºĞ¸Ğ¹</div></div>
      <div class="lang-btn on" onclick="setLang('en',this)"><div class="lang-flag">ğŸ‡ºğŸ‡¸</div><div class="lang-name">English</div></div>
      <div class="lang-btn" onclick="setLang('he',this)"><div class="lang-flag">ğŸ‡®ğŸ‡±</div><div class="lang-name">×¢×‘×¨×™×ª</div></div>
      <div class="lang-btn" onclick="setLang('zh',this)"><div class="lang-flag">ğŸ‡¨ğŸ‡³</div><div class="lang-name">ä¸­æ–‡</div></div>
      <div class="lang-btn" onclick="setLang('uk',this)"><div class="lang-flag">ğŸ‡ºğŸ‡¦</div><div class="lang-name">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</div></div>
    </div>
    <div class="sec" id="lbl-feat"></div>
    <div class="tog-row"><div><div class="tog-lbl" id="lbl-voice-act"></div><div class="tog-desc" id="lbl-voice-act-d"></div></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
    <div class="tog-row"><div><div class="tog-lbl" id="lbl-edge"></div><div class="tog-desc" id="lbl-edge-d"></div></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
    <div class="tog-row"><div><div class="tog-lbl" id="lbl-auto"></div><div class="tog-desc" id="lbl-auto-d"></div></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
    <div class="tog-row"><div><div class="tog-lbl" id="lbl-expl"></div><div class="tog-desc" id="lbl-expl-d"></div></div><div class="tog" onclick="this.classList.toggle('on')"></div></div>
    <div class="tog-row"><div><div class="tog-lbl" id="lbl-notif"></div><div class="tog-desc" id="lbl-notif-d"></div></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
  </div>

  <!-- PROFILE -->
  <div id="pg-profile" class="page" style="display:none">
    <div class="prof-hdr">
      <div class="avatar">ğŸ¤–</div>
      <div>
        <div class="prof-name" id="prof-name">User</div>
        <div class="prof-since" id="prof-since"></div>
        <div class="badge free" id="prof-badge">FREE</div>
      </div>
    </div>
    <div class="sec" id="lbl-info"></div>
    <div class="card">
      <div class="inp-row">
        <div class="inp-lbl" id="lbl-uname"></div>
        <input id="inp-uname" class="inp" type="text" oninput="saveProfile()">
      </div>
      <div class="inp-row" style="margin-bottom:0">
        <div class="inp-lbl" id="lbl-botname"></div>
        <input id="inp-botname" class="inp" type="text" placeholder="ZIVO" oninput="saveBotName()">
      </div>
    </div>
    <div class="sec" id="lbl-smart"></div>
    <div class="smart-hero card" style="text-align:center">
      <div style="font-size:36px;margin-bottom:8px">ğŸ§ </div>
      <div style="font-size:16px;font-weight:700;margin-bottom:4px" id="lbl-smart-t"></div>
      <div style="font-size:11px;color:var(--gray);line-height:1.5" id="lbl-smart-d"></div>
    </div>
    <div class="tog-row" id="smart-row">
      <div><div class="tog-lbl" id="lbl-smart-l"></div><div class="tog-desc" id="lbl-smart-s"></div></div>
      <div class="tog" id="smart-tog" onclick="toggleSmart()"></div>
    </div>
    <div class="sec" id="lbl-voices"></div>
    <div class="voice-grid" id="voice-list"></div>
    <div id="voice-lock-msg" style="display:none;text-align:center;padding:10px;font-size:11px;color:var(--gold)"></div>
    <div class="sec" id="lbl-sub"></div>
    <div class="card" id="sub-info"></div>
    <button class="btn-out" onclick="openSub()" id="manage-sub-btn"></button>
    <button class="btn-out red" style="margin-top:8px" onclick="doLogout()" id="logout-btn">LOGOUT</button>
  </div>

  <!-- NAV -->
  <div class="nav">
    <div class="ni on" onclick="goPage('home',this)"><div class="ni-ico">ğŸ¤–</div><div class="ni-lbl">ZIVO</div></div>
    <div class="ni" onclick="goPage('control',this)"><div class="ni-ico">ğŸ•¹ï¸</div><div class="ni-lbl" id="nav-ctrl"></div></div>
    <div class="ni" onclick="goPage('boundary',this)"><div class="ni-ico">ğŸ“</div><div class="ni-lbl" id="nav-zone"></div></div>
    <div class="ni" onclick="goPage('profile',this)"><div class="ni-ico">ğŸ‘¤</div><div class="ni-lbl" id="nav-prof"></div></div>
    <div class="ni" onclick="goPage('settings',this)"><div class="ni-ico">âš™ï¸</div><div class="ni-lbl" id="nav-set"></div></div>
  </div>

</div><!-- /app -->

<!-- SUB MODAL -->
<div class="modal-bg" id="sub-modal">
  <div class="modal">
    <button class="modal-x" onclick="closeSub()">âœ•</button>
    <div class="modal-title" id="lbl-plan"></div>
    <div id="modal-trial" style="display:none;background:rgba(0,255,170,0.08);border:1px solid var(--ok);border-radius:12px;padding:12px;margin-bottom:14px;font-size:12px;text-align:center;color:var(--ok)" id="lbl-trial-modal"></div>
    <div class="plan-grid">
      <div class="plan" id="pl-monthly" onclick="pickPlan('monthly')">
        <div class="plan-name" id="lbl-pm"></div>
        <div class="plan-price" id="price-m">â€”</div>
        <div class="plan-per" id="lbl-pm-per"></div>
      </div>
      <div class="plan" id="pl-yearly" onclick="pickPlan('yearly')">
        <div class="plan-save" id="lbl-save"></div>
        <div class="plan-name" id="lbl-py"></div>
        <div class="plan-price" id="price-y">â€”</div>
        <div class="plan-per" id="lbl-py-per"></div>
      </div>
      <div class="plan gld plan-full" id="pl-forever" onclick="pickPlan('forever')">
        <div class="plan-name" id="lbl-pf"></div>
        <div class="plan-price" id="price-f" style="color:var(--gold)">â€”</div>
        <div class="plan-per" id="lbl-pf-per"></div>
      </div>
    </div>
    <div class="sec" id="lbl-included"></div>
    <div class="feat-list">
      <div class="feat"><span class="feat-ico">âœ…</span><span id="lbl-f1"></span></div>
      <div class="feat"><span class="feat-ico">âœ…</span><span id="lbl-f2"></span></div>
      <div class="feat"><span class="feat-ico">ğŸ”’</span><span class="feat-locked" id="lbl-f3"></span></div>
      <div class="feat"><span class="feat-ico">ğŸ”’</span><span class="feat-locked" id="lbl-f4"></span></div>
    </div>
    <button class="btn" id="sub-do-btn" onclick="doSubscribe()"></button>
    <button class="btn-out" onclick="closeSub()" style="margin-top:8px" id="lbl-later"></button>
  </div>
</div>

<script>
// â”€â”€ FIREBASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
firebase.initializeApp({
  apiKey: "AIzaSyA60wxCXnSd0r_crI8Kfke8FE4D1D7YCbA",
  authDomain: "zivo-c411b.firebaseapp.com",
  projectId: "zivo-c411b",
  storageBucket: "zivo-c411b.firebasestorage.app",
  messagingSenderId: "508877760361",
  appId: "1:508877760361:web:68fac40a187eb6c9bdbff8"
});
var auth = firebase.auth();
var db   = firebase.firestore();

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var lang = 'en';
var moodIdx = 0;
var connected = false;
var currentRobot = null;
var currentSerial = null;
var selectedPlan = 'yearly';
var USER = JSON.parse(localStorage.getItem('zivo_user') || '{}');

// â”€â”€ ROBOTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var ROBOTS = {
  'ZIVO-ADMINMW': { name: 'ZIVO #1', owner: 'Admin' }
};

// â”€â”€ VOICES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var VOICES = [
  { id:'default', e:'ğŸ¤–', name:'ZIVO',  dk:'vd_default', free:true  },
  { id:'sage',    e:'ğŸ§™', name:'Sage',  dk:'vd_sage',    free:false },
  { id:'nova',    e:'âš¡', name:'Nova',  dk:'vd_nova',    free:false },
  { id:'echo',    e:'ğŸŒŠ', name:'Echo',  dk:'vd_echo',    free:false },
  { id:'spark',   e:'ğŸ”¥', name:'Spark', dk:'vd_spark',   free:false },
  { id:'atlas',   e:'ğŸŒ', name:'Atlas', dk:'vd_atlas',   free:false },
  { id:'luna',    e:'ğŸŒ™', name:'Luna',  dk:'vd_luna',    free:false },
  { id:'titan',   e:'âš™ï¸', name:'Titan', dk:'vd_titan',   free:false },
  { id:'pixel',   e:'ğŸ‘¾', name:'Pixel', dk:'vd_pixel',   free:false },
  { id:'zen',     e:'ğŸƒ', name:'Zen',   dk:'vd_zen',     free:false }
];

// â”€â”€ TRANSLATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var T = {
  en:{
    online:'ONLINE', offline:'DISCONNECTED', not_conn:'ZIVO is not connected',
    not_conn_d:'Enter your serial number', serial_lbl:'SERIAL NUMBER',
    serial_wrong:'Wrong serial number.', serial_hint:'Serial number is on the sticker on the bottom',
    conn_btn:'CONNECT', moods:['READY','EXPLORING','HAPPY','WAITING'],
    temp:'TEMP', upt:'UPTIME', batt:'BATTERY', log:'LOG', move:'MOVEMENT',
    actions:'ACTIONS', wake:'WAKE UP', sleep:'SLEEP', charge:'CHARGE', dance:'DANCE',
    zone:'SAFE ZONE', zw:'WIDTH', zd:'DEPTH', ea:'EDGE ALERTS', on:'ON', falls:'FALLS',
    lang:'LANGUAGE', feat:'FEATURES',
    voiceact:'Voice Activation', voiceact_d:'Wake with "Hey ZIVO"',
    edge:'Edge Protection', edge_d:'Stop at table edges',
    auto:'Auto Charging', auto_d:'Return to base when low',
    expl:'Random Explore', expl_d:'ZIVO moves on its own',
    notif:'Notifications', notif_d:'Battery and edge alerts',
    nav_ctrl:'CONTROL', nav_zone:'ZONE', nav_prof:'PROFILE', nav_set:'SETTINGS',
    info:'YOUR INFO', uname:'YOUR NAME', botname:'BOT NAME (smart mode)',
    smart:'SMART MODE', smart_t:'Smart Mode', smart_d:'Bot responds to custom name. Pro only.',
    smart_l:'Enable Smart Mode', smart_s:'Bot responds to its name',
    voices:'BOT VOICE', voice_lock:'Extra voices available in Pro',
    vd_default:'Default ZIVO voice', vd_sage:'Wise and calm', vd_nova:'Energetic',
    vd_echo:'Deep and rich', vd_spark:'Fun and playful', vd_atlas:'Powerful',
    vd_luna:'Soft and dreamy', vd_titan:'Robotic precise', vd_pixel:'Digital techy',
    vd_zen:'Calm and meditative',
    sub:'SUBSCRIPTION', manage_sub:'MANAGE SUBSCRIPTION',
    trial_title:'Free trial active!', trial_d:'All features unlocked',
    trial_modal:'Your trial is active â€” all features unlocked!',
    plan:'CHOOSE YOUR PLAN', pm:'Monthly', py:'Yearly', pf:'Forever',
    pm_per:'/month', py_per:'/mo billed yearly', pf_per:'one-time',
    save:'SAVE 40%', included:"WHAT'S INCLUDED",
    f1:'Robot control', f2:'Basic commands', f3:'10 voices',
    f4:'Smart mode + custom name',
    sub_btn:'GET PRO', later:'Maybe later',
    log_conn:'Connected to {name}', member_since:'Member since',
    upfmt: function(h,m){ return h+'h'+String(m).padStart(2,'0')+'m'; }
  },
  ru:{
    online:'Ğ’ Ğ¡Ğ•Ğ¢Ğ˜', offline:'ĞĞ• ĞŸĞĞ”ĞšĞ›Ğ®Ğ§ĞĞ', not_conn:'ZIVO Ğ½Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½',
    not_conn_d:'Ğ’Ğ²ĞµĞ´Ğ¸ ÑĞµÑ€Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€', serial_lbl:'Ğ¡Ğ•Ğ Ğ˜Ğ™ĞĞ«Ğ™ ĞĞĞœĞ•Ğ ',
    serial_wrong:'ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€.', serial_hint:'Ğ¡ĞµÑ€Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ½Ğ° Ğ½Ğ°ĞºĞ»ĞµĞ¹ĞºĞµ Ğ½Ğ° Ğ´Ğ½Ğµ ĞºĞ¾Ñ€Ğ¿ÑƒÑĞ°',
    conn_btn:'ĞŸĞĞ”ĞšĞ›Ğ®Ğ§Ğ˜Ğ¢Ğ¬', moods:['Ğ“ĞĞ¢ĞĞ’','Ğ˜Ğ¡Ğ¡Ğ›Ğ•Ğ”Ğ£Ğ®','Ğ¡Ğ§ĞĞ¡Ğ¢Ğ›Ğ˜Ğ’','Ğ–Ğ”Ğ£'],
    temp:'Ğ¢Ğ•ĞœĞŸ', upt:'Ğ’Ğ Ğ•ĞœĞ¯', batt:'Ğ‘ĞĞ¢ĞĞ Ğ•Ğ¯', log:'Ğ–Ğ£Ğ ĞĞĞ›', move:'Ğ”Ğ’Ğ˜Ğ–Ğ•ĞĞ˜Ğ•',
    actions:'Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯', wake:'Ğ ĞĞ—Ğ‘Ğ£Ğ”Ğ˜Ğ¢Ğ¬', sleep:'Ğ¡ĞŸĞĞ¢Ğ¬', charge:'Ğ—ĞĞ Ğ¯Ğ”ĞšĞ', dance:'Ğ¢ĞĞĞ•Ğ¦',
    zone:'ĞšĞĞ Ğ¢Ğ Ğ—ĞĞĞ«', zw:'Ğ¨Ğ˜Ğ Ğ˜ĞĞ', zd:'Ğ“Ğ›Ğ£Ğ‘Ğ˜ĞĞ', ea:'Ğ—ĞĞ©Ğ˜Ğ¢Ğ ĞšĞ ĞĞ¯', on:'Ğ’ĞšĞ›', falls:'ĞŸĞĞ”Ğ•ĞĞ˜Ğ™',
    lang:'Ğ¯Ğ—Ğ«Ğš', feat:'Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜',
    voiceact:'Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ', voiceact_d:'ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ ZIVO"',
    edge:'Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ', edge_d:'ĞÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑ Ñƒ ĞºÑ€Ğ°Ñ',
    auto:'ĞĞ²Ñ‚Ğ¾ Ğ·Ğ°Ñ€ÑĞ´ĞºĞ°', auto_d:'Ğ•Ñ…Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ±Ğ°Ğ·Ñƒ Ğ¿Ñ€Ğ¸ Ğ½Ğ¸Ğ·ĞºĞ¾Ğ¼ Ğ·Ğ°Ñ€ÑĞ´Ğµ',
    expl:'Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸', expl_d:'ZIVO ĞµĞ·Ğ´Ğ¸Ñ‚ ÑĞ°Ğ¼Ğ¾ÑÑ‚Ğ¾ÑÑ‚ĞµĞ»ÑŒĞ½Ğ¾',
    notif:'Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ', notif_d:'Ğ—Ğ°Ñ€ÑĞ´ Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºÑ€Ğ°Ñ',
    nav_ctrl:'Ğ£ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•', nav_zone:'Ğ—ĞĞĞ', nav_prof:'ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬', nav_set:'ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜',
    info:'Ğ˜ĞĞ¤ĞĞ ĞœĞĞ¦Ğ˜Ğ¯', uname:'Ğ¢Ğ’ĞĞ Ğ˜ĞœĞ¯', botname:'Ğ˜ĞœĞ¯ Ğ‘ĞĞ¢Ğ (ÑƒĞ¼Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼)',
    smart:'Ğ£ĞœĞĞ«Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ', smart_t:'Ğ£Ğ¼Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼', smart_d:'Ğ‘Ğ¾Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ½Ğ° ÑĞ²Ğ¾Ñ‘ Ğ¸Ğ¼Ñ. Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Pro.',
    smart_l:'Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ¼Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼', smart_s:'Ğ‘Ğ¾Ñ‚ Ñ€ĞµĞ°Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ Ğ½Ğ° ÑĞ²Ğ¾Ñ‘ Ğ¸Ğ¼Ñ',
    voices:'Ğ“ĞĞ›ĞĞ¡ Ğ‘ĞĞ¢Ğ', voice_lock:'Ğ“Ğ¾Ğ»Ğ¾ÑĞ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ğ² Pro',
    vd_default:'Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ', vd_sage:'ĞœÑƒĞ´Ñ€Ñ‹Ğ¹ Ğ¸ ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ñ‹Ğ¹', vd_nova:'Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğ¹',
    vd_echo:'Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ğ¸ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ½Ñ‹Ğ¹', vd_spark:'Ğ’ĞµÑÑ‘Ğ»Ñ‹Ğ¹', vd_atlas:'ĞœĞ¾Ñ‰Ğ½Ñ‹Ğ¹',
    vd_luna:'ĞœÑĞ³ĞºĞ¸Ğ¹ Ğ¸ Ğ»ÑƒĞ½Ğ½Ñ‹Ğ¹', vd_titan:'Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹', vd_pixel:'Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğ¹',
    vd_zen:'Ğ¡Ğ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ñ‹Ğ¹',
    sub:'ĞŸĞĞ”ĞŸĞ˜Ğ¡ĞšĞ', manage_sub:'Ğ£ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ• ĞŸĞĞ”ĞŸĞ˜Ğ¡ĞšĞĞ™',
    trial_title:'ĞŸÑ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½!', trial_d:'Ğ’ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾',
    trial_modal:'ĞŸÑ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½ â€” Ğ²ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹!',
    plan:'Ğ’Ğ«Ğ‘Ğ•Ğ Ğ˜ ĞŸĞ›ĞĞ', pm:'ĞœĞµÑÑÑ†', py:'Ğ“Ğ¾Ğ´', pf:'ĞĞ°Ğ²ÑĞµĞ³Ğ´Ğ°',
    pm_per:'/Ğ¼ĞµÑÑÑ†', py_per:'Ğ² Ğ¼ĞµÑÑÑ† (Ğ³Ğ¾Ğ´)', pf_per:'Ğ¾Ğ´Ğ½Ğ¾Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶',
    save:'Ğ¡ĞšĞ˜Ğ”ĞšĞ 40%', included:'Ğ§Ğ¢Ğ Ğ’ĞšĞ›Ğ®Ğ§Ğ•ĞĞ',
    f1:'Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¾Ğ¼', f2:'Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹', f3:'10 Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²',
    f4:'Ğ£Ğ¼Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ + ÑĞ²Ğ¾Ñ‘ Ğ¸Ğ¼Ñ',
    sub_btn:'ĞŸĞĞ”ĞšĞ›Ğ®Ğ§Ğ˜Ğ¢Ğ¬ PRO', later:'ĞŸĞ¾Ğ·Ğ¶Ğµ',
    log_conn:'ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½ Ğº {name}', member_since:'Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ñ',
    upfmt: function(h,m){ return h+'Ñ‡'+String(m).padStart(2,'0')+'Ğ¼'; }
  },
  he:{
    online:'××—×•×‘×¨', offline:'×× ×•×ª×§', not_conn:'ZIVO ×œ× ××—×•×‘×¨',
    not_conn_d:'×”×–×Ÿ ××ª ×”××¡×¤×¨ ×”×¡×™×“×•×¨×™', serial_lbl:'××¡×¤×¨ ×¡×™×“×•×¨×™',
    serial_wrong:'××¡×¤×¨ ×¡×™×“×•×¨×™ ×©×’×•×™.', serial_hint:'×”××¡×¤×¨ × ××¦× ×‘×ª×—×ª×™×ª ZIVO',
    conn_btn:'×”×ª×—×‘×¨', moods:['××•×›×Ÿ','×—×•×§×¨','×©××—','×××ª×™×Ÿ'],
    temp:'×˜××¤', upt:'×–××Ÿ', batt:'×¡×•×œ×œ×”', log:'×™×•××Ÿ', move:'×ª× ×•×¢×”',
    actions:'×¤×¢×•×œ×•×ª', wake:'×”×ª×¢×•×¨×¨', sleep:'×©×™× ×”', charge:'×œ×˜×¢×™× ×”', dance:'×œ×¨×§×•×“',
    zone:'××¤×ª ××–×•×¨', zw:'×¨×•×—×‘', zd:'×¢×•××§', ea:'×”×’× ×ª ×§×¦×”', on:'×¤×•×¢×œ', falls:'× ×¤×™×œ×•×ª',
    lang:'×©×¤×”', feat:'×ª×›×•× ×•×ª',
    voiceact:'×”×¤×¢×œ×” ×§×•×œ×™×ª', voiceact_d:'×”×¤×¢×œ×” ×¢× "×”×™×™ ZIVO"',
    edge:'×”×’× ×” ×× ×¤×™×œ×”', edge_d:'×¢×¦×•×¨ ×‘×§×¦×” ×”×©×•×œ×—×Ÿ',
    auto:'×˜×¢×™× ×” ××•×˜×•××˜×™×ª', auto_d:'×—×–×•×¨ ×œ×‘×¡×™×¡ ×›×©×”×¡×•×œ×œ×” × ××•×›×”',
    expl:'×¡×™×•×¨ ××§×¨××™', expl_d:'ZIVO × ×•×¡×¢ ×œ×‘×“',
    notif:'×”×ª×¨××•×ª', notif_d:'×¡×•×œ×œ×” ×•×”×’× ×ª ×§×¦×”',
    nav_ctrl:'×©×œ×™×˜×”', nav_zone:'××–×•×¨', nav_prof:'×¤×¨×•×¤×™×œ', nav_set:'×”×’×“×¨×•×ª',
    info:'×¤×¨×˜×™×', uname:'×©××š', botname:'×©× ×”×‘×•×˜',
    smart:'××¦×‘ ×—×›×', smart_t:'××¦×‘ ×—×›×', smart_d:'×”×‘×•×˜ ××’×™×‘ ×œ×©× ×©×‘×—×¨×ª. Pro ×‘×œ×‘×“.',
    smart_l:'×”×¤×¢×œ ××¦×‘ ×—×›×', smart_s:'×”×‘×•×˜ ××’×™×‘ ×œ×©××•',
    voices:'×§×•×œ ×”×‘×•×˜', voice_lock:'×§×•×œ×•×ª × ×•×¡×¤×™× ×‘-Pro',
    vd_default:'×§×•×œ ×‘×¨×™×¨×ª ××—×“×œ', vd_sage:'×—×›× ×•×¨×’×•×¢', vd_nova:'×× ×¨×’×˜×™',
    vd_echo:'×¢××•×§', vd_spark:'×›×™×¤×™', vd_atlas:'×—×–×§',
    vd_luna:'×¨×š', vd_titan:'×¨×•×‘×•×˜×™', vd_pixel:'×“×™×’×™×˜×œ×™',
    vd_zen:'×¨×’×•×¢',
    sub:'×× ×•×™', manage_sub:'× ×™×”×•×œ ×× ×•×™',
    trial_title:'×ª×§×•×¤×ª × ×™×¡×™×•×Ÿ ×¤×¢×™×œ×”!', trial_d:'×›×œ ×”×¤×•× ×§×¦×™×•×ª ×¤×ª×•×—×•×ª',
    trial_modal:'×ª×§×•×¤×ª ×”× ×™×¡×™×•×Ÿ ×¤×¢×™×œ×”!',
    plan:'×‘×—×¨ ×ª×•×›× ×™×ª', pm:'×—×•×“×©×™', py:'×©× ×ª×™', pf:'×œ×¦××™×ª×•×ª',
    pm_per:'/×—×•×“×©', py_per:'/×—×•×“×© ×©× ×ª×™', pf_per:'×ª×©×œ×•× ×—×“ ×¤×¢××™',
    save:'×—×¡×•×š 40%', included:'××” ×›×œ×•×œ',
    f1:'×©×œ×™×˜×” ×‘×‘×•×˜', f2:'×¤×§×•×“×•×ª ×‘×¡×™×¡×™×•×ª', f3:'10 ×§×•×œ×•×ª',
    f4:'××¦×‘ ×—×›×',
    sub_btn:'×”×¦×˜×¨×£ ×œ-Pro', later:'××•×œ×™ ×××•×—×¨ ×™×•×ª×¨',
    log_conn:'××—×•×‘×¨ ×œ-{name}', member_since:'×—×‘×¨ ×××–',
    upfmt: function(h,m){ return h+'×©'+String(m).padStart(2,'0')+'×“'; }
  },
  zh:{
    online:'åœ¨çº¿', offline:'æœªè¿æ¥', not_conn:'ZIVOæœªè¿æ¥',
    not_conn_d:'è¾“å…¥åºåˆ—å·', serial_lbl:'åºåˆ—å·',
    serial_wrong:'åºåˆ—å·é”™è¯¯ã€‚', serial_hint:'åºåˆ—å·åœ¨åº•éƒ¨è´´çº¸ä¸Š',
    conn_btn:'è¿æ¥', moods:['å‡†å¤‡å¥½äº†','æ¢ç´¢ä¸­','å¼€å¿ƒ','ç­‰å¾…'],
    temp:'æ¸©åº¦', upt:'è¿è¡Œ', batt:'ç”µæ± ', log:'æ—¥å¿—', move:'ç§»åŠ¨',
    actions:'æ“ä½œ', wake:'å”¤é†’', sleep:'ç¡çœ ', charge:'å……ç”µ', dance:'è·³èˆ',
    zone:'å®‰å…¨åŒºåŸŸ', zw:'å®½åº¦', zd:'æ·±åº¦', ea:'è¾¹ç¼˜ä¿æŠ¤', on:'å¼€å¯', falls:'è·Œè½',
    lang:'è¯­è¨€', feat:'åŠŸèƒ½',
    voiceact:'è¯­éŸ³æ¿€æ´»', voiceact_d:'è¯´"å˜¿ZIVO"å”¤é†’',
    edge:'é˜²è·Œè½', edge_d:'åœ¨è¾¹ç¼˜åœä¸‹',
    auto:'è‡ªåŠ¨å……ç”µ', auto_d:'ç”µé‡ä½æ—¶è¿”å›å……ç”µ',
    expl:'éšæœºæ¢ç´¢', expl_d:'ZIVOè‡ªä¸»ç§»åŠ¨',
    notif:'é€šçŸ¥', notif_d:'ç”µæ± å’Œè¾¹ç¼˜è­¦æŠ¥',
    nav_ctrl:'æ§åˆ¶', nav_zone:'åŒºåŸŸ', nav_prof:'ä¸ªäºº', nav_set:'è®¾ç½®',
    info:'ä¸ªäººä¿¡æ¯', uname:'ä½ çš„åå­—', botname:'æœºå™¨äººåç§°',
    smart:'æ™ºèƒ½æ¨¡å¼', smart_t:'æ™ºèƒ½æ¨¡å¼', smart_d:'æœºå™¨äººå“åº”è‡ªå®šä¹‰åå­—ã€‚ä»…Proã€‚',
    smart_l:'å¯ç”¨æ™ºèƒ½æ¨¡å¼', smart_s:'æœºå™¨äººå“åº”å…¶åå­—',
    voices:'å£°éŸ³', voice_lock:'æ›´å¤šå£°éŸ³åœ¨Proä¸­å¯ç”¨',
    vd_default:'é»˜è®¤å£°éŸ³', vd_sage:'ç¿æ™º', vd_nova:'æ´»åŠ›',
    vd_echo:'æ·±æ²‰', vd_spark:'æ´»æ³¼', vd_atlas:'å¼ºå¤§',
    vd_luna:'æŸ”å’Œ', vd_titan:'æœºå™¨äºº', vd_pixel:'æ•°å­—',
    vd_zen:'å¹³é™',
    sub:'è®¢é˜…', manage_sub:'ç®¡ç†è®¢é˜…',
    trial_title:'è¯•ç”¨æœŸæ¿€æ´»ï¼', trial_d:'æ‰€æœ‰åŠŸèƒ½å…è´¹',
    trial_modal:'è¯•ç”¨æœŸå·²æ¿€æ´»ï¼',
    plan:'é€‰æ‹©æ–¹æ¡ˆ', pm:'æœˆåº¦', py:'å¹´åº¦', pf:'æ°¸ä¹…',
    pm_per:'/æœˆ', py_per:'/æœˆå¹´ä»˜', pf_per:'ä¸€æ¬¡æ€§',
    save:'èŠ‚çœ40%', included:'åŒ…å«å†…å®¹',
    f1:'æœºå™¨äººæ§åˆ¶', f2:'åŸºæœ¬å‘½ä»¤', f3:'10ç§å£°éŸ³',
    f4:'æ™ºèƒ½æ¨¡å¼',
    sub_btn:'è·å–Pro', later:'ç¨å',
    log_conn:'å·²è¿æ¥åˆ°{name}', member_since:'åŠ å…¥æ—¶é—´',
    upfmt: function(h,m){ return h+'æ—¶'+String(m).padStart(2,'0')+'åˆ†'; }
  },
  uk:{
    online:'Ğ’ ĞœĞ•Ğ Ğ•Ğ–Ğ†', offline:'ĞĞ• ĞŸĞ†Ğ”ĞšĞ›Ğ®Ğ§Ğ•ĞĞ', not_conn:'ZIVO Ğ½Ğµ Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾',
    not_conn_d:'Ğ’Ğ²ĞµĞ´Ğ¸ ÑĞµÑ€Ñ–Ğ¹Ğ½Ğ¸Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€', serial_lbl:'Ğ¡Ğ•Ğ Ğ†Ğ™ĞĞ˜Ğ™ ĞĞĞœĞ•Ğ ',
    serial_wrong:'ĞĞµĞ²Ñ–Ñ€Ğ½Ğ¸Ğ¹ ÑĞµÑ€Ñ–Ğ¹Ğ½Ğ¸Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€.', serial_hint:'Ğ¡ĞµÑ€Ñ–Ğ¹Ğ½Ğ¸Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ½Ğ° Ğ½Ğ°ĞºĞ»ĞµĞ¹Ñ†Ñ– Ğ½Ğ° Ğ´Ğ½Ñ– ĞºĞ¾Ñ€Ğ¿ÑƒÑÑƒ',
    conn_btn:'ĞŸĞ†Ğ”ĞšĞ›Ğ®Ğ§Ğ˜Ğ¢Ğ˜', moods:['Ğ“ĞĞ¢ĞĞ’Ğ˜Ğ™','Ğ”ĞĞ¡Ğ›Ğ†Ğ”Ğ–Ğ£Ğ®','Ğ©ĞĞ¡Ğ›Ğ˜Ğ’Ğ˜Ğ™','Ğ§Ğ•ĞšĞĞ®'],
    temp:'Ğ¢Ğ•ĞœĞŸ', upt:'Ğ§ĞĞ¡', batt:'Ğ‘ĞĞ¢ĞĞ Ğ•Ğ¯', log:'Ğ–Ğ£Ğ ĞĞĞ›', move:'Ğ Ğ£Ğ¥',
    actions:'Ğ”Ğ†Ğ‡', wake:'Ğ ĞĞ—Ğ‘Ğ£Ğ”Ğ˜Ğ¢Ğ˜', sleep:'Ğ¡ĞŸĞĞ¢Ğ˜', charge:'Ğ—ĞĞ Ğ¯Ğ”ĞšĞ', dance:'Ğ¢ĞĞĞ•Ğ¦Ğ¬',
    zone:'ĞšĞĞ Ğ¢Ğ Ğ—ĞĞĞ˜', zw:'Ğ¨Ğ˜Ğ Ğ˜ĞĞ', zd:'Ğ“Ğ›Ğ˜Ğ‘Ğ˜ĞĞ', ea:'Ğ—ĞĞ¥Ğ˜Ğ¡Ğ¢ ĞšĞ ĞĞ®', on:'Ğ£Ğ’Ğ†ĞœĞšĞ', falls:'ĞŸĞĞ”Ğ†ĞĞ¬',
    lang:'ĞœĞĞ’Ğ', feat:'Ğ¤Ğ£ĞĞšĞ¦Ğ†Ğ‡',
    voiceact:'Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ñ–Ñ', voiceact_d:'ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ñ–Ñ "ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚ ZIVO"',
    edge:'Ğ—Ğ°Ñ…Ğ¸ÑÑ‚ Ğ²Ñ–Ğ´ Ğ¿Ğ°Ğ´Ñ–Ğ½Ğ½Ñ', edge_d:'Ğ—ÑƒĞ¿Ğ¸Ğ½ÑÑ‚Ğ¸ÑÑŒ Ğ±Ñ–Ğ»Ñ ĞºÑ€Ğ°Ñ',
    auto:'ĞĞ²Ñ‚Ğ¾ Ğ·Ğ°Ñ€ÑĞ´ĞºĞ°', auto_d:'Ğ‡Ñ…Ğ°Ñ‚Ğ¸ Ğ½Ğ° Ğ±Ğ°Ğ·Ñƒ Ğ¿Ñ€Ğ¸ Ğ½Ğ¸Ğ·ÑŒĞºĞ¾Ğ¼Ñƒ Ğ·Ğ°Ñ€ÑĞ´Ñ–',
    expl:'Ğ’Ğ¸Ğ¿Ğ°Ğ´ĞºĞ¾Ğ²Ñ– Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ÑĞ½ĞºĞ¸', expl_d:'ZIVO Ñ—Ğ·Ğ´Ğ¸Ñ‚ÑŒ ÑĞ°Ğ¼Ğ¾ÑÑ‚Ñ–Ğ¹Ğ½Ğ¾',
    notif:'Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ', notif_d:'Ğ—Ğ°Ñ€ÑĞ´ Ñ– Ğ·Ğ°Ñ…Ğ¸ÑÑ‚ ĞºÑ€Ğ°Ñ',
    nav_ctrl:'ĞšĞ•Ğ Ğ£Ğ’ĞĞĞĞ¯', nav_zone:'Ğ—ĞĞĞ', nav_prof:'ĞŸĞ ĞĞ¤Ğ†Ğ›Ğ¬', nav_set:'ĞĞĞ›ĞĞ¨Ğ¢Ğ£Ğ’ĞĞĞĞ¯',
    info:'Ğ†ĞĞ¤ĞĞ ĞœĞĞ¦Ğ†Ğ¯', uname:'Ğ¢Ğ’ĞĞ„ Ğ†ĞœĞ¯', botname:'Ğ†ĞœĞ¯ Ğ‘ĞĞ¢Ğ (Ñ€Ğ¾Ğ·ÑƒĞ¼Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼)',
    smart:'Ğ ĞĞ—Ğ£ĞœĞĞ˜Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ', smart_t:'Ğ Ğ¾Ğ·ÑƒĞ¼Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼', smart_d:'Ğ‘Ğ¾Ñ‚ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ñ” Ğ½Ğ° ÑĞ²Ğ¾Ñ” Ñ–Ğ¼Ñ. Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Pro.',
    smart_l:'Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ñ€Ğ¾Ğ·ÑƒĞ¼Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼', smart_s:'Ğ‘Ğ¾Ñ‚ Ñ€ĞµĞ°Ğ³ÑƒÑ” Ğ½Ğ° ÑĞ²Ğ¾Ñ” Ñ–Ğ¼Ñ',
    voices:'Ğ“ĞĞ›ĞĞ¡ Ğ‘ĞĞ¢Ğ', voice_lock:'Ğ“Ğ¾Ğ»Ğ¾ÑĞ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ– Ğ² Pro',
    vd_default:'Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ', vd_sage:'ĞœÑƒĞ´Ñ€Ğ¸Ğ¹ Ñ– ÑĞ¿Ğ¾ĞºÑ–Ğ¹Ğ½Ğ¸Ğ¹', vd_nova:'Ğ•Ğ½ĞµÑ€Ğ³Ñ–Ğ¹Ğ½Ğ¸Ğ¹',
    vd_echo:'Ğ“Ğ»Ğ¸Ğ±Ğ¾ĞºĞ¸Ğ¹', vd_spark:'Ğ’ĞµÑĞµĞ»Ğ¸Ğ¹', vd_atlas:'ĞŸĞ¾Ñ‚ÑƒĞ¶Ğ½Ğ¸Ğ¹',
    vd_luna:'ĞœÑĞºĞ¸Ğ¹ Ñ– Ğ¼Ñ€Ñ–Ğ¹Ğ»Ğ¸Ğ²Ğ¸Ğ¹', vd_titan:'Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹', vd_pixel:'Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¸Ğ¹',
    vd_zen:'Ğ¡Ğ¿Ğ¾ĞºÑ–Ğ¹Ğ½Ğ¸Ğ¹',
    sub:'ĞŸĞ†Ğ”ĞŸĞ˜Ğ¡ĞšĞ', manage_sub:'ĞšĞ•Ğ Ğ£Ğ’ĞĞĞĞ¯ ĞŸĞ†Ğ”ĞŸĞ˜Ğ¡ĞšĞĞ®',
    trial_title:'ĞŸÑ€Ğ¾Ğ±Ğ½Ğ¸Ğ¹ Ğ¿ĞµÑ€Ñ–Ğ¾Ğ´ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹!', trial_d:'Ğ’ÑÑ– Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ— Ğ±ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¾',
    trial_modal:'ĞŸÑ€Ğ¾Ğ±Ğ½Ğ¸Ğ¹ Ğ¿ĞµÑ€Ñ–Ğ¾Ğ´ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹!',
    plan:'ĞĞ‘Ğ•Ğ Ğ˜ ĞŸĞ›ĞĞ', pm:'ĞœÑ–ÑÑÑ†ÑŒ', py:'Ğ Ñ–Ğº', pf:'ĞĞ°Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸',
    pm_per:'/Ğ¼Ñ–ÑÑÑ†ÑŒ', py_per:'Ğ½Ğ° Ğ¼Ñ–ÑÑÑ†ÑŒ (Ñ€Ñ–Ğº)', pf_per:'Ğ¾Ğ´Ğ½Ğ¾Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ–Ğ¶',
    save:'Ğ—ĞĞ˜Ğ–ĞšĞ 40%', included:'Ğ©Ğ Ğ’ĞšĞ›Ğ®Ğ§Ğ•ĞĞ',
    f1:'ĞšĞµÑ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¾Ğ¼', f2:'Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸', f3:'10 Ğ³Ğ¾Ğ»Ğ¾ÑÑ–Ğ²',
    f4:'Ğ Ğ¾Ğ·ÑƒĞ¼Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼',
    sub_btn:'ĞĞ¢Ğ Ğ˜ĞœĞĞ¢Ğ˜ PRO', later:'ĞŸÑ–Ğ·Ğ½Ñ–ÑˆĞµ',
    log_conn:'ĞŸÑ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ´Ğ¾ {name}', member_since:'Ğ£Ñ‡Ğ°ÑĞ½Ğ¸Ğº Ğ·',
    upfmt: function(h,m){ return h+'Ğ³'+String(m).padStart(2,'0')+'Ñ…Ğ²'; }
  }
};

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function t(k){ return (T[lang] && T[lang][k]) ? T[lang][k] : (T.en[k] || k); }

function saveUser(){
  localStorage.setItem('zivo_user', JSON.stringify(USER));
  if(auth.currentUser){
    var data = Object.assign({}, USER);
    delete data.uid;
    db.collection('users').doc(auth.currentUser.uid).set(data, {merge:true}).catch(function(){});
  }
}

function isPro(){
  return USER.sub === 'forever' || USER.sub === 'monthly' || USER.sub === 'yearly';
}
function isTrialActive(){
  if(!USER.firstConnected) return false;
  return (Date.now() - USER.firstConnected) / 86400000 < 7;
}
function hasPro(){ return isPro() || isTrialActive(); }
function trialLeft(){
  if(!USER.firstConnected) return 0;
  return Math.max(0, Math.ceil(7 - (Date.now()-USER.firstConnected)/86400000));
}
function fmtDate(ts){
  if(!ts) return '';
  var d = new Date(ts);
  var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  return d.getDate()+' '+months[d.getMonth()]+' '+d.getFullYear();
}

// â”€â”€ AUTH SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showReg(){
  document.getElementById('scr-reg').style.display = 'block';
  document.getElementById('scr-login').style.display = 'none';
  document.getElementById('offline-banner').style.display = 'none';
  document.getElementById('pages-wrap').style.display = 'none';
  document.getElementById('pg-settings').style.display = 'none';
  document.getElementById('pg-profile').style.display = 'none';
}
function showLogin(){
  document.getElementById('scr-reg').style.display = 'none';
  document.getElementById('scr-login').style.display = 'block';
  document.getElementById('offline-banner').style.display = 'none';
}
function showOffline(){
  document.getElementById('scr-reg').style.display = 'none';
  document.getElementById('scr-login').style.display = 'none';
  document.getElementById('offline-banner').style.display = 'block';
}

function doRegister(){
  var name  = document.getElementById('reg-name').value.trim();
  var email = document.getElementById('reg-email').value.trim();
  var pass  = document.getElementById('reg-pass').value;
  var err   = document.getElementById('reg-err');
  err.style.display = 'none';
  if(!name||!email||!pass){ err.textContent='Fill all fields'; err.style.display='block'; return; }
  if(pass.length < 6){ err.textContent='Password min 6 chars'; err.style.display='block'; return; }
  var btn = document.getElementById('reg-btn');
  btn.textContent = '...'; btn.disabled = true;
  auth.createUserWithEmailAndPassword(email, pass)
    .then(function(cred){
      var now = Date.now();
      var data = { name:name, email:email, registeredAt:now, firstConnected:now,
                   sub:null, voice:'default', smartMode:false, botName:'ZIVO' };
      return db.collection('users').doc(cred.user.uid).set(data).then(function(){ return data; });
    })
    .then(function(data){
      Object.assign(USER, data);
      USER.uid = auth.currentUser.uid;
      saveUser();
      showOffline();
      applyLang(lang);
    })
    .catch(function(e){
      err.textContent = e.code === 'auth/email-already-in-use' ? 'Email already registered' : e.message;
      err.style.display = 'block';
    })
    .finally(function(){ btn.textContent = 'CREATE ACCOUNT'; btn.disabled = false; });
}

function doLogin(){
  var email = document.getElementById('login-email').value.trim();
  var pass  = document.getElementById('login-pass').value;
  var err   = document.getElementById('login-err');
  err.style.display = 'none';
  if(!email||!pass){ err.textContent='Fill all fields'; err.style.display='block'; return; }
  var btn = document.getElementById('login-btn');
  btn.textContent = '...'; btn.disabled = true;
  auth.signInWithEmailAndPassword(email, pass)
    .then(function(cred){
      return db.collection('users').doc(cred.user.uid).get();
    })
    .then(function(snap){
      if(snap.exists){
        Object.assign(USER, snap.data());
        USER.uid = auth.currentUser.uid;
        saveUser();
      }
      showOffline();
      applyLang(lang);
    })
    .catch(function(e){
      var msg = e.message;
      if(e.code==='auth/user-not-found'||e.code==='auth/invalid-credential') msg='Account not found';
      if(e.code==='auth/wrong-password') msg='Wrong password';
      err.textContent = msg; err.style.display = 'block';
    })
    .finally(function(){ btn.textContent = 'SIGN IN'; btn.disabled = false; });
}

function doLogout(){
  auth.signOut().then(function(){
    USER = {};
    localStorage.removeItem('zivo_user');
    setConnected(false);
    showReg();
  });
}

// â”€â”€ CONNECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setConnected(val){
  connected = val;
  var dot = document.getElementById('sdot');
  var stxt = document.getElementById('stxt');
  var face = document.getElementById('zface');
  if(val){
    dot.style.cssText = 'width:9px;height:9px;border-radius:50%;background:var(--ok);box-shadow:0 0 8px var(--ok);animation:pulse 2s infinite';
    stxt.style.color = 'var(--ok)'; stxt.textContent = t('online');
    document.getElementById('offline-banner').style.display = 'none';
    document.getElementById('pages-wrap').style.display = 'block';
    document.getElementById('pg-home').style.display = 'block';
    document.querySelectorAll('.ni').forEach(function(n){ n.classList.remove('on'); });
    document.querySelector('.ni').classList.add('on');
    face.style.borderColor = 'var(--blue)';
    face.style.boxShadow = '0 0 28px var(--glow),inset 0 0 28px rgba(0,180,255,0.05)';
    if(!USER.firstConnected){ USER.firstConnected = Date.now(); saveUser(); }
    updateTrialBanner();
  } else {
    dot.style.cssText = 'width:9px;height:9px;border-radius:50%;background:var(--gray);box-shadow:none;animation:none';
    stxt.style.color = 'var(--gray)'; stxt.textContent = t('offline');
    document.getElementById('offline-banner').style.display = 'block';
    document.getElementById('pages-wrap').style.display = 'none';
    face.style.borderColor = 'var(--gray)'; face.style.boxShadow = 'none';
  }
}

function tryConnect(){
  var input = document.getElementById('serial-inp').value.trim().toUpperCase();
  var err = document.getElementById('serial-err');
  var btn = document.getElementById('conn-btn');
  if(!input){ err.style.display='block'; return; }
  btn.textContent = '...'; btn.style.opacity = '0.6'; err.style.display = 'none';
  setTimeout(function(){
    if(ROBOTS[input]){
      currentRobot = ROBOTS[input]; currentSerial = input;
      localStorage.setItem('zivo_last_serial', input);
      setConnected(true);
      addLog('ok', t('log_conn').replace('{name}', currentRobot.name));
    } else {
      btn.textContent = t('conn_btn'); btn.style.opacity = '1';
      err.style.display = 'block';
      var inp = document.getElementById('serial-inp');
      inp.style.borderColor = 'var(--danger)';
      setTimeout(function(){ inp.style.borderColor='rgba(0,180,255,0.3)'; }, 2000);
    }
  }, 1200);
}

// â”€â”€ TRIAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateTrialBanner(){
  var b = document.getElementById('trial-banner');
  if(isTrialActive() && !isPro()){
    b.style.display = 'flex';
    document.getElementById('trial-d').textContent = trialLeft();
    document.getElementById('trial-title').textContent = t('trial_title');
    document.getElementById('trial-desc').textContent = t('trial_d');
  } else {
    b.style.display = 'none';
  }
}

// â”€â”€ PROFILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function saveProfile(){
  USER.name = document.getElementById('inp-uname').value;
  saveUser();
  document.getElementById('prof-name').textContent = USER.name || 'User';
}
function saveBotName(){
  USER.botName = document.getElementById('inp-botname').value || 'ZIVO';
  saveUser();
  document.getElementById('botname').textContent = USER.botName || 'ZIVO';
}
function toggleSmart(){
  if(!hasPro()){ openSub(); return; }
  USER.smartMode = !USER.smartMode;
  document.getElementById('smart-tog').classList.toggle('on', USER.smartMode);
  saveUser();
}

function updateProfileUI(){
  var name = USER.name || 'User';
  document.getElementById('prof-name').textContent = name;
  document.getElementById('inp-uname').value = USER.name || '';
  document.getElementById('inp-botname').value = USER.botName || '';
  document.getElementById('botname').textContent = USER.botName || 'ZIVO';
  var since = document.getElementById('prof-since');
  since.textContent = t('member_since') + ' ' + fmtDate(USER.registeredAt || USER.firstConnected);
  var badge = document.getElementById('prof-badge');
  if(isPro()){ badge.className='badge pro'; badge.textContent='PRO'; }
  else if(isTrialActive()){ badge.className='badge trial'; badge.textContent='TRIAL '+trialLeft()+'d'; }
  else { badge.className='badge free'; badge.textContent='FREE'; }
  document.getElementById('smart-tog').classList.toggle('on', !!USER.smartMode);
  document.getElementById('smart-row').style.opacity = hasPro() ? '1' : '0.5';
  var si = document.getElementById('sub-info');
  if(isPro()) si.innerHTML = '<div style="font-size:13px;font-weight:700;color:var(--gold)">â­ PRO Active</div><div style="font-size:11px;color:var(--gray);margin-top:4px">'+(USER.sub==='forever'?'Lifetime':'Renews automatically')+'</div>';
  else if(isTrialActive()) si.innerHTML = '<div style="font-size:13px;font-weight:700;color:var(--ok)">ğŸ Free Trial</div><div style="font-size:11px;color:var(--gray);margin-top:4px">'+trialLeft()+' days remaining</div>';
  else si.innerHTML = '<div style="font-size:13px;font-weight:700">Free Plan</div><div style="font-size:11px;color:var(--gray);margin-top:4px">Upgrade to unlock all features</div>';
  renderVoices();
  var pro = hasPro();
}

function renderVoices(){
  var list = document.getElementById('voice-list');
  list.innerHTML = '';
  var pro = hasPro();
  VOICES.forEach(function(v){
    var isActive = (USER.voice || 'default') === v.id;
    var isLocked = !v.free && !pro;
    var div = document.createElement('div');
    div.className = 'voice-card' + (isActive?' on':'') + (isLocked?' locked':'');
    div.innerHTML = '<div class="v-ava">'+v.e+'</div><div><div class="v-name">'+v.name+'</div><div class="v-desc">'+t(v.dk)+'</div></div>'
      + (isLocked ? '<div class="v-lock">ğŸ”’</div>' : '<div class="v-play">â–¶</div>');
    div.onclick = isLocked ? function(){ openSub(); } : function(){ selectVoice(v.id); };
    list.appendChild(div);
  });
  document.getElementById('voice-lock-msg').style.display = pro ? 'none' : 'block';
  document.getElementById('voice-lock-msg').textContent = t('voice_lock');
}

function selectVoice(id){
  USER.voice = id; saveUser(); renderVoices();
}

// â”€â”€ SUBSCRIPTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openSub(){
  document.getElementById('sub-modal').classList.add('open');
  pickPlan(selectedPlan);
  document.getElementById('modal-trial').style.display = isTrialActive() ? 'block' : 'none';
  document.getElementById('modal-trial').textContent = t('trial_modal');
}
function closeSub(){ document.getElementById('sub-modal').classList.remove('open'); }
function pickPlan(p){
  selectedPlan = p;
  ['monthly','yearly','forever'].forEach(function(x){
    document.getElementById('pl-'+x).classList.toggle('on', x===p);
  });
  document.getElementById('sub-do-btn').className = p==='forever' ? 'btn gold' : 'btn';
}
function doSubscribe(){
  USER.sub = selectedPlan; USER.subStart = Date.now(); saveUser();
  closeSub(); updateProfileUI();
  addLog('ok', 'Subscribed: ' + selectedPlan);
}


// â”€â”€ LOG & POLL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addLog(type, text){
  var list = document.getElementById('log-list');
  var now = new Date();
  var time = String(now.getHours()).padStart(2,'0') + ':' + String(now.getMinutes()).padStart(2,'0');
  var el = document.createElement('div'); el.className = 'log-e';
  el.innerHTML = '<span class="log-t">'+time+'</span><span class="log-m '+type+'">'+text+'</span>';
  list.insertBefore(el, list.firstChild);
  while(list.children.length > 20) list.removeChild(list.lastChild);
}

function pollRobot(){
  if(!connected || !currentSerial) return;
  fetch('http://zivo.local:8080/status', { headers:{'X-Serial':currentSerial}, signal:AbortSignal.timeout(2000) })
    .then(function(r){ return r.json(); })
    .then(function(d){
      var batt = d.battery || 0;
      document.getElementById('batt-pct').textContent = batt + '%';
      document.getElementById('batt-fill').style.width = batt + '%';
      document.getElementById('batt-pct').style.color = batt<20 ? 'var(--danger)' : batt<50 ? 'var(--warn)' : 'var(--ok)';
      document.getElementById('temp-v').textContent = (d.temp || '--') + 'Â°';
      if(d.uptime){
        var h = Math.floor(d.uptime/3600), m = Math.floor((d.uptime%3600)/60);
        document.getElementById('upt-v').textContent = T[lang].upfmt(h, m);
      }
    }).catch(function(){});
}

function sendCmd(cmd){
  if(!connected || !currentSerial) return;
  fetch('http://zivo.local:8080/command', {
    method:'POST', headers:{'Content-Type':'application/json','X-Serial':currentSerial},
    body:JSON.stringify({cmd:cmd}), signal:AbortSignal.timeout(2000)
  }).catch(function(){});
}

// â”€â”€ LANG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function applyLang(l){
  lang = l;
  document.body.style.direction = l==='he' ? 'rtl' : 'ltr';
  document.getElementById('moodtxt').textContent = t('moods')[moodIdx] || '';
  // Status
  document.getElementById('stxt').textContent = connected ? t('online') : t('offline');
  // Offline banner
  document.getElementById('ob-title').textContent = t('not_conn');
  document.getElementById('ob-desc').textContent = t('not_conn_d');
  document.getElementById('ob-lbl').textContent = t('serial_lbl');
  document.getElementById('serial-err').textContent = t('serial_wrong');
  document.getElementById('conn-btn').textContent = t('conn_btn');
  document.getElementById('ob-hint').textContent = t('serial_hint');
  // Nav
  document.getElementById('nav-ctrl').textContent = t('nav_ctrl');
  document.getElementById('nav-zone').textContent = t('nav_zone');
  document.getElementById('nav-prof').textContent = t('nav_prof');
  document.getElementById('nav-set').textContent = t('nav_set');
  // Home
  document.getElementById('lbl-temp').textContent = t('temp');
  document.getElementById('lbl-upt').textContent = t('upt');
  document.getElementById('lbl-batt').textContent = t('batt');
  document.getElementById('lbl-log').textContent = t('log');
  // Control
  document.getElementById('lbl-move').textContent = t('move');
  document.getElementById('lbl-actions').textContent = t('actions');
  document.getElementById('lbl-wake').textContent = t('wake');
  document.getElementById('lbl-sleep').textContent = t('sleep');
  document.getElementById('lbl-charge').textContent = t('charge');
  document.getElementById('lbl-dance').textContent = t('dance');
  // Zone
  document.getElementById('lbl-zone').textContent = t('zone');
  document.getElementById('lbl-zw').textContent = t('zw');
  document.getElementById('lbl-zd').textContent = t('zd');
  document.getElementById('lbl-ea').textContent = t('ea');
  document.getElementById('lbl-on').textContent = t('on');
  document.getElementById('lbl-falls').textContent = t('falls');
  // Settings
  document.getElementById('lbl-lang').textContent = t('lang');
  document.getElementById('lbl-feat').textContent = t('feat');
  document.getElementById('lbl-voice-act').textContent = t('voiceact');
  document.getElementById('lbl-voice-act-d').textContent = t('voiceact_d');
  document.getElementById('lbl-edge').textContent = t('edge');
  document.getElementById('lbl-edge-d').textContent = t('edge_d');
  document.getElementById('lbl-auto').textContent = t('auto');
  document.getElementById('lbl-auto-d').textContent = t('auto_d');
  document.getElementById('lbl-expl').textContent = t('expl');
  document.getElementById('lbl-expl-d').textContent = t('expl_d');
  document.getElementById('lbl-notif').textContent = t('notif');
  document.getElementById('lbl-notif-d').textContent = t('notif_d');
  // Profile
  document.getElementById('lbl-info').textContent = t('info');
  document.getElementById('lbl-uname').textContent = t('uname');
  document.getElementById('lbl-botname').textContent = t('botname');
  document.getElementById('lbl-smart').textContent = t('smart');
  document.getElementById('lbl-smart-t').textContent = t('smart_t');
  document.getElementById('lbl-smart-d').textContent = t('smart_d');
  document.getElementById('lbl-smart-l').textContent = t('smart_l');
  document.getElementById('lbl-smart-s').textContent = t('smart_s');
  document.getElementById('lbl-voices').textContent = t('voices');
  document.getElementById('lbl-sub').textContent = t('sub');
  document.getElementById('manage-sub-btn').textContent = t('manage_sub');
  document.getElementById('logout-btn').textContent = 'LOGOUT';
  renderVoices();
}

function setLang(l, btn){
  document.querySelectorAll('.lang-btn').forEach(function(b){ b.classList.remove('on'); });
  btn.classList.add('on');
  applyLang(l);
}

// â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goPage(name, el){
  document.querySelectorAll('.page').forEach(function(p){ p.style.display='none'; });
  document.querySelectorAll('.ni').forEach(function(n){ n.classList.remove('on'); });
  el.classList.add('on');
  if(name === 'settings'){
    document.getElementById('pg-settings').style.display = 'block';
  } else if(name === 'profile'){
    document.getElementById('pg-profile').style.display = 'block';
    updateProfileUI();
  } else if(connected){
    document.getElementById('pages-wrap').style.display = 'block';
    document.getElementById('pg-'+name).style.display = 'block';
  }
}

// Close modal on bg click
document.getElementById('sub-modal').addEventListener('click', function(e){
  if(e.target === this) closeSub();
});

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
setInterval(pollRobot, 3000);
setInterval(function(){
  moodIdx = (moodIdx+1) % 4;
  document.getElementById('moodtxt').textContent = t('moods')[moodIdx];
}, 4000);

applyLang('en');

auth.onAuthStateChanged(function(user){
  if(user){
    db.collection('users').doc(user.uid).get()
      .then(function(snap){
        if(snap.exists){ Object.assign(USER, snap.data()); }
        USER.uid = user.uid;
        saveUser();
        showOffline();
        applyLang(lang);
        updateProfileUI();
        var last = localStorage.getItem('zivo_last_serial');
        if(last && ROBOTS[last]){
          currentRobot = ROBOTS[last]; currentSerial = last;
          setTimeout(function(){
            setConnected(true);
            addLog('ok', t('log_conn').replace('{name}', currentRobot.name));
          }, 500);
        } else if(last){
          document.getElementById('serial-inp').value = last;
        }
      })
      .catch(function(){ showOffline(); });
  } else {
    showReg();
  }
});

if('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js');
</script>
</body>
</html>
