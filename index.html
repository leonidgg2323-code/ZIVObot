<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ZIVO</title>
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#00b4ff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="ZIVO">
<meta name="mobile-web-app-capable" content="yes">
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#050a14;--blue:#00b4ff;--blue2:#0066cc;--blue-glow:rgba(0,180,255,0.3);--white:#e8f4ff;--gray:#3a5a7a;--danger:#ff4466;--success:#00ffaa;--warn:#ffaa00;--card:rgba(10,22,40,0.8);--gold:#ffd700}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--white);font-family:'Exo 2',sans-serif;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,180,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,180,255,0.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
.app{position:relative;z-index:1;max-width:420px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}
.header{padding:16px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,180,255,0.1)}
.logo{font-size:26px;font-weight:900;letter-spacing:4px;color:var(--white);text-shadow:0 0 20px var(--blue)}
.logo span{color:var(--blue)}
.header-right{display:flex;align-items:center;gap:8px;font-size:11px;font-family:'Share Tech Mono',monospace}
.status-dot{width:9px;height:9px;border-radius:50%}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)}}
.page{display:none;flex:1;padding:0 16px 100px}
.face-wrap{display:flex;flex-direction:column;align-items:center;padding:20px 0 10px}
.zivo-face{width:140px;height:140px;background:linear-gradient(135deg,#0d1f3a,#1a3a5c);border-radius:28px;border:2px solid var(--gray);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;transition:all .5s}
.zivo-face::before{content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,180,255,0.1),transparent);animation:scan 3s infinite}
@keyframes scan{0%{left:-100%}100%{left:200%}}
.eyes{display:flex;gap:24px;z-index:1}
.eye{width:28px;height:28px;background:var(--blue);border-radius:7px;box-shadow:0 0 16px var(--blue);animation:blink 4s infinite;position:relative;overflow:hidden}
.eye::after{content:'';position:absolute;top:4px;left:4px;width:8px;height:8px;background:rgba(255,255,255,.6);border-radius:2px}
@keyframes blink{0%,90%,100%{transform:scaleY(1)}95%{transform:scaleY(.1)}}
.zivo-name{margin-top:10px;font-size:20px;font-weight:900;letter-spacing:6px;color:var(--blue)}
.zivo-mood{font-size:10px;font-family:'Share Tech Mono',monospace;color:var(--gray);letter-spacing:2px;margin-top:2px}
.card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:16px;padding:16px;margin-bottom:10px;backdrop-filter:blur(10px)}
.section-title{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--gray);margin:18px 0 10px}
.stats-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin:12px 0}
.stat-card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:14px;padding:12px 8px;text-align:center}
.stat-value{font-size:18px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace}
.stat-label{font-size:9px;color:var(--gray);letter-spacing:1px;text-transform:uppercase;margin-top:2px}
.batt-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.batt-pct{font-family:'Share Tech Mono',monospace;font-size:16px;color:var(--success)}
.batt-bar{height:7px;background:rgba(0,180,255,0.1);border-radius:4px;overflow:hidden}
.batt-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--blue2),var(--blue));border-radius:4px;transition:width .5s}
.log-entry{display:flex;gap:8px;padding:9px 12px;background:var(--card);border:1px solid rgba(0,180,255,0.1);border-radius:11px;margin-bottom:7px;align-items:flex-start}
.log-time{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--gray);white-space:nowrap;padding-top:1px}
.log-text{font-size:12px;line-height:1.4}
.log-text.info{color:var(--blue)}.log-text.warn{color:var(--warn)}.log-text.ok{color:var(--success)}
.dpad{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;width:190px;margin:0 auto 20px}
.dpad-btn{height:52px;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;transition:all .15s;user-select:none}
.dpad-btn:active{background:var(--blue);box-shadow:0 0 16px var(--blue-glow);transform:scale(.95)}
.dpad-center{background:rgba(0,180,255,0.1);border-color:var(--blue);font-size:11px;font-weight:700;color:var(--blue)}
.dpad-empty{background:transparent;border:none}
.action-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px}
.action-btn{padding:14px;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:14px;text-align:center;cursor:pointer;transition:all .2s}
.action-btn:active{transform:scale(.97);border-color:var(--blue)}
.action-icon{font-size:22px;margin-bottom:5px}
.action-label{font-size:10px;letter-spacing:1px;text-transform:uppercase;color:var(--gray)}
.lang-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.lang-btn{padding:12px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;text-align:center;cursor:pointer;transition:all .2s}
.lang-btn.active{border-color:var(--blue);background:rgba(0,180,255,0.1)}
.lang-flag{font-size:24px}
.lang-name{font-size:10px;color:var(--gray);margin-top:3px}
.toggle-row{display:flex;align-items:center;justify-content:space-between;padding:14px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;margin-bottom:8px}
.toggle-label{font-size:13px;font-weight:600}
.toggle-desc{font-size:10px;color:var(--gray);margin-top:2px}
.toggle{width:46px;height:24px;background:var(--gray);border-radius:12px;position:relative;cursor:pointer;transition:background .2s;flex-shrink:0}
.toggle.on{background:var(--blue);box-shadow:0 0 8px var(--blue-glow)}
.toggle::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;background:white;border-radius:50%;transition:transform .2s}
.toggle.on::after{transform:translateX(22px)}
.boundary-map{width:100%;aspect-ratio:1;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:18px;position:relative;overflow:hidden;margin-bottom:14px}
.boundary-map::before{content:'';position:absolute;inset:0;background-image:linear-gradient(rgba(0,180,255,0.05) 1px,transparent 1px),linear-gradient(90deg,rgba(0,180,255,0.05) 1px,transparent 1px);background-size:28px 28px}
.boundary-zone{position:absolute;inset:28px;border:2px dashed var(--blue);border-radius:10px;box-shadow:0 0 16px var(--blue-glow)}
.zivo-dot{position:absolute;width:18px;height:18px;background:var(--blue);border-radius:5px;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 12px var(--blue);animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-5px)}}
.corner-handle{position:absolute;width:12px;height:12px;background:var(--blue);border-radius:3px}
.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.info-card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;padding:12px}
.info-card-label{font-size:9px;color:var(--gray);letter-spacing:1px;text-transform:uppercase}
.info-card-value{font-size:16px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace;margin-top:3px}
.bottom-nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:420px;background:rgba(5,10,20,0.97);border-top:1px solid rgba(0,180,255,0.15);display:flex;padding:8px 0 18px;backdrop-filter:blur(20px);z-index:100}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer;padding:5px 0;transition:all .2s}
.nav-icon{font-size:20px;filter:grayscale(1) opacity(.4);transition:all .2s}
.nav-label{font-size:8px;letter-spacing:1px;text-transform:uppercase;color:var(--gray)}
.nav-item.active .nav-icon{filter:none}
.nav-item.active .nav-label{color:var(--blue)}
#offline-banner{text-align:center;padding:14px 20px;color:var(--gray)}
.profile-header{display:flex;align-items:center;gap:14px;padding:16px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:16px;margin-bottom:10px}
.avatar{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--blue2),var(--blue));display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
.profile-name{font-size:18px;font-weight:700}
.profile-sub{font-size:11px;color:var(--gray);margin-top:2px}
.sub-badge{display:inline-block;padding:2px 8px;border-radius:20px;font-size:10px;font-weight:700;letter-spacing:1px;margin-top:4px}
.sub-badge.free{background:rgba(58,90,122,0.4);color:var(--gray);border:1px solid var(--gray)}
.sub-badge.pro{background:rgba(255,215,0,0.15);color:var(--gold);border:1px solid var(--gold)}
.sub-badge.trial{background:rgba(0,255,170,0.15);color:var(--success);border:1px solid var(--success)}
.input-row{margin-bottom:10px}
.input-label{font-size:10px;letter-spacing:2px;color:var(--gray);margin-bottom:5px}
.zivo-input{width:100%;background:rgba(0,180,255,0.05);border:1px solid rgba(0,180,255,0.25);border-radius:10px;padding:11px 13px;color:var(--white);font-family:'Exo 2',sans-serif;font-size:14px;outline:none}
.zivo-input:focus{border-color:var(--blue)}
.plan-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
.plan-card{background:var(--card);border:2px solid rgba(0,180,255,0.15);border-radius:16px;padding:16px;cursor:pointer;transition:all .2s;text-align:center;position:relative}
.plan-card.active{border-color:var(--blue);background:rgba(0,180,255,0.08)}
.plan-card.gold{border-color:var(--gold);background:rgba(255,215,0,0.05)}
.plan-card.gold.active{background:rgba(255,215,0,0.1)}
.plan-name{font-size:13px;font-weight:700;letter-spacing:1px}
.plan-price{font-size:22px;font-weight:900;color:var(--blue);font-family:'Share Tech Mono',monospace;margin:6px 0 2px}
.plan-card.gold .plan-price{color:var(--gold)}
.plan-period{font-size:10px;color:var(--gray)}
.plan-save{position:absolute;top:-8px;left:50%;transform:translateX(-50%);background:var(--success);color:#000;font-size:9px;font-weight:700;padding:2px 8px;border-radius:10px;letter-spacing:1px;white-space:nowrap}
.plan-forever{grid-column:1/-1}
.feature-list{margin:6px 0 0}
.feature-item{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:12px;border-bottom:1px solid rgba(0,180,255,0.07)}
.feature-item:last-child{border:none}
.feature-item .fi-icon{font-size:14px;width:20px;text-align:center}
.feature-locked{opacity:.4}
.btn-primary{width:100%;padding:14px;background:var(--blue);border:none;border-radius:12px;cursor:pointer;font-size:13px;font-weight:700;letter-spacing:2px;color:#000;font-family:'Exo 2',sans-serif;transition:all .2s;margin-top:4px}
.btn-primary:active{opacity:.8;transform:scale(.98)}
.btn-primary.gold{background:var(--gold);color:#000}
.btn-outline{width:100%;padding:13px;background:transparent;border:1px solid var(--blue);border-radius:12px;cursor:pointer;font-size:12px;font-weight:700;letter-spacing:2px;color:var(--blue);font-family:'Exo 2',sans-serif;transition:all .2s;margin-top:6px}
.trial-banner{background:linear-gradient(135deg,rgba(0,255,170,0.1),rgba(0,180,255,0.1));border:1px solid var(--success);border-radius:14px;padding:14px 16px;margin-bottom:14px;display:flex;align-items:center;gap:12px}
.trial-days{font-size:28px;font-weight:900;color:var(--success);font-family:'Share Tech Mono',monospace;min-width:40px}
.voice-grid{display:grid;gap:10px;margin-bottom:14px}
.voice-card{display:flex;align-items:center;gap:12px;padding:14px;background:var(--card);border:2px solid rgba(0,180,255,0.15);border-radius:14px;cursor:pointer;transition:all .2s}
.voice-card.active{border-color:var(--blue);background:rgba(0,180,255,0.08)}
.voice-card.locked{opacity:.5;cursor:default}
.voice-card.locked .lock-icon{display:flex}
.lock-icon{display:none;margin-left:auto;font-size:14px;color:var(--gold)}
.voice-avatar{width:42px;height:42px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.voice-name{font-size:14px;font-weight:700}
.voice-desc{font-size:11px;color:var(--gray);margin-top:1px}
.voice-play{margin-left:auto;width:32px;height:32px;border-radius:8px;background:rgba(0,180,255,0.1);border:1px solid rgba(0,180,255,0.3);display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;flex-shrink:0}
.smart-hero{background:linear-gradient(135deg,rgba(0,180,255,0.1),rgba(0,102,204,0.15));border:1px solid var(--blue);border-radius:16px;padding:18px;margin-bottom:14px;text-align:center}
.smart-hero-icon{font-size:36px;margin-bottom:8px}
.smart-hero-title{font-size:16px;font-weight:700;margin-bottom:4px}
.smart-hero-desc{font-size:11px;color:var(--gray);line-height:1.5}
.calc-display{background:rgba(0,0,0,0.4);border:1px solid rgba(0,180,255,0.2);border-radius:14px;padding:16px;margin-bottom:12px;min-height:80px;display:flex;flex-direction:column;justify-content:flex-end}
.calc-expr{font-size:12px;color:var(--gray);font-family:'Share Tech Mono',monospace;min-height:18px;word-break:break-all}
.calc-result{font-size:28px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace;text-align:right;word-break:break-all}
.calc-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.calc-btn{height:54px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:600;cursor:pointer;transition:all .15s;user-select:none;color:var(--white)}
.calc-btn:active{transform:scale(.93)}
.calc-btn.op{color:var(--blue);border-color:rgba(0,180,255,0.3)}
.calc-btn.eq{background:var(--blue);color:#000;border-color:var(--blue)}
.calc-btn.clear{color:var(--danger);border-color:rgba(255,68,102,0.3)}
.calc-btn.wide{grid-column:span 2}
.calc-ai-btn{width:100%;margin-top:10px;padding:13px;background:linear-gradient(135deg,rgba(0,180,255,0.15),rgba(0,102,204,0.15));border:1px solid var(--blue);border-radius:12px;cursor:pointer;font-size:12px;font-weight:700;letter-spacing:1px;color:var(--blue);font-family:'Exo 2',sans-serif;transition:all .2s}
.calc-solution{background:rgba(0,180,255,0.05);border:1px solid rgba(0,180,255,0.2);border-radius:12px;padding:14px;margin-top:10px;font-size:13px;line-height:1.6;display:none}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:200;display:none;align-items:flex-end;justify-content:center;backdrop-filter:blur(4px)}
.modal-overlay.open{display:flex}
.modal{background:#0a1628;border:1px solid rgba(0,180,255,0.2);border-radius:20px 20px 0 0;padding:24px 20px 36px;width:100%;max-width:420px;max-height:85vh;overflow-y:auto}
.modal-title{font-size:18px;font-weight:700;margin-bottom:16px;text-align:center}
.modal-close{position:absolute;top:16px;right:20px;font-size:22px;cursor:pointer;color:var(--gray)}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="logo">ZI<span>V</span>O</div>
    <div class="header-right">
      <div class="status-dot" id="status-dot" style="background:var(--gray);box-shadow:none;animation:none;"></div>
      <span id="status-text" style="color:var(--gray)"></span>
    </div>
  </div>

  <div class="face-wrap">
    <div class="zivo-face" id="zivo-face">
      <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
    </div>
    <div class="zivo-name" id="bot-display-name">ZIVO</div>
    <div class="zivo-mood" id="mood-text"></div>
  </div>

  <div id="offline-banner">
    <div style="font-size:36px;margin-bottom:8px;">üì°</div>
    <div style="font-size:13px;font-weight:600;letter-spacing:2px;margin-bottom:4px;" data-t="not_connected"></div>
    <div style="font-size:11px;opacity:.6;margin-bottom:18px;" data-t="not_connected_desc"></div>
    <div class="card" style="text-align:left;">
      <div style="font-size:10px;letter-spacing:2px;color:var(--gray);margin-bottom:6px;" data-t="serial_label"></div>
      <input id="serial-input" type="text" maxlength="12" class="zivo-input" style="letter-spacing:3px;font-family:'Share Tech Mono',monospace;font-size:15px;text-transform:uppercase;" placeholder="ZIVO-XXXXXX" oninput="this.value=this.value.toUpperCase()"/>
      <div id="serial-error" style="font-size:11px;color:var(--danger);margin-top:6px;display:none;" data-t="serial_wrong"></div>
      <button onclick="tryConnect()" id="connect-btn" class="btn-primary" style="margin-top:12px;" data-t="connect_btn"></button>
    </div>
    <div style="margin-top:12px;font-size:11px;opacity:.4;" data-t="serial_hint"></div>
  </div>

  <div id="pages-wrapper" style="display:none">
    <div id="page-home" class="page" style="display:block">
      <div id="trial-banner" class="trial-banner" style="display:none">
        <div class="trial-days" id="trial-days-left">7</div>
        <div>
          <div style="font-size:13px;font-weight:700;" data-t="trial_active"></div>
          <div style="font-size:11px;color:var(--gray);margin-top:2px;" data-t="trial_desc"></div>
        </div>
      </div>
      <div class="stats-row">
        <div class="stat-card"><div class="stat-value" id="temp-val">--</div><div class="stat-label" data-t="temp"></div></div>
        <div class="stat-card"><div class="stat-value" id="uptime-val">--</div><div class="stat-label" data-t="uptime"></div></div>
        <div class="stat-card"><div class="stat-value">‚úì</div><div class="stat-label">Wi-Fi</div></div>
      </div>
      <div class="card">
        <div class="batt-header">
          <span style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--gray);" data-t="battery"></span>
          <span class="batt-pct" id="batt-text">--%</span>
        </div>
        <div class="batt-bar"><div class="batt-fill" id="batt-fill"></div></div>
      </div>
      <div class="section-title" data-t="log"></div>
      <div id="log-list"></div>
    </div>

    <div id="page-control" class="page">
      <div class="section-title" data-t="movement"></div>
      <div class="dpad">
        <div class="dpad-btn dpad-empty"></div>
        <div class="dpad-btn" onclick="sendCmd('forward')">‚ñ≤</div>
        <div class="dpad-btn dpad-empty"></div>
        <div class="dpad-btn" onclick="sendCmd('left')">‚óÑ</div>
        <div class="dpad-btn dpad-center">ZIVO</div>
        <div class="dpad-btn" onclick="sendCmd('right')">‚ñ∫</div>
        <div class="dpad-btn dpad-empty"></div>
        <div class="dpad-btn" onclick="sendCmd('backward')">‚ñº</div>
        <div class="dpad-btn dpad-empty"></div>
      </div>
      <div class="section-title" data-t="actions"></div>
      <div class="action-grid">
        <div class="action-btn" onclick="sendCmd('wake')"><div class="action-icon">üé§</div><div class="action-label" data-t="wakeup"></div></div>
        <div class="action-btn" onclick="sendCmd('sleep')"><div class="action-icon">üò¥</div><div class="action-label" data-t="sleep"></div></div>
        <div class="action-btn" onclick="sendCmd('charge')"><div class="action-icon">üîã</div><div class="action-label" data-t="charge"></div></div>
        <div class="action-btn" onclick="sendCmd('dance')"><div class="action-icon">üé≤</div><div class="action-label" data-t="random"></div></div>
      </div>
    </div>

    <div id="page-boundary" class="page">
      <div class="section-title" data-t="zonemap"></div>
      <div class="boundary-map">
        <div class="boundary-zone">
          <div class="corner-handle" style="top:-6px;left:-6px"></div>
          <div class="corner-handle" style="top:-6px;right:-6px"></div>
          <div class="corner-handle" style="bottom:-6px;left:-6px"></div>
          <div class="corner-handle" style="bottom:-6px;right:-6px"></div>
        </div>
        <div class="zivo-dot"></div>
      </div>
      <div class="info-grid">
        <div class="info-card"><div class="info-card-label" data-t="zonewidth"></div><div class="info-card-value">80cm</div></div>
        <div class="info-card"><div class="info-card-label" data-t="zonedepth"></div><div class="info-card-value">60cm</div></div>
        <div class="info-card"><div class="info-card-label" data-t="edgealerts"></div><div class="info-card-value" style="color:var(--success)" data-t="on"></div></div>
        <div class="info-card"><div class="info-card-label" data-t="falls"></div><div class="info-card-value">0</div></div>
      </div>
    </div>
  </div>

  <div id="page-settings" class="page" style="display:none">
    <div class="section-title" data-t="language"></div>
    <div class="lang-grid">
      <div class="lang-btn" onclick="selectLang(this,'ru')"><div class="lang-flag">üá∑üá∫</div><div class="lang-name">–†—É—Å—Å–∫–∏–π</div></div>
      <div class="lang-btn active" onclick="selectLang(this,'en')"><div class="lang-flag">üá∫üá∏</div><div class="lang-name">English</div></div>
      <div class="lang-btn" onclick="selectLang(this,'he')"><div class="lang-flag">üáÆüá±</div><div class="lang-name">◊¢◊ë◊®◊ô◊™</div></div>
      <div class="lang-btn" onclick="selectLang(this,'zh')"><div class="lang-flag">üá®üá≥</div><div class="lang-name">‰∏≠Êñá</div></div>
      <div class="lang-btn" onclick="selectLang(this,'uk')"><div class="lang-flag">üá∫üá¶</div><div class="lang-name">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</div></div>
    </div>
    <div class="section-title" data-t="features"></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="voiceact"></div><div class="toggle-desc" data-t="voiceact_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="edgeprot"></div><div class="toggle-desc" data-t="edgeprot_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="autocharge"></div><div class="toggle-desc" data-t="autocharge_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="explore"></div><div class="toggle-desc" data-t="explore_desc"></div></div><div class="toggle" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="notifs"></div><div class="toggle-desc" data-t="notifs_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
  </div>

  <div id="page-profile" class="page" style="display:none">
    <div class="profile-header">
      <div class="avatar" id="profile-avatar">ü§ñ</div>
      <div>
        <div class="profile-name" id="profile-name-display">User</div>
        <div class="profile-sub" data-t="member_since"></div>
        <div id="sub-badge-display" class="sub-badge free">FREE</div>
      </div>
    </div>
    <div class="section-title" data-t="your_info"></div>
    <div class="card">
      <div class="input-row">
        <div class="input-label" data-t="your_name"></div>
        <input id="user-name-input" class="zivo-input" type="text" placeholder="Your name" oninput="saveProfile()"/>
      </div>
      <div class="input-row" style="margin-bottom:0">
        <div class="input-label" data-t="bot_custom_name"></div>
        <input id="bot-name-input" class="zivo-input" type="text" placeholder="ZIVO" oninput="saveBotName()"/>
      </div>
    </div>
    <div class="section-title" data-t="smart_mode"></div>
    <div class="smart-hero">
      <div class="smart-hero-icon">üß†</div>
      <div class="smart-hero-title" data-t="smart_mode_title"></div>
      <div class="smart-hero-desc" data-t="smart_mode_desc"></div>
    </div>
    <div class="toggle-row" id="smart-mode-toggle-row">
      <div><div class="toggle-label" data-t="smart_mode_label"></div><div class="toggle-desc" data-t="smart_mode_sub"></div></div>
      <div class="toggle" id="smart-toggle" onclick="toggleSmartMode()"></div>
    </div>
    <div class="section-title" data-t="voice_section"></div>
    <div class="voice-grid" id="voice-list"></div>
    <div id="voice-locked-msg" style="display:none;text-align:center;padding:10px;font-size:11px;color:var(--gold);" data-t="voice_locked_msg"></div>
    <div class="section-title" data-t="subscription"></div>
    <div id="sub-current-info" class="card" style="margin-bottom:10px;"></div>
    <button class="btn-outline" onclick="openSubModal()" data-t="manage_sub"></button>
  </div>

  <div id="page-calc" class="page" style="display:none">
    <div class="section-title" data-t="calculator"></div>
    <div class="calc-display">
      <div class="calc-expr" id="calc-expr"></div>
      <div class="calc-result" id="calc-result">0</div>
    </div>
    <div class="calc-grid">
      <div class="calc-btn clear" onclick="calcClear()">C</div>
      <div class="calc-btn op" onclick="calcInput('(')">(</div>
      <div class="calc-btn op" onclick="calcInput(')')">)</div>
      <div class="calc-btn op" onclick="calcInput('/')">√∑</div>
      <div class="calc-btn" onclick="calcInput('7')">7</div>
      <div class="calc-btn" onclick="calcInput('8')">8</div>
      <div class="calc-btn" onclick="calcInput('9')">9</div>
      <div class="calc-btn op" onclick="calcInput('*')">√ó</div>
      <div class="calc-btn" onclick="calcInput('4')">4</div>
      <div class="calc-btn" onclick="calcInput('5')">5</div>
      <div class="calc-btn" onclick="calcInput('6')">6</div>
      <div class="calc-btn op" onclick="calcInput('-')">‚àí</div>
      <div class="calc-btn" onclick="calcInput('1')">1</div>
      <div class="calc-btn" onclick="calcInput('2')">2</div>
      <div class="calc-btn" onclick="calcInput('3')">3</div>
      <div class="calc-btn op" onclick="calcInput('+')">+</div>
      <div class="calc-btn" onclick="calcInput('0')">0</div>
      <div class="calc-btn" onclick="calcInput('.')">.</div>
      <div class="calc-btn op" onclick="calcInput('^')">x‚Åø</div>
      <div class="calc-btn eq" onclick="calcEquals()">=</div>
      <div class="calc-btn op wide" onclick="calcInput('sqrt(')">‚àö</div>
      <div class="calc-btn op" onclick="calcInput('Math.PI')">œÄ</div>
      <div class="calc-btn op" onclick="calcBackspace()">‚å´</div>
    </div>
    <button class="calc-ai-btn" id="ai-solve-btn" onclick="aiSolve()">üß† <span data-t="ai_solve"></span></button>
    <div id="ai-locked-calc" style="display:none;text-align:center;padding:12px;font-size:11px;color:var(--gold);cursor:pointer;" onclick="openSubModal()" data-t="calc_locked"></div>
    <div class="calc-solution" id="calc-solution"></div>
  </div>

  <div class="bottom-nav">
    <div class="nav-item active" onclick="switchPage('home',this)"><div class="nav-icon">ü§ñ</div><div class="nav-label">ZIVO</div></div>
    <div class="nav-item" onclick="switchPage('control',this)"><div class="nav-icon">üïπÔ∏è</div><div class="nav-label" data-t="nav_control"></div></div>
    <div class="nav-item" onclick="switchPage('boundary',this)"><div class="nav-icon">üìç</div><div class="nav-label" data-t="nav_zone"></div></div>
    <div class="nav-item" onclick="switchPage('calc',this)"><div class="nav-icon">üßÆ</div><div class="nav-label" data-t="nav_calc"></div></div>
    <div class="nav-item" onclick="switchPage('profile',this)"><div class="nav-icon">üë§</div><div class="nav-label" data-t="nav_profile"></div></div>
    <div class="nav-item" onclick="switchPage('settings',this)"><div class="nav-icon">‚öôÔ∏è</div><div class="nav-label" data-t="nav_settings"></div></div>
  </div>
</div>

<div class="modal-overlay" id="sub-modal">
  <div class="modal" style="position:relative">
    <div class="modal-close" onclick="closeSubModal()">‚úï</div>
    <div class="modal-title" data-t="choose_plan"></div>
    <div id="modal-trial-info" style="display:none;background:rgba(0,255,170,0.08);border:1px solid var(--success);border-radius:12px;padding:12px;margin-bottom:14px;font-size:12px;text-align:center;color:var(--success);" data-t="trial_modal_info"></div>
    <div class="plan-grid">
      <div class="plan-card" id="plan-monthly" onclick="selectPlan('monthly')">
        <div class="plan-name" data-t="plan_monthly"></div>
        <div class="plan-price" id="price-monthly">‚Äî</div>
        <div class="plan-period" data-t="per_month"></div>
      </div>
      <div class="plan-card" id="plan-yearly" onclick="selectPlan('yearly')">
        <div class="plan-save" data-t="save_40"></div>
        <div class="plan-name" data-t="plan_yearly"></div>
        <div class="plan-price" id="price-yearly">‚Äî</div>
        <div class="plan-period" data-t="per_month_billed"></div>
      </div>
      <div class="plan-card gold plan-forever" id="plan-forever" onclick="selectPlan('forever')">
        <div class="plan-name" data-t="plan_forever"></div>
        <div class="plan-price" style="color:var(--gold)" id="price-forever">‚Äî</div>
        <div class="plan-period" data-t="one_time"></div>
      </div>
    </div>
    <div class="section-title" data-t="whats_included"></div>
    <div class="feature-list">
      <div class="feature-item"><span class="fi-icon">‚úÖ</span><span data-t="feat_basic"></span></div>
      <div class="feature-item"><span class="fi-icon">‚úÖ</span><span data-t="feat_control"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_voices"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_smart"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_calc"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_custom_name"></span></div>
    </div>
    <button class="btn-primary" id="sub-btn" onclick="subscribePlan()" data-t="subscribe_btn"></button>
    <button class="btn-outline" onclick="closeSubModal()" style="margin-top:8px;" data-t="maybe_later"></button>
  </div>
</div>

<script>
const REGISTERED_ROBOTS = {
  'ZIVO-ADMINMW': { name: 'ZIVO #1', owner: 'Admin' },
};

const VOICES = [
  { id:'default', emoji:'ü§ñ', name:'ZIVO',  desc_key:'voice_default_desc', free:true  },
  { id:'sage',    emoji:'üßô', name:'Sage',  desc_key:'voice_sage_desc',    free:false },
  { id:'nova',    emoji:'‚ö°', name:'Nova',  desc_key:'voice_nova_desc',    free:false },
  { id:'echo',    emoji:'üåä', name:'Echo',  desc_key:'voice_echo_desc',    free:false },
  { id:'spark',   emoji:'üî•', name:'Spark', desc_key:'voice_spark_desc',   free:false },
  { id:'atlas',   emoji:'üåç', name:'Atlas', desc_key:'voice_atlas_desc',   free:false },
  { id:'luna',    emoji:'üåô', name:'Luna',  desc_key:'voice_luna_desc',    free:false },
  { id:'titan',   emoji:'‚öôÔ∏è', name:'Titan', desc_key:'voice_titan_desc',   free:false },
  { id:'pixel',   emoji:'üëæ', name:'Pixel', desc_key:'voice_pixel_desc',   free:false },
  { id:'zen',     emoji:'üçÉ', name:'Zen',   desc_key:'voice_zen_desc',     free:false },
];

const T = {
  ru:{online:'–í –°–ï–¢–ò',temp:'–¢–ï–ú–ü',uptime:'–í–†–ï–ú–Ø',battery:'–ë–ê–¢–ê–†–ï–Ø',log:'–ñ–£–†–ù–ê–õ',movement:'–î–í–ò–ñ–ï–ù–ò–ï',actions:'–î–ï–ô–°–¢–í–ò–Ø',wakeup:'–†–ê–ó–ë–£–î–ò–¢–¨',sleep:'–°–ü–ê–¢–¨',charge:'–ù–ê –ó–ê–†–Ø–î–ö–£',random:'–¢–ê–ù–ï–¶',zonemap:'–ö–ê–†–¢–ê –ó–û–ù–´',zonewidth:'–®–ò–†–ò–ù–ê',zonedepth:'–ì–õ–£–ë–ò–ù–ê',edgealerts:'–ó–ê–©–ò–¢–ê –ö–†–ê–Ø',on:'–í–ö–õ',falls:'–ü–ê–î–ï–ù–ò–ô',language:'–Ø–ó–´–ö',features:'–§–£–ù–ö–¶–ò–ò',voiceact:'–ì–æ–ª–æ—Å–æ–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è',voiceact_desc:'–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ—Ä–∞–∑–æ–π "–ü—Ä–∏–≤–µ—Ç ZIVO"',edgeprot:'–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞–¥–µ–Ω–∏—è',edgeprot_desc:'–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è —É –∫—Ä–∞—è —Å—Ç–æ–ª–∞',autocharge:'–ê–≤—Ç–æ –∑–∞—Ä—è–¥–∫–∞',autocharge_desc:'–ï—Ö–∞—Ç—å –Ω–∞ –±–∞–∑—É –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∑–∞—Ä—è–¥–µ',explore:'–°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏',explore_desc:'ZIVO –µ–∑–¥–∏—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ',notifs:'–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',notifs_desc:'–ó–∞—Ä—è–¥ –∏ –∑–∞—â–∏—Ç–∞ –∫—Ä–∞—è',nav_control:'–£–ü–†–ê–í–õ–ï–ù–ò–ï',nav_zone:'–ó–û–ù–ê',nav_settings:'–ù–ê–°–¢–†–û–ô–ö–ò',nav_calc:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',nav_profile:'–ü–†–û–§–ò–õ–¨',moods:['–ì–û–¢–û–í ‚Ä¢ –°–õ–£–®–ê–Æ','–ò–°–°–õ–ï–î–£–Æ','–°–ß–ê–°–¢–õ–ò–í','–ñ–î–£ –ö–û–ú–ê–ù–î–´'],log_connected:'–ü–æ–¥–∫–ª—é—á—ë–Ω –∫ {name}',upfmt:(h,m)=>h+'—á'+String(m).padStart(2,'0')+'–º',offline:'–ù–ï –ü–û–î–ö–õ–Æ–ß–Å–ù',not_connected:'ZIVO –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω',not_connected_desc:'–í–≤–µ–¥–∏ —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä',connect_btn:'–ü–û–î–ö–õ–Æ–ß–ò–¢–¨',serial_label:'–°–ï–†–ò–ô–ù–´–ô –ù–û–ú–ï–†',serial_wrong:'–ù–µ–≤–µ—Ä–Ω—ã–π —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä.',serial_hint:'–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä –Ω–∞ –Ω–∞–∫–ª–µ–π–∫–µ –Ω–∞ –¥–Ω–µ –∫–æ—Ä–ø—É—Å–∞',member_since:'–£—á–∞—Å—Ç–Ω–∏–∫ ZIVO',your_info:'–ò–ù–§–û–†–ú–ê–¶–ò–Ø',your_name:'–¢–í–û–Å –ò–ú–Ø',bot_custom_name:'–ò–ú–Ø –ë–û–¢–ê (—É–º–Ω—ã–π —Ä–µ–∂–∏–º)',smart_mode:'–£–ú–ù–´–ô –†–ï–ñ–ò–ú',smart_mode_title:'–£–º–Ω—ã–π —Ä–µ–∂–∏–º',smart_mode_desc:'–ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–≤–æ—ë –∏–º—è –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –≤—ã–±—Ä–∞–ª. –¢–æ–ª—å–∫–æ –ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è.',smart_mode_label:'–í–∫–ª—é—á–∏—Ç—å —É–º–Ω—ã–π —Ä–µ–∂–∏–º',smart_mode_sub:'–ë–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–≤–æ—ë –∏–º—è',voice_section:'–ì–û–õ–û–° –ë–û–¢–ê',voice_default_desc:'–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≥–æ–ª–æ—Å ZIVO',voice_sage_desc:'–ú—É–¥—Ä—ã–π –∏ —Å–ø–æ–∫–æ–π–Ω—ã–π',voice_nova_desc:'–≠–Ω–µ—Ä–≥–∏—á–Ω—ã–π –∏ –º–æ–ª–æ–¥–æ–π',voice_echo_desc:'–ì–ª—É–±–æ–∫–∏–π –∏ –æ–±—ä—ë–º–Ω—ã–π',voice_spark_desc:'–í–µ—Å—ë–ª—ã–π –∏ –∏–≥—Ä–∏–≤—ã–π',voice_atlas_desc:'–ú–æ—â–Ω—ã–π –∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π',voice_luna_desc:'–ú—è–≥–∫–∏–π –∏ –ª—É–Ω–Ω—ã–π',voice_titan_desc:'–†–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π',voice_pixel_desc:'–¶–∏—Ñ—Ä–æ–≤–æ–π –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π',voice_zen_desc:'–°–ø–æ–∫–æ–π–Ω—ã–π –∏ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π',voice_locked_msg:'üîí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–æ–ª–æ—Å–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Pro –≤–µ—Ä—Å–∏–∏',subscription:'–ü–û–î–ü–ò–°–ö–ê',manage_sub:'–£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–î–ü–ò–°–ö–û–ô',trial_active:'–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω!',trial_desc:'–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ',choose_plan:'–í–´–ë–ï–†–ò –ü–õ–ê–ù',plan_monthly:'–ú–µ—Å—è—Ü',plan_yearly:'–ì–æ–¥',plan_forever:'–ù–∞–≤—Å–µ–≥–¥–∞',per_month:'/–º–µ—Å—è—Ü',per_month_billed:'–≤ –º–µ—Å—è—Ü (–≥–æ–¥)',one_time:'–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂',save_40:'–°–ö–ò–î–ö–ê 40%',whats_included:'–ß–¢–û –í–ö–õ–Æ–ß–ï–ù–û',feat_basic:'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–º',feat_control:'–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã',feat_voices:'10 –≥–æ–ª–æ—Å–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä',feat_smart:'–£–º–Ω—ã–π —Ä–µ–∂–∏–º + —Å–≤–æ—ë –∏–º—è',feat_calc:'–£–º–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –ò–ò',feat_custom_name:'–ö–∞—Å—Ç–æ–º–Ω–æ–µ –∏–º—è –±–æ—Ç–∞',subscribe_btn:'–ü–û–î–ö–õ–Æ–ß–ò–¢–¨ PRO',maybe_later:'–ü–æ–∑–∂–µ',trial_modal_info:'–£ —Ç–µ–±—è –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ ‚Äî –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç—ã!',calculator:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',ai_solve:'–†–µ—à–∏—Ç—å —Å–ª–æ–∂–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ (–ò–ò)',calc_locked:'üîí –£–º–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Pro. –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å.',ai_solving:'–†–µ—à–∞—é...'},
  en:{online:'ONLINE',temp:'TEMP',uptime:'UPTIME',battery:'BATTERY',log:'LOG',movement:'MOVEMENT',actions:'ACTIONS',wakeup:'WAKE UP',sleep:'SLEEP',charge:'GO CHARGE',random:'DANCE',zonemap:'SAFE ZONE MAP',zonewidth:'WIDTH',zonedepth:'DEPTH',edgealerts:'EDGE ALERTS',on:'ON',falls:'FALLS',language:'LANGUAGE',features:'FEATURES',voiceact:'Voice Activation',voiceact_desc:'Wake up with "Hey ZIVO"',edgeprot:'Edge Protection',edgeprot_desc:'Stop at table edges',autocharge:'Auto Charging',autocharge_desc:'Return to base when low',explore:'Random Explore',explore_desc:'ZIVO moves on its own',notifs:'Notifications',notifs_desc:'Battery and edge alerts',nav_control:'CONTROL',nav_zone:'ZONE',nav_settings:'SETTINGS',nav_calc:'CALC',nav_profile:'PROFILE',moods:['READY ‚Ä¢ LISTENING','EXPLORING','HAPPY','IDLE ‚Ä¢ WAITING'],log_connected:'Connected to {name}',upfmt:(h,m)=>h+'h'+String(m).padStart(2,'0')+'m',offline:'DISCONNECTED',not_connected:'ZIVO is not connected',not_connected_desc:'Enter your ZIVO serial number',connect_btn:'CONNECT',serial_label:'SERIAL NUMBER',serial_wrong:'Wrong serial number.',serial_hint:'Serial number is on the sticker on the bottom',member_since:'ZIVO Member',your_info:'YOUR INFO',your_name:'YOUR NAME',bot_custom_name:'BOT NAME (smart mode)',smart_mode:'SMART MODE',smart_mode_title:'Smart Mode',smart_mode_desc:'Your bot responds to a custom name you choose. Pro only.',smart_mode_label:'Enable Smart Mode',smart_mode_sub:'Bot responds to its name',voice_section:'BOT VOICE',voice_default_desc:'Default ZIVO voice',voice_sage_desc:'Wise and calm',voice_nova_desc:'Energetic and young',voice_echo_desc:'Deep and rich',voice_spark_desc:'Fun and playful',voice_atlas_desc:'Powerful and authoritative',voice_luna_desc:'Soft and dreamy',voice_titan_desc:'Robotic and precise',voice_pixel_desc:'Digital and techy',voice_zen_desc:'Calm and meditative',voice_locked_msg:'üîí Extra voices available in Pro',subscription:'SUBSCRIPTION',manage_sub:'MANAGE SUBSCRIPTION',trial_active:'Free trial is active!',trial_desc:'All features unlocked',choose_plan:'CHOOSE YOUR PLAN',plan_monthly:'Monthly',plan_yearly:'Yearly',plan_forever:'Forever',per_month:'/month',per_month_billed:'/mo billed yearly',one_time:'one-time payment',save_40:'SAVE 40%',whats_included:"WHAT'S INCLUDED",feat_basic:'Robot control',feat_control:'Basic commands',feat_voices:'10 voices to choose',feat_smart:'Smart mode + custom name',feat_calc:'Smart AI calculator',feat_custom_name:'Custom bot name',subscribe_btn:'GET PRO',maybe_later:'Maybe later',trial_modal_info:'Your free trial is active ‚Äî all features are unlocked!',calculator:'CALCULATOR',ai_solve:'Solve complex equation (AI)',calc_locked:'üîí Smart calculator available in Pro. Tap to unlock.',ai_solving:'Solving...'},
  he:{online:'◊û◊ó◊ï◊ë◊®',temp:'◊ò◊û◊§',uptime:'◊ñ◊û◊ü',battery:'◊°◊ï◊ú◊ú◊î',log:'◊ô◊ï◊û◊ü',movement:'◊™◊†◊ï◊¢◊î',actions:'◊§◊¢◊ï◊ú◊ï◊™',wakeup:'◊î◊™◊¢◊ï◊®◊®',sleep:'◊©◊ô◊†◊î',charge:'◊ú◊ò◊¢◊ô◊†◊î',random:'◊ú◊®◊ß◊ï◊ì',zonemap:'◊û◊§◊™ ◊ê◊ñ◊ï◊®',zonewidth:'◊®◊ï◊ó◊ë',zonedepth:'◊¢◊ï◊û◊ß',edgealerts:'◊î◊í◊†◊™ ◊ß◊¶◊î',on:'◊§◊ï◊¢◊ú',falls:'◊†◊§◊ô◊ú◊ï◊™',language:'◊©◊§◊î',features:'◊™◊õ◊ï◊†◊ï◊™',voiceact:'◊î◊§◊¢◊ú◊î ◊ß◊ï◊ú◊ô◊™',voiceact_desc:'◊î◊§◊¢◊ú◊î ◊¢◊ù "◊î◊ô◊ô ZIVO"',edgeprot:'◊î◊í◊†◊î ◊û◊†◊§◊ô◊ú◊î',edgeprot_desc:'◊¢◊¶◊ï◊® ◊ë◊ß◊¶◊î ◊î◊©◊ï◊ú◊ó◊ü',autocharge:'◊ò◊¢◊ô◊†◊î ◊ê◊ï◊ò◊ï◊û◊ò◊ô◊™',autocharge_desc:'◊ó◊ñ◊ï◊® ◊ú◊ë◊°◊ô◊° ◊õ◊©◊î◊°◊ï◊ú◊ú◊î ◊†◊û◊ï◊õ◊î',explore:'◊°◊ô◊ï◊® ◊ê◊ß◊®◊ê◊ô',explore_desc:'ZIVO ◊†◊ï◊°◊¢ ◊ú◊ë◊ì',notifs:'◊î◊™◊®◊ê◊ï◊™',notifs_desc:'◊°◊ï◊ú◊ú◊î ◊ï◊î◊í◊†◊™ ◊ß◊¶◊î',nav_control:'◊©◊ú◊ô◊ò◊î',nav_zone:'◊ê◊ñ◊ï◊®',nav_settings:'◊î◊í◊ì◊®◊ï◊™',nav_calc:'◊û◊ó◊©◊ë◊ï◊ü',nav_profile:'◊§◊®◊ï◊§◊ô◊ú',moods:['◊û◊ï◊õ◊ü ‚Ä¢ ◊û◊ß◊©◊ô◊ë','◊ó◊ï◊ß◊®','◊©◊û◊ó','◊û◊û◊™◊ô◊ü'],log_connected:'◊û◊ó◊ï◊ë◊® ◊ú-{name}',upfmt:(h,m)=>h+'◊©'+String(m).padStart(2,'0')+'◊ì',offline:'◊û◊†◊ï◊™◊ß',not_connected:'ZIVO ◊ú◊ê ◊û◊ó◊ï◊ë◊®',not_connected_desc:'◊î◊ñ◊ü ◊ê◊™ ◊î◊û◊°◊§◊® ◊î◊°◊ô◊ì◊ï◊®◊ô',connect_btn:'◊î◊™◊ó◊ë◊®',serial_label:'◊û◊°◊§◊® ◊°◊ô◊ì◊ï◊®◊ô',serial_wrong:'◊û◊°◊§◊® ◊°◊ô◊ì◊ï◊®◊ô ◊©◊í◊ï◊ô.',serial_hint:'◊î◊û◊°◊§◊® ◊î◊°◊ô◊ì◊ï◊®◊ô ◊†◊û◊¶◊ê ◊ë◊™◊ó◊™◊ô◊™ ZIVO',member_since:'◊ó◊ë◊® ZIVO',your_info:'◊§◊®◊ò◊ô◊ù',your_name:'◊©◊û◊ö',bot_custom_name:'◊©◊ù ◊î◊ë◊ï◊ò (◊û◊¶◊ë ◊ó◊õ◊ù)',smart_mode:'◊û◊¶◊ë ◊ó◊õ◊ù',smart_mode_title:'◊û◊¶◊ë ◊ó◊õ◊ù',smart_mode_desc:'◊î◊ë◊ï◊ò ◊û◊í◊ô◊ë ◊ú◊©◊ù ◊©◊ë◊ó◊®◊™. Pro ◊ë◊ú◊ë◊ì.',smart_mode_label:'◊î◊§◊¢◊ú ◊û◊¶◊ë ◊ó◊õ◊ù',smart_mode_sub:'◊î◊ë◊ï◊ò ◊û◊í◊ô◊ë ◊ú◊©◊û◊ï',voice_section:'◊ß◊ï◊ú ◊î◊ë◊ï◊ò',voice_default_desc:'◊ß◊ï◊ú ZIVO ◊ë◊®◊ô◊®◊™ ◊û◊ó◊ì◊ú',voice_sage_desc:'◊ó◊õ◊ù ◊ï◊®◊í◊ï◊¢',voice_nova_desc:'◊ê◊†◊®◊í◊ò◊ô ◊ï◊¶◊¢◊ô◊®',voice_echo_desc:'◊¢◊û◊ï◊ß ◊ï◊¢◊©◊ô◊®',voice_spark_desc:'◊õ◊ô◊§◊ô ◊ï◊©◊ï◊ë◊ë◊ô',voice_atlas_desc:'◊ó◊ñ◊ß ◊ï◊°◊û◊õ◊ï◊™◊ô',voice_luna_desc:'◊®◊ö ◊ï◊ó◊ú◊ï◊û◊ô',voice_titan_desc:'◊®◊ï◊ë◊ï◊ò◊ô ◊ï◊û◊ì◊ï◊ô◊ß',voice_pixel_desc:'◊ì◊ô◊í◊ô◊ò◊ú◊ô ◊ï◊ò◊õ◊†◊ï◊ú◊ï◊í◊ô',voice_zen_desc:'◊®◊í◊ï◊¢ ◊ï◊û◊ì◊ô◊ò◊ò◊ô◊ë◊ô',voice_locked_msg:'üîí ◊ß◊ï◊ú◊ï◊™ ◊†◊ï◊°◊§◊ô◊ù ◊ñ◊û◊ô◊†◊ô◊ù ◊ë-Pro',subscription:'◊û◊†◊ï◊ô',manage_sub:'◊†◊ô◊î◊ï◊ú ◊û◊†◊ï◊ô',trial_active:'◊™◊ß◊ï◊§◊™ ◊†◊ô◊°◊ô◊ï◊ü ◊§◊¢◊ô◊ú◊î!',trial_desc:'◊õ◊ú ◊î◊§◊ï◊†◊ß◊¶◊ô◊ï◊™ ◊§◊™◊ï◊ó◊ï◊™',choose_plan:'◊ë◊ó◊® ◊™◊ï◊õ◊†◊ô◊™',plan_monthly:'◊ó◊ï◊ì◊©◊ô',plan_yearly:'◊©◊†◊™◊ô',plan_forever:'◊ú◊¶◊û◊ô◊™◊ï◊™',per_month:'/◊ó◊ï◊ì◊©',per_month_billed:'/◊ó◊ï◊ì◊© (◊©◊†◊™◊ô)',one_time:'◊™◊©◊ú◊ï◊ù ◊ó◊ì ◊§◊¢◊û◊ô',save_40:'◊ó◊°◊ï◊ö 40%',whats_included:'◊û◊î ◊õ◊ú◊ï◊ú',feat_basic:'◊©◊ú◊ô◊ò◊î ◊ë◊ë◊ï◊ò',feat_control:'◊§◊ß◊ï◊ì◊ï◊™ ◊ë◊°◊ô◊°◊ô◊ï◊™',feat_voices:'10 ◊ß◊ï◊ú◊ï◊™ ◊ú◊ë◊ó◊ô◊®◊î',feat_smart:'◊û◊¶◊ë ◊ó◊õ◊ù + ◊©◊ù ◊û◊ï◊™◊ê◊ù',feat_calc:'◊û◊ó◊©◊ë◊ï◊ü AI ◊ó◊õ◊ù',feat_custom_name:'◊©◊ù ◊ë◊ï◊ò ◊û◊ï◊™◊ê◊ù',subscribe_btn:'◊î◊¶◊ò◊®◊£ ◊ú-Pro',maybe_later:'◊ê◊ï◊ú◊ô ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊®',trial_modal_info:'◊™◊ß◊ï◊§◊™ ◊î◊†◊ô◊°◊ô◊ï◊ü ◊©◊ú◊ö ◊§◊¢◊ô◊ú◊î ‚Äî ◊õ◊ú ◊î◊§◊ï◊†◊ß◊¶◊ô◊ï◊™ ◊§◊™◊ï◊ó◊ï◊™!',calculator:'◊û◊ó◊©◊ë◊ï◊ü',ai_solve:'◊§◊™◊ï◊® ◊û◊©◊ï◊ï◊ê◊î ◊û◊ï◊®◊õ◊ë◊™ (AI)',calc_locked:'üîí ◊û◊ó◊©◊ë◊ï◊ü ◊ó◊õ◊ù ◊ñ◊û◊ô◊ü ◊ë-Pro. ◊ú◊ó◊• ◊ú◊§◊™◊ô◊ó◊î.',ai_solving:'◊§◊ï◊™◊®...'},
  zh:{online:'Âú®Á∫ø',temp:'Ê∏©Â∫¶',uptime:'ËøêË°å',battery:'ÁîµÊ±†',log:'Êó•Âøó',movement:'ÁßªÂä®',actions:'Êìç‰Ωú',wakeup:'Âî§ÈÜí',sleep:'Áù°Áú†',charge:'ÂéªÂÖÖÁîµ',random:'Ë∑≥Ëàû',zonemap:'ÂÆâÂÖ®Âå∫Âüü',zonewidth:'ÂÆΩÂ∫¶',zonedepth:'Ê∑±Â∫¶',edgealerts:'ËæπÁºò‰øùÊä§',on:'ÂºÄÂêØ',falls:'Ë∑åËêΩ',language:'ËØ≠Ë®Ä',features:'ÂäüËÉΩ',voiceact:'ËØ≠Èü≥ÊøÄÊ¥ª',voiceact_desc:'ËØ¥"Âòø ZIVO"Âî§ÈÜí',edgeprot:'Èò≤Ë∑åËêΩ',edgeprot_desc:'Âú®Ê°åÂ≠êËæπÁºòÂÅú‰∏ã',autocharge:'Ëá™Âä®ÂÖÖÁîµ',autocharge_desc:'ÁîµÈáè‰ΩéÊó∂ËøîÂõûÂÖÖÁîµ',explore:'ÈöèÊú∫Êé¢Á¥¢',explore_desc:'ZIVO Ëá™‰∏ªÁßªÂä®',notifs:'ÈÄöÁü•',notifs_desc:'ÁîµÊ±†ÂíåËæπÁºòË≠¶Êä•',nav_control:'ÊéßÂà∂',nav_zone:'Âå∫Âüü',nav_settings:'ËÆæÁΩÆ',nav_calc:'ËÆ°ÁÆóÂô®',nav_profile:'‰∏™‰∫∫',moods:['ÂáÜÂ§áÂ•Ω‰∫Ü','Êé¢Á¥¢‰∏≠','ÂºÄÂøÉ','Á≠âÂæÖÂëΩ‰ª§'],log_connected:'Â∑≤ËøûÊé•Âà∞ {name}',upfmt:(h,m)=>h+'Êó∂'+String(m).padStart(2,'0')+'ÂàÜ',offline:'Êú™ËøûÊé•',not_connected:'ZIVO Êú™ËøûÊé•',not_connected_desc:'ËæìÂÖ•Â∫èÂàóÂè∑',connect_btn:'ËøûÊé•',serial_label:'Â∫èÂàóÂè∑',serial_wrong:'Â∫èÂàóÂè∑ÈîôËØØ„ÄÇ',serial_hint:'Â∫èÂàóÂè∑Âú® ZIVO Â∫ïÈÉ®ÁöÑË¥¥Á∫∏‰∏ä',member_since:'ZIVO ‰ºöÂëò',your_info:'‰∏™‰∫∫‰ø°ÊÅØ',your_name:'‰Ω†ÁöÑÂêçÂ≠ó',bot_custom_name:'Êú∫Âô®‰∫∫ÂêçÁß∞ÔºàÊô∫ËÉΩÊ®°ÂºèÔºâ',smart_mode:'Êô∫ËÉΩÊ®°Âºè',smart_mode_title:'Êô∫ËÉΩÊ®°Âºè',smart_mode_desc:'Êú∫Âô®‰∫∫ÂìçÂ∫î‰Ω†ÈÄâÊã©ÁöÑÂêçÂ≠ó„ÄÇ‰ªÖÈôêPro„ÄÇ',smart_mode_label:'ÂêØÁî®Êô∫ËÉΩÊ®°Âºè',smart_mode_sub:'Êú∫Âô®‰∫∫ÂìçÂ∫îÂÖ∂ÂêçÂ≠ó',voice_section:'Êú∫Âô®‰∫∫Â£∞Èü≥',voice_default_desc:'ÈªòËÆ§ZIVOÂ£∞Èü≥',voice_sage_desc:'ÁùøÊô∫Âπ≥Èùô',voice_nova_desc:'ÂÖÖÊª°Ê¥ªÂäõ',voice_echo_desc:'Ê∑±Ê≤â‰∏∞ÂØå',voice_spark_desc:'ÊúâË∂£Ê¥ªÊ≥º',voice_atlas_desc:'Âº∫Â§ßÊùÉÂ®Å',voice_luna_desc:'ÊüîÂíåÊ¢¶Âπª',voice_titan_desc:'Êú∫Âô®‰∫∫Á≤æÂáÜ',voice_pixel_desc:'Êï∞Â≠óÁßëÊäÄ',voice_zen_desc:'Âπ≥ÈùôÂÜ•ÊÉ≥',voice_locked_msg:'üîí Êõ¥Â§öÂ£∞Èü≥Âú®ProÁâàÊú¨‰∏≠ÂèØÁî®',subscription:'ËÆ¢ÈòÖ',manage_sub:'ÁÆ°ÁêÜËÆ¢ÈòÖ',trial_active:'ËØïÁî®ÊúüÊøÄÊ¥ªÔºÅ',trial_desc:'ÊâÄÊúâÂäüËÉΩÂÖçË¥π',choose_plan:'ÈÄâÊã©ÊñπÊ°à',plan_monthly:'ÊúàÂ∫¶',plan_yearly:'Âπ¥Â∫¶',plan_forever:'Ê∞∏‰πÖ',per_month:'/Êúà',per_month_billed:'/ÊúàÔºàÂπ¥‰ªòÔºâ',one_time:'‰∏ÄÊ¨°ÊÄß‰ªòÊ¨æ',save_40:'ËäÇÁúÅ40%',whats_included:'ÂåÖÂê´ÂÜÖÂÆπ',feat_basic:'Êú∫Âô®‰∫∫ÊéßÂà∂',feat_control:'Âü∫Êú¨ÂëΩ‰ª§',feat_voices:'10ÁßçÂ£∞Èü≥ÂèØÈÄâ',feat_smart:'Êô∫ËÉΩÊ®°Âºè+Ëá™ÂÆö‰πâÂêçÁß∞',feat_calc:'AIÊô∫ËÉΩËÆ°ÁÆóÂô®',feat_custom_name:'Ëá™ÂÆö‰πâÊú∫Âô®‰∫∫ÂêçÁß∞',subscribe_btn:'Ëé∑ÂèñPro',maybe_later:'Á®çÂêé',trial_modal_info:'ÊÇ®ÁöÑËØïÁî®ÊúüÂ∑≤ÊøÄÊ¥ª ‚Äî ÊâÄÊúâÂäüËÉΩÂ∑≤Ëß£ÈîÅÔºÅ',calculator:'ËÆ°ÁÆóÂô®',ai_solve:'Ëß£Â§çÊùÇÊñπÁ®ãÔºàAIÔºâ',calc_locked:'üîí Êô∫ËÉΩËÆ°ÁÆóÂô®Âú®ProÁâàÊú¨‰∏≠ÂèØÁî®„ÄÇÁÇπÂáªËß£ÈîÅ„ÄÇ',ai_solving:'Ëß£ÁÆó‰∏≠...'},
  uk:{online:'–í –ú–ï–†–ï–ñ–Ü',temp:'–¢–ï–ú–ü',uptime:'–ß–ê–°',battery:'–ë–ê–¢–ê–†–ï–Ø',log:'–ñ–£–†–ù–ê–õ',movement:'–†–£–•',actions:'–î–Ü–á',wakeup:'–†–û–ó–ë–£–î–ò–¢–ò',sleep:'–°–ü–ê–¢–ò',charge:'–ù–ê –ó–ê–†–Ø–î–ö–£',random:'–¢–ê–ù–ï–¶–¨',zonemap:'–ö–ê–†–¢–ê –ó–û–ù–ò',zonewidth:'–®–ò–†–ò–ù–ê',zonedepth:'–ì–õ–ò–ë–ò–ù–ê',edgealerts:'–ó–ê–•–ò–°–¢ –ö–†–ê–Æ',on:'–£–í–Ü–ú–ö–ù',falls:'–ü–ê–î–Ü–ù–¨',language:'–ú–û–í–ê',features:'–§–£–ù–ö–¶–Ü–á',voiceact:'–ì–æ–ª–æ—Å–æ–≤–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—è',voiceact_desc:'–ê–∫—Ç–∏–≤–∞—Ü—ñ—è "–ü—Ä–∏–≤—ñ—Ç ZIVO"',edgeprot:'–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–∞–¥—ñ–Ω–Ω—è',edgeprot_desc:'–ó—É–ø–∏–Ω—è—Ç–∏—Å—å –±—ñ–ª—è –∫—Ä–∞—é —Å—Ç–æ–ª—É',autocharge:'–ê–≤—Ç–æ –∑–∞—Ä—è–¥–∫–∞',autocharge_desc:'–á—Ö–∞—Ç–∏ –Ω–∞ –±–∞–∑—É –ø—Ä–∏ –Ω–∏–∑—å–∫–æ–º—É –∑–∞—Ä—è–¥—ñ',explore:'–í–∏–ø–∞–¥–∫–æ–≤—ñ –ø—Ä–æ–≥—É–ª—è–Ω–∫–∏',explore_desc:'ZIVO —ó–∑–¥–∏—Ç—å —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ',notifs:'–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è',notifs_desc:'–ó–∞—Ä—è–¥ —ñ –∑–∞—Ö–∏—Å—Ç –∫—Ä–∞—é',nav_control:'–ö–ï–†–£–í–ê–ù–ù–Ø',nav_zone:'–ó–û–ù–ê',nav_settings:'–ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø',nav_calc:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',nav_profile:'–ü–†–û–§–Ü–õ–¨',moods:['–ì–û–¢–û–í–ò–ô ‚Ä¢ –°–õ–£–•–ê–Æ','–î–û–°–õ–Ü–î–ñ–£–Æ','–©–ê–°–õ–ò–í–ò–ô','–ß–ï–ö–ê–Æ'],log_connected:'–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ {name}',upfmt:(h,m)=>h+'–≥'+String(m).padStart(2,'0')+'—Ö–≤',offline:'–ù–ï –ü–Ü–î–ö–õ–Æ–ß–ï–ù–û',not_connected:'ZIVO –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ',not_connected_desc:'–í–≤–µ–¥–∏ —Å–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä',connect_btn:'–ü–Ü–î–ö–õ–Æ–ß–ò–¢–ò',serial_label:'–°–ï–†–Ü–ô–ù–ò–ô –ù–û–ú–ï–†',serial_wrong:'–ù–µ–≤—ñ—Ä–Ω–∏–π —Å–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä.',serial_hint:'–°–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä –Ω–∞ –Ω–∞–∫–ª–µ–π—Ü—ñ –Ω–∞ –¥–Ω—ñ –∫–æ—Ä–ø—É—Å—É',member_since:'–£—á–∞—Å–Ω–∏–∫ ZIVO',your_info:'–Ü–ù–§–û–†–ú–ê–¶–Ü–Ø',your_name:"–¢–í–û–Ñ –Ü–ú'–Ø",bot_custom_name:"–Ü–ú'–Ø –ë–û–¢–ê (—Ä–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º)",smart_mode:'–†–û–ó–£–ú–ù–ò–ô –†–ï–ñ–ò–ú',smart_mode_title:'–†–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º',smart_mode_desc:"–ë–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ —Å–≤–æ—î —ñ–º'—è —è–∫–µ —Ç–∏ –æ–±—Ä–∞–≤. –¢—ñ–ª—å–∫–∏ –ø–ª–∞—Ç–Ω–∞ –≤–µ—Ä—Å—ñ—è.",smart_mode_label:'–£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ä–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º',smart_mode_sub:"–ë–æ—Ç —Ä–µ–∞–≥—É—î –Ω–∞ —Å–≤–æ—î —ñ–º'—è",voice_section:'–ì–û–õ–û–° –ë–û–¢–ê',voice_default_desc:'–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –≥–æ–ª–æ—Å ZIVO',voice_sage_desc:'–ú—É–¥—Ä–∏–π —ñ —Å–ø–æ–∫—ñ–π–Ω–∏–π',voice_nova_desc:'–ï–Ω–µ—Ä–≥—ñ–π–Ω–∏–π —ñ –º–æ–ª–æ–¥–∏–π',voice_echo_desc:"–ì–ª–∏–±–æ–∫–∏–π —ñ –æ–±'—î–º–Ω–∏–π",voice_spark_desc:'–í–µ—Å–µ–ª–∏–π —ñ –≥—Ä–∞–π–ª–∏–≤–∏–π',voice_atlas_desc:'–ü–æ—Ç—É–∂–Ω–∏–π —ñ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π',voice_luna_desc:'–ú—è–≥–∫–∏–π —ñ –º—Ä—ñ–π–ª–∏–≤–∏–π',voice_titan_desc:'–†–æ–±–æ—Ç–∏–∑–æ–≤–∞–Ω–∏–π —ñ —Ç–æ—á–Ω–∏–π',voice_pixel_desc:'–¶–∏—Ñ—Ä–æ–≤–∏–π —ñ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π',voice_zen_desc:'–°–ø–æ–∫—ñ–π–Ω–∏–π —ñ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–∏–π',voice_locked_msg:'üîí –î–æ–¥–∞—Ç–∫–æ–≤—ñ –≥–æ–ª–æ—Å–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ Pro –≤–µ—Ä—Å—ñ—ó',subscription:'–ü–Ü–î–ü–ò–°–ö–ê',manage_sub:'–ö–ï–†–£–í–ê–ù–ù–Ø –ü–Ü–î–ü–ò–°–ö–û–Æ',trial_active:'–ü—Ä–æ–±–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ –∞–∫—Ç–∏–≤–Ω–∏–π!',trial_desc:'–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ',choose_plan:'–û–ë–ï–†–ò –ü–õ–ê–ù',plan_monthly:'–ú—ñ—Å—è—Ü—å',plan_yearly:'–†—ñ–∫',plan_forever:'–ù–∞–∑–∞–≤–∂–¥–∏',per_month:'/–º—ñ—Å—è—Ü—å',per_month_billed:'–Ω–∞ –º—ñ—Å—è—Ü—å (—Ä—ñ–∫)',one_time:'–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂',save_40:'–ó–ù–ò–ñ–ö–ê 40%',whats_included:'–©–û –í–ö–õ–Æ–ß–ï–ù–û',feat_basic:'–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–æ–º',feat_control:'–ë–∞–∑–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏',feat_voices:'10 –≥–æ–ª–æ—Å—ñ–≤ –Ω–∞ –≤–∏–±—ñ—Ä',feat_smart:"–†–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º + —Å–≤–æ—î —ñ–º'—è",feat_calc:'–†–æ–∑—É–º–Ω–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑ –Ü–Ü',feat_custom_name:"–ö–∞—Å—Ç–æ–º–Ω–µ —ñ–º'—è –±–æ—Ç–∞",subscribe_btn:'–û–¢–†–ò–ú–ê–¢–ò PRO',maybe_later:'–ü—ñ–∑–Ω—ñ—à–µ',trial_modal_info:'–£ —Ç–µ–±–µ –∞–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–æ–±–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ ‚Äî –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç—ñ!',calculator:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',ai_solve:'–í–∏—Ä—ñ—à–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è (–Ü–Ü)',calc_locked:'üîí –†–æ–∑—É–º–Ω–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π —É Pro. –ù–∞—Ç–∏—Å–Ω–∏ —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏.',ai_solving:'–í–∏—Ä—ñ—à—É—é...'}
};

let lang='en',moodIdx=0,connected=false,currentRobot=null,currentSerial=null,selectedPlan='yearly';
const USER=JSON.parse(localStorage.getItem('zivo_user')||'{}');
function saveUser(){localStorage.setItem('zivo_user',JSON.stringify(USER));}
function isPro(){return USER.sub==='forever'||USER.sub==='monthly'||USER.sub==='yearly';}
function isTrialActive(){if(!USER.firstConnected)return false;return(Date.now()-USER.firstConnected)/(1000*60*60*24)<7;}
function hasProAccess(){return isPro()||isTrialActive();}
function trialDaysLeft(){if(!USER.firstConnected)return 0;return Math.max(0,Math.ceil(7-(Date.now()-USER.firstConnected)/(1000*60*60*24)));}

function setConnected(val){
  connected=val;
  const dot=document.getElementById('status-dot'),txt=document.getElementById('status-text'),face=document.getElementById('zivo-face');
  if(val){
    dot.style.cssText='width:9px;height:9px;border-radius:50%;background:var(--success);box-shadow:0 0 8px var(--success);animation:pulse 2s infinite';
    txt.style.color='var(--success)';txt.textContent=T[lang].online;
    document.getElementById('offline-banner').style.display='none';
    document.getElementById('pages-wrapper').style.display='block';
    document.getElementById('page-home').style.display='block';
    document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
    document.querySelector('.nav-item').classList.add('active');
    face.style.borderColor='var(--blue)';face.style.boxShadow='0 0 28px var(--blue-glow),inset 0 0 28px rgba(0,180,255,0.05)';
    if(!USER.firstConnected){USER.firstConnected=Date.now();saveUser();}
    updateTrialBanner();
  }else{
    dot.style.cssText='width:9px;height:9px;border-radius:50%;background:var(--gray);box-shadow:none;animation:none';
    txt.style.color='var(--gray)';txt.textContent=T[lang].offline;
    document.getElementById('offline-banner').style.display='block';
    document.getElementById('pages-wrapper').style.display='none';
    ['page-settings','page-profile','page-calc'].forEach(id=>document.getElementById(id).style.display='none');
    face.style.borderColor='var(--gray)';face.style.boxShadow='none';
  }
}

function tryConnect(){
  const input=document.getElementById('serial-input').value.trim().toUpperCase();
  const err=document.getElementById('serial-error'),btn=document.getElementById('connect-btn');
  if(!input){err.style.display='block';return;}
  btn.textContent='...';btn.style.opacity='0.6';err.style.display='none';
  setTimeout(()=>{
    if(input in REGISTERED_ROBOTS){
      currentRobot=REGISTERED_ROBOTS[input];currentSerial=input;
      localStorage.setItem('zivo_last_serial',input);
      setConnected(true);addLog('ok',T[lang].log_connected.replace('{name}',currentRobot.name));
    }else{
      btn.textContent=T[lang].connect_btn;btn.style.opacity='1';err.style.display='block';
      const inp=document.getElementById('serial-input');
      inp.style.borderColor='var(--danger)';setTimeout(()=>inp.style.borderColor='rgba(0,180,255,0.3)',2000);
    }
  },1200);
}

function updateTrialBanner(){
  const b=document.getElementById('trial-banner');
  if(isTrialActive()&&!isPro()){b.style.display='flex';document.getElementById('trial-days-left').textContent=trialDaysLeft();}
  else b.style.display='none';
}

function saveProfile(){USER.name=document.getElementById('user-name-input').value;saveUser();updateProfileUI();}
function saveBotName(){USER.botName=document.getElementById('bot-name-input').value||'ZIVO';saveUser();document.getElementById('bot-display-name').textContent=USER.botName||'ZIVO';}

function toggleSmartMode(){
  if(!hasProAccess()){openSubModal();return;}
  USER.smartMode=!USER.smartMode;
  document.getElementById('smart-toggle').classList.toggle('on',USER.smartMode);
  saveUser();sendCmd(USER.smartMode?'smart_on':'smart_off');
}

function updateProfileUI(){
  document.getElementById('profile-name-display').textContent=USER.name||'User';
  document.getElementById('user-name-input').value=USER.name||'';
  document.getElementById('bot-name-input').value=USER.botName||'';
  document.getElementById('bot-display-name').textContent=USER.botName||'ZIVO';
  const badge=document.getElementById('sub-badge-display');
  if(isPro()){badge.className='sub-badge pro';badge.textContent='PRO';}
  else if(isTrialActive()){badge.className='sub-badge trial';badge.textContent='TRIAL '+trialDaysLeft()+'d';}
  else{badge.className='sub-badge free';badge.textContent='FREE';}
  document.getElementById('smart-toggle').classList.toggle('on',!!USER.smartMode);
  document.getElementById('smart-mode-toggle-row').style.opacity=hasProAccess()?'1':'0.5';
  const si=document.getElementById('sub-current-info');
  if(isPro())si.innerHTML='<div style="font-size:13px;font-weight:700;color:var(--gold)">‚≠ê PRO Active</div><div style="font-size:11px;color:var(--gray);margin-top:4px">'+(USER.sub==='forever'?'Lifetime':'Renews automatically')+'</div>';
  else if(isTrialActive())si.innerHTML='<div style="font-size:13px;font-weight:700;color:var(--success)">üéÅ Free Trial</div><div style="font-size:11px;color:var(--gray);margin-top:4px">'+trialDaysLeft()+' days remaining</div>';
  else si.innerHTML='<div style="font-size:13px;font-weight:700;">Free Plan</div><div style="font-size:11px;color:var(--gray);margin-top:4px">Upgrade to unlock all features</div>';
  renderVoices();
  const pro=hasProAccess();
  document.getElementById('ai-solve-btn').style.display=pro?'block':'none';
  document.getElementById('ai-locked-calc').style.display=pro?'none':'block';
}

function renderVoices(){
  const list=document.getElementById('voice-list');list.innerHTML='';
  const pro=hasProAccess();
  VOICES.forEach(v=>{
    const isActive=(USER.voice||'default')===v.id,isLocked=!v.free&&!pro;
    const div=document.createElement('div');
    div.className='voice-card'+(isActive?' active':'')+(isLocked?' locked':'');
    div.innerHTML=`<div class="voice-avatar" style="background:linear-gradient(135deg,rgba(0,100,200,0.3),rgba(0,180,255,0.2))">${v.emoji}</div><div><div class="voice-name">${v.name}</div><div class="voice-desc">${T[lang][v.desc_key]||''}</div></div>${isLocked?'<div class="lock-icon" style="display:flex">üîí</div>':`<div class="voice-play" onclick="event.stopPropagation();playVoicePreview('${v.id}')">‚ñ∂</div>`}`;
    div.onclick=isLocked?()=>openSubModal():()=>selectVoice(v.id);
    list.appendChild(div);
  });
  document.getElementById('voice-locked-msg').style.display=pro?'none':'block';
}

function selectVoice(id){USER.voice=id;saveUser();sendCmd('set_voice:'+id);renderVoices();addLog('info','Voice: '+id);}
function playVoicePreview(id){addLog('info','Preview: '+id);}

function openSubModal(){
  document.getElementById('sub-modal').classList.add('open');selectPlan(selectedPlan);
  document.getElementById('modal-trial-info').style.display=isTrialActive()?'block':'none';
}
function closeSubModal(){document.getElementById('sub-modal').classList.remove('open');}
function selectPlan(plan){
  selectedPlan=plan;
  ['monthly','yearly','forever'].forEach(p=>document.getElementById('plan-'+p).classList.toggle('active',p===plan));
  document.getElementById('sub-btn').className=plan==='forever'?'btn-primary gold':'btn-primary';
}
function subscribePlan(){
  USER.sub=selectedPlan;USER.subStart=Date.now();saveUser();closeSubModal();updateProfileUI();
  addLog('ok','Subscribed: '+selectedPlan);
  const b=document.getElementById('sub-badge-display');b.className='sub-badge pro';b.textContent='PRO';
}

let calcExpr='';
function calcInput(val){
  calcExpr+=val;document.getElementById('calc-expr').textContent=calcExpr;
  try{const res=new Function('return '+calcExpr.replace(/\^/g,'**').replace(/sqrt\(/g,'Math.sqrt('))();if(isFinite(res))document.getElementById('calc-result').textContent=+res.toFixed(10);}catch(e){}
}
function calcClear(){calcExpr='';document.getElementById('calc-expr').textContent='';document.getElementById('calc-result').textContent='0';document.getElementById('calc-solution').style.display='none';}
function calcBackspace(){calcExpr=calcExpr.slice(0,-1);document.getElementById('calc-expr').textContent=calcExpr;}
function calcEquals(){
  try{const res=new Function('return '+calcExpr.replace(/\^/g,'**').replace(/sqrt\(/g,'Math.sqrt('))();document.getElementById('calc-result').textContent=+res.toFixed(10);calcExpr=String(+res.toFixed(10));}
  catch(e){document.getElementById('calc-result').textContent='ERR';}
}
async function aiSolve(){
  if(!hasProAccess()){openSubModal();return;}
  const expr=calcExpr||document.getElementById('calc-result').textContent;
  if(!expr||expr==='0')return;
  const btn=document.getElementById('ai-solve-btn'),sol=document.getElementById('calc-solution');
  btn.textContent='‚è≥ '+T[lang].ai_solving;btn.disabled=true;
  sol.style.display='block';sol.textContent='...';
  try{
    const resp=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:500,messages:[{role:'user',content:'Solve step by step (be concise): '+expr}]})});
    const data=await resp.json();sol.textContent=data.content?.[0]?.text||'No answer';
  }catch(e){sol.textContent='= '+document.getElementById('calc-result').textContent;}
  btn.innerHTML='üß† '+T[lang].ai_solve;btn.disabled=false;
}

function addLog(type,text){
  const list=document.getElementById('log-list'),now=new Date();
  const time=String(now.getHours()).padStart(2,'0')+':'+String(now.getMinutes()).padStart(2,'0');
  const el=document.createElement('div');el.className='log-entry';
  el.innerHTML='<span class="log-time">'+time+'</span><span class="log-text '+type+'">'+text+'</span>';
  list.insertBefore(el,list.firstChild);
  while(list.children.length>20)list.removeChild(list.lastChild);
}
async function sendCmd(cmd){if(!connected||!currentSerial)return;try{await fetch('http://zivo.local:8080/command',{method:'POST',headers:{'Content-Type':'application/json','X-Serial':currentSerial},body:JSON.stringify({cmd}),signal:AbortSignal.timeout(2000)});}catch(e){}}
async function pollRobot(){
  if(!connected||!currentSerial)return;
  try{
    const resp=await fetch('http://zivo.local:8080/status',{headers:{'X-Serial':currentSerial},signal:AbortSignal.timeout(2000)});
    if(!resp.ok)return;const data=await resp.json();
    const batt=data.battery??0;
    document.getElementById('batt-text').textContent=batt+'%';document.getElementById('batt-fill').style.width=batt+'%';
    document.getElementById('batt-text').style.color=batt<20?'var(--danger)':batt<50?'var(--warn)':'var(--success)';
    document.getElementById('temp-val').textContent=(data.temp??'--')+'¬∞';
    if(data.uptime){const h=Math.floor(data.uptime/3600),m=Math.floor((data.uptime%3600)/60);document.getElementById('uptime-val').textContent=T[lang].upfmt(h,m);}
  }catch(e){}
}

function applyLang(l){
  lang=l;const t=T[l];
  document.querySelectorAll('[data-t]').forEach(el=>{const k=el.getAttribute('data-t');if(t[k]!==undefined)el.textContent=t[k];});
  document.getElementById('mood-text').textContent=t.moods[moodIdx];
  document.body.style.direction=l==='he'?'rtl':'ltr';
  document.getElementById('status-text').textContent=connected?t.online:t.offline;
  document.getElementById('connect-btn').textContent=t.connect_btn;
  document.getElementById('ai-solve-btn').innerHTML='üß† '+t.ai_solve;
  renderVoices();
}
function selectLang(btn,l){document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');applyLang(l);}
function switchPage(name,el){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  el.classList.add('active');
  if(name==='settings')document.getElementById('page-settings').style.display='block';
  else if(name==='profile'){document.getElementById('page-profile').style.display='block';updateProfileUI();}
  else if(name==='calc'){document.getElementById('page-calc').style.display='block';updateProfileUI();}
  else if(connected){document.getElementById('pages-wrapper').style.display='block';document.getElementById('page-'+name).style.display='block';}
}

document.getElementById('sub-modal').addEventListener('click',function(e){if(e.target===this)closeSubModal();});

const lastSerial=localStorage.getItem('zivo_last_serial');
if(lastSerial&&lastSerial in REGISTERED_ROBOTS){
  currentRobot=REGISTERED_ROBOTS[lastSerial];currentSerial=lastSerial;
  setTimeout(()=>{setConnected(true);addLog('ok',T[lang].log_connected.replace('{name}',currentRobot.name));},500);
}else if(lastSerial){document.getElementById('serial-input').value=lastSerial;}

setInterval(pollRobot,3000);
setInterval(()=>{moodIdx=(moodIdx+1)%4;document.getElementById('mood-text').textContent=T[lang].moods[moodIdx];},4000);
applyLang('en');setConnected(connected);updateProfileUI();
if('serviceWorker' in navigator)navigator.serviceWorker.register('/sw.js');
</script>
</body>
                                                         </html><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ZIVO</title>
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#00b4ff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="ZIVO">
<meta name="mobile-web-app-capable" content="yes">
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#050a14;--blue:#00b4ff;--blue2:#0066cc;--blue-glow:rgba(0,180,255,0.3);--white:#e8f4ff;--gray:#3a5a7a;--danger:#ff4466;--success:#00ffaa;--warn:#ffaa00;--card:rgba(10,22,40,0.8);--gold:#ffd700}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--white);font-family:'Exo 2',sans-serif;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,180,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,180,255,0.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
.app{position:relative;z-index:1;max-width:420px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}
.header{padding:16px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,180,255,0.1)}
.logo{font-size:26px;font-weight:900;letter-spacing:4px;color:var(--white);text-shadow:0 0 20px var(--blue)}
.logo span{color:var(--blue)}
.header-right{display:flex;align-items:center;gap:8px;font-size:11px;font-family:'Share Tech Mono',monospace}
.status-dot{width:9px;height:9px;border-radius:50%}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)}}
.page{display:none;flex:1;padding:0 16px 100px}
.face-wrap{display:flex;flex-direction:column;align-items:center;padding:20px 0 10px}
.zivo-face{width:140px;height:140px;background:linear-gradient(135deg,#0d1f3a,#1a3a5c);border-radius:28px;border:2px solid var(--gray);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;transition:all .5s}
.zivo-face::before{content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,180,255,0.1),transparent);animation:scan 3s infinite}
@keyframes scan{0%{left:-100%}100%{left:200%}}
.eyes{display:flex;gap:24px;z-index:1}
.eye{width:28px;height:28px;background:var(--blue);border-radius:7px;box-shadow:0 0 16px var(--blue);animation:blink 4s infinite;position:relative;overflow:hidden}
.eye::after{content:'';position:absolute;top:4px;left:4px;width:8px;height:8px;background:rgba(255,255,255,.6);border-radius:2px}
@keyframes blink{0%,90%,100%{transform:scaleY(1)}95%{transform:scaleY(.1)}}
.zivo-name{margin-top:10px;font-size:20px;font-weight:900;letter-spacing:6px;color:var(--blue)}
.zivo-mood{font-size:10px;font-family:'Share Tech Mono',monospace;color:var(--gray);letter-spacing:2px;margin-top:2px}
.card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:16px;padding:16px;margin-bottom:10px;backdrop-filter:blur(10px)}
.section-title{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--gray);margin:18px 0 10px}
.stats-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin:12px 0}
.stat-card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:14px;padding:12px 8px;text-align:center}
.stat-value{font-size:18px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace}
.stat-label{font-size:9px;color:var(--gray);letter-spacing:1px;text-transform:uppercase;margin-top:2px}
.batt-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.batt-pct{font-family:'Share Tech Mono',monospace;font-size:16px;color:var(--success)}
.batt-bar{height:7px;background:rgba(0,180,255,0.1);border-radius:4px;overflow:hidden}
.batt-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--blue2),var(--blue));border-radius:4px;transition:width .5s}
.log-entry{display:flex;gap:8px;padding:9px 12px;background:var(--card);border:1px solid rgba(0,180,255,0.1);border-radius:11px;margin-bottom:7px;align-items:flex-start}
.log-time{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--gray);white-space:nowrap;padding-top:1px}
.log-text{font-size:12px;line-height:1.4}
.log-text.info{color:var(--blue)}.log-text.warn{color:var(--warn)}.log-text.ok{color:var(--success)}
.dpad{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;width:190px;margin:0 auto 20px}
.dpad-btn{height:52px;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;transition:all .15s;user-select:none}
.dpad-btn:active{background:var(--blue);box-shadow:0 0 16px var(--blue-glow);transform:scale(.95)}
.dpad-center{background:rgba(0,180,255,0.1);border-color:var(--blue);font-size:11px;font-weight:700;color:var(--blue)}
.dpad-empty{background:transparent;border:none}
.action-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px}
.action-btn{padding:14px;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:14px;text-align:center;cursor:pointer;transition:all .2s}
.action-btn:active{transform:scale(.97);border-color:var(--blue)}
.action-icon{font-size:22px;margin-bottom:5px}
.action-label{font-size:10px;letter-spacing:1px;text-transform:uppercase;color:var(--gray)}
.lang-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.lang-btn{padding:12px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;text-align:center;cursor:pointer;transition:all .2s}
.lang-btn.active{border-color:var(--blue);background:rgba(0,180,255,0.1)}
.lang-flag{font-size:24px}
.lang-name{font-size:10px;color:var(--gray);margin-top:3px}
.toggle-row{display:flex;align-items:center;justify-content:space-between;padding:14px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;margin-bottom:8px}
.toggle-label{font-size:13px;font-weight:600}
.toggle-desc{font-size:10px;color:var(--gray);margin-top:2px}
.toggle{width:46px;height:24px;background:var(--gray);border-radius:12px;position:relative;cursor:pointer;transition:background .2s;flex-shrink:0}
.toggle.on{background:var(--blue);box-shadow:0 0 8px var(--blue-glow)}
.toggle::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;background:white;border-radius:50%;transition:transform .2s}
.toggle.on::after{transform:translateX(22px)}
.boundary-map{width:100%;aspect-ratio:1;background:var(--card);border:1px solid rgba(0,180,255,0.2);border-radius:18px;position:relative;overflow:hidden;margin-bottom:14px}
.boundary-map::before{content:'';position:absolute;inset:0;background-image:linear-gradient(rgba(0,180,255,0.05) 1px,transparent 1px),linear-gradient(90deg,rgba(0,180,255,0.05) 1px,transparent 1px);background-size:28px 28px}
.boundary-zone{position:absolute;inset:28px;border:2px dashed var(--blue);border-radius:10px;box-shadow:0 0 16px var(--blue-glow)}
.zivo-dot{position:absolute;width:18px;height:18px;background:var(--blue);border-radius:5px;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 12px var(--blue);animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-5px)}}
.corner-handle{position:absolute;width:12px;height:12px;background:var(--blue);border-radius:3px}
.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.info-card{background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;padding:12px}
.info-card-label{font-size:9px;color:var(--gray);letter-spacing:1px;text-transform:uppercase}
.info-card-value{font-size:16px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace;margin-top:3px}
.bottom-nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:420px;background:rgba(5,10,20,0.97);border-top:1px solid rgba(0,180,255,0.15);display:flex;padding:8px 0 18px;backdrop-filter:blur(20px);z-index:100}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer;padding:5px 0;transition:all .2s}
.nav-icon{font-size:20px;filter:grayscale(1) opacity(.4);transition:all .2s}
.nav-label{font-size:8px;letter-spacing:1px;text-transform:uppercase;color:var(--gray)}
.nav-item.active .nav-icon{filter:none}
.nav-item.active .nav-label{color:var(--blue)}
#offline-banner{text-align:center;padding:14px 20px;color:var(--gray)}
.profile-header{display:flex;align-items:center;gap:14px;padding:16px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:16px;margin-bottom:10px}
.avatar{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--blue2),var(--blue));display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
.profile-name{font-size:18px;font-weight:700}
.profile-sub{font-size:11px;color:var(--gray);margin-top:2px}
.sub-badge{display:inline-block;padding:2px 8px;border-radius:20px;font-size:10px;font-weight:700;letter-spacing:1px;margin-top:4px}
.sub-badge.free{background:rgba(58,90,122,0.4);color:var(--gray);border:1px solid var(--gray)}
.sub-badge.pro{background:rgba(255,215,0,0.15);color:var(--gold);border:1px solid var(--gold)}
.sub-badge.trial{background:rgba(0,255,170,0.15);color:var(--success);border:1px solid var(--success)}
.input-row{margin-bottom:10px}
.input-label{font-size:10px;letter-spacing:2px;color:var(--gray);margin-bottom:5px}
.zivo-input{width:100%;background:rgba(0,180,255,0.05);border:1px solid rgba(0,180,255,0.25);border-radius:10px;padding:11px 13px;color:var(--white);font-family:'Exo 2',sans-serif;font-size:14px;outline:none}
.zivo-input:focus{border-color:var(--blue)}
.plan-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
.plan-card{background:var(--card);border:2px solid rgba(0,180,255,0.15);border-radius:16px;padding:16px;cursor:pointer;transition:all .2s;text-align:center;position:relative}
.plan-card.active{border-color:var(--blue);background:rgba(0,180,255,0.08)}
.plan-card.gold{border-color:var(--gold);background:rgba(255,215,0,0.05)}
.plan-card.gold.active{background:rgba(255,215,0,0.1)}
.plan-name{font-size:13px;font-weight:700;letter-spacing:1px}
.plan-price{font-size:22px;font-weight:900;color:var(--blue);font-family:'Share Tech Mono',monospace;margin:6px 0 2px}
.plan-card.gold .plan-price{color:var(--gold)}
.plan-period{font-size:10px;color:var(--gray)}
.plan-save{position:absolute;top:-8px;left:50%;transform:translateX(-50%);background:var(--success);color:#000;font-size:9px;font-weight:700;padding:2px 8px;border-radius:10px;letter-spacing:1px;white-space:nowrap}
.plan-forever{grid-column:1/-1}
.feature-list{margin:6px 0 0}
.feature-item{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:12px;border-bottom:1px solid rgba(0,180,255,0.07)}
.feature-item:last-child{border:none}
.feature-item .fi-icon{font-size:14px;width:20px;text-align:center}
.feature-locked{opacity:.4}
.btn-primary{width:100%;padding:14px;background:var(--blue);border:none;border-radius:12px;cursor:pointer;font-size:13px;font-weight:700;letter-spacing:2px;color:#000;font-family:'Exo 2',sans-serif;transition:all .2s;margin-top:4px}
.btn-primary:active{opacity:.8;transform:scale(.98)}
.btn-primary.gold{background:var(--gold);color:#000}
.btn-outline{width:100%;padding:13px;background:transparent;border:1px solid var(--blue);border-radius:12px;cursor:pointer;font-size:12px;font-weight:700;letter-spacing:2px;color:var(--blue);font-family:'Exo 2',sans-serif;transition:all .2s;margin-top:6px}
.trial-banner{background:linear-gradient(135deg,rgba(0,255,170,0.1),rgba(0,180,255,0.1));border:1px solid var(--success);border-radius:14px;padding:14px 16px;margin-bottom:14px;display:flex;align-items:center;gap:12px}
.trial-days{font-size:28px;font-weight:900;color:var(--success);font-family:'Share Tech Mono',monospace;min-width:40px}
.voice-grid{display:grid;gap:10px;margin-bottom:14px}
.voice-card{display:flex;align-items:center;gap:12px;padding:14px;background:var(--card);border:2px solid rgba(0,180,255,0.15);border-radius:14px;cursor:pointer;transition:all .2s}
.voice-card.active{border-color:var(--blue);background:rgba(0,180,255,0.08)}
.voice-card.locked{opacity:.5;cursor:default}
.voice-card.locked .lock-icon{display:flex}
.lock-icon{display:none;margin-left:auto;font-size:14px;color:var(--gold)}
.voice-avatar{width:42px;height:42px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.voice-name{font-size:14px;font-weight:700}
.voice-desc{font-size:11px;color:var(--gray);margin-top:1px}
.voice-play{margin-left:auto;width:32px;height:32px;border-radius:8px;background:rgba(0,180,255,0.1);border:1px solid rgba(0,180,255,0.3);display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;flex-shrink:0}
.smart-hero{background:linear-gradient(135deg,rgba(0,180,255,0.1),rgba(0,102,204,0.15));border:1px solid var(--blue);border-radius:16px;padding:18px;margin-bottom:14px;text-align:center}
.smart-hero-icon{font-size:36px;margin-bottom:8px}
.smart-hero-title{font-size:16px;font-weight:700;margin-bottom:4px}
.smart-hero-desc{font-size:11px;color:var(--gray);line-height:1.5}
.calc-display{background:rgba(0,0,0,0.4);border:1px solid rgba(0,180,255,0.2);border-radius:14px;padding:16px;margin-bottom:12px;min-height:80px;display:flex;flex-direction:column;justify-content:flex-end}
.calc-expr{font-size:12px;color:var(--gray);font-family:'Share Tech Mono',monospace;min-height:18px;word-break:break-all}
.calc-result{font-size:28px;font-weight:700;color:var(--blue);font-family:'Share Tech Mono',monospace;text-align:right;word-break:break-all}
.calc-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.calc-btn{height:54px;background:var(--card);border:1px solid rgba(0,180,255,0.15);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:600;cursor:pointer;transition:all .15s;user-select:none;color:var(--white)}
.calc-btn:active{transform:scale(.93)}
.calc-btn.op{color:var(--blue);border-color:rgba(0,180,255,0.3)}
.calc-btn.eq{background:var(--blue);color:#000;border-color:var(--blue)}
.calc-btn.clear{color:var(--danger);border-color:rgba(255,68,102,0.3)}
.calc-btn.wide{grid-column:span 2}
.calc-ai-btn{width:100%;margin-top:10px;padding:13px;background:linear-gradient(135deg,rgba(0,180,255,0.15),rgba(0,102,204,0.15));border:1px solid var(--blue);border-radius:12px;cursor:pointer;font-size:12px;font-weight:700;letter-spacing:1px;color:var(--blue);font-family:'Exo 2',sans-serif;transition:all .2s}
.calc-solution{background:rgba(0,180,255,0.05);border:1px solid rgba(0,180,255,0.2);border-radius:12px;padding:14px;margin-top:10px;font-size:13px;line-height:1.6;display:none}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:200;display:none;align-items:flex-end;justify-content:center;backdrop-filter:blur(4px)}
.modal-overlay.open{display:flex}
.modal{background:#0a1628;border:1px solid rgba(0,180,255,0.2);border-radius:20px 20px 0 0;padding:24px 20px 36px;width:100%;max-width:420px;max-height:85vh;overflow-y:auto}
.modal-title{font-size:18px;font-weight:700;margin-bottom:16px;text-align:center}
.modal-close{position:absolute;top:16px;right:20px;font-size:22px;cursor:pointer;color:var(--gray)}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="logo">ZI<span>V</span>O</div>
    <div class="header-right">
      <div class="status-dot" id="status-dot" style="background:var(--gray);box-shadow:none;animation:none;"></div>
      <span id="status-text" style="color:var(--gray)"></span>
    </div>
  </div>

  <div class="face-wrap">
    <div class="zivo-face" id="zivo-face">
      <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
    </div>
    <div class="zivo-name" id="bot-display-name">ZIVO</div>
    <div class="zivo-mood" id="mood-text"></div>
  </div>

  <div id="offline-banner">
    <div style="font-size:36px;margin-bottom:8px;">üì°</div>
    <div style="font-size:13px;font-weight:600;letter-spacing:2px;margin-bottom:4px;" data-t="not_connected"></div>
    <div style="font-size:11px;opacity:.6;margin-bottom:18px;" data-t="not_connected_desc"></div>
    <div class="card" style="text-align:left;">
      <div style="font-size:10px;letter-spacing:2px;color:var(--gray);margin-bottom:6px;" data-t="serial_label"></div>
      <input id="serial-input" type="text" maxlength="12" class="zivo-input" style="letter-spacing:3px;font-family:'Share Tech Mono',monospace;font-size:15px;text-transform:uppercase;" placeholder="ZIVO-XXXXXX" oninput="this.value=this.value.toUpperCase()"/>
      <div id="serial-error" style="font-size:11px;color:var(--danger);margin-top:6px;display:none;" data-t="serial_wrong"></div>
      <button onclick="tryConnect()" id="connect-btn" class="btn-primary" style="margin-top:12px;" data-t="connect_btn"></button>
    </div>
    <div style="margin-top:12px;font-size:11px;opacity:.4;" data-t="serial_hint"></div>
  </div>

  <div id="pages-wrapper" style="display:none">
    <div id="page-home" class="page" style="display:block">
      <div id="trial-banner" class="trial-banner" style="display:none">
        <div class="trial-days" id="trial-days-left">7</div>
        <div>
          <div style="font-size:13px;font-weight:700;" data-t="trial_active"></div>
          <div style="font-size:11px;color:var(--gray);margin-top:2px;" data-t="trial_desc"></div>
        </div>
      </div>
      <div class="stats-row">
        <div class="stat-card"><div class="stat-value" id="temp-val">--</div><div class="stat-label" data-t="temp"></div></div>
        <div class="stat-card"><div class="stat-value" id="uptime-val">--</div><div class="stat-label" data-t="uptime"></div></div>
        <div class="stat-card"><div class="stat-value">‚úì</div><div class="stat-label">Wi-Fi</div></div>
      </div>
      <div class="card">
        <div class="batt-header">
          <span style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--gray);" data-t="battery"></span>
          <span class="batt-pct" id="batt-text">--%</span>
        </div>
        <div class="batt-bar"><div class="batt-fill" id="batt-fill"></div></div>
      </div>
      <div class="section-title" data-t="log"></div>
      <div id="log-list"></div>
    </div>

    <div id="page-control" class="page">
      <div class="section-title" data-t="movement"></div>
      <div class="dpad">
        <div class="dpad-btn dpad-empty"></div>
        <div class="dpad-btn" onclick="sendCmd('forward')">‚ñ≤</div>
        <div class="dpad-btn dpad-empty"></div>
        <div class="dpad-btn" onclick="sendCmd('left')">‚óÑ</div>
        <div class="dpad-btn dpad-center">ZIVO</div>
        <div class="dpad-btn" onclick="sendCmd('right')">‚ñ∫</div>
        <div class="dpad-btn dpad-empty"></div>
        <div class="dpad-btn" onclick="sendCmd('backward')">‚ñº</div>
        <div class="dpad-btn dpad-empty"></div>
      </div>
      <div class="section-title" data-t="actions"></div>
      <div class="action-grid">
        <div class="action-btn" onclick="sendCmd('wake')"><div class="action-icon">üé§</div><div class="action-label" data-t="wakeup"></div></div>
        <div class="action-btn" onclick="sendCmd('sleep')"><div class="action-icon">üò¥</div><div class="action-label" data-t="sleep"></div></div>
        <div class="action-btn" onclick="sendCmd('charge')"><div class="action-icon">üîã</div><div class="action-label" data-t="charge"></div></div>
        <div class="action-btn" onclick="sendCmd('dance')"><div class="action-icon">üé≤</div><div class="action-label" data-t="random"></div></div>
      </div>
    </div>

    <div id="page-boundary" class="page">
      <div class="section-title" data-t="zonemap"></div>
      <div class="boundary-map">
        <div class="boundary-zone">
          <div class="corner-handle" style="top:-6px;left:-6px"></div>
          <div class="corner-handle" style="top:-6px;right:-6px"></div>
          <div class="corner-handle" style="bottom:-6px;left:-6px"></div>
          <div class="corner-handle" style="bottom:-6px;right:-6px"></div>
        </div>
        <div class="zivo-dot"></div>
      </div>
      <div class="info-grid">
        <div class="info-card"><div class="info-card-label" data-t="zonewidth"></div><div class="info-card-value">80cm</div></div>
        <div class="info-card"><div class="info-card-label" data-t="zonedepth"></div><div class="info-card-value">60cm</div></div>
        <div class="info-card"><div class="info-card-label" data-t="edgealerts"></div><div class="info-card-value" style="color:var(--success)" data-t="on"></div></div>
        <div class="info-card"><div class="info-card-label" data-t="falls"></div><div class="info-card-value">0</div></div>
      </div>
    </div>
  </div>

  <div id="page-settings" class="page" style="display:none">
    <div class="section-title" data-t="language"></div>
    <div class="lang-grid">
      <div class="lang-btn" onclick="selectLang(this,'ru')"><div class="lang-flag">üá∑üá∫</div><div class="lang-name">–†—É—Å—Å–∫–∏–π</div></div>
      <div class="lang-btn active" onclick="selectLang(this,'en')"><div class="lang-flag">üá∫üá∏</div><div class="lang-name">English</div></div>
      <div class="lang-btn" onclick="selectLang(this,'he')"><div class="lang-flag">üáÆüá±</div><div class="lang-name">◊¢◊ë◊®◊ô◊™</div></div>
      <div class="lang-btn" onclick="selectLang(this,'zh')"><div class="lang-flag">üá®üá≥</div><div class="lang-name">‰∏≠Êñá</div></div>
      <div class="lang-btn" onclick="selectLang(this,'uk')"><div class="lang-flag">üá∫üá¶</div><div class="lang-name">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</div></div>
    </div>
    <div class="section-title" data-t="features"></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="voiceact"></div><div class="toggle-desc" data-t="voiceact_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="edgeprot"></div><div class="toggle-desc" data-t="edgeprot_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="autocharge"></div><div class="toggle-desc" data-t="autocharge_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="explore"></div><div class="toggle-desc" data-t="explore_desc"></div></div><div class="toggle" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label" data-t="notifs"></div><div class="toggle-desc" data-t="notifs_desc"></div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
  </div>

  <div id="page-profile" class="page" style="display:none">
    <div class="profile-header">
      <div class="avatar" id="profile-avatar">ü§ñ</div>
      <div>
        <div class="profile-name" id="profile-name-display">User</div>
        <div class="profile-sub" data-t="member_since"></div>
        <div id="sub-badge-display" class="sub-badge free">FREE</div>
      </div>
    </div>
    <div class="section-title" data-t="your_info"></div>
    <div class="card">
      <div class="input-row">
        <div class="input-label" data-t="your_name"></div>
        <input id="user-name-input" class="zivo-input" type="text" placeholder="Your name" oninput="saveProfile()"/>
      </div>
      <div class="input-row" style="margin-bottom:0">
        <div class="input-label" data-t="bot_custom_name"></div>
        <input id="bot-name-input" class="zivo-input" type="text" placeholder="ZIVO" oninput="saveBotName()"/>
      </div>
    </div>
    <div class="section-title" data-t="smart_mode"></div>
    <div class="smart-hero">
      <div class="smart-hero-icon">üß†</div>
      <div class="smart-hero-title" data-t="smart_mode_title"></div>
      <div class="smart-hero-desc" data-t="smart_mode_desc"></div>
    </div>
    <div class="toggle-row" id="smart-mode-toggle-row">
      <div><div class="toggle-label" data-t="smart_mode_label"></div><div class="toggle-desc" data-t="smart_mode_sub"></div></div>
      <div class="toggle" id="smart-toggle" onclick="toggleSmartMode()"></div>
    </div>
    <div class="section-title" data-t="voice_section"></div>
    <div class="voice-grid" id="voice-list"></div>
    <div id="voice-locked-msg" style="display:none;text-align:center;padding:10px;font-size:11px;color:var(--gold);" data-t="voice_locked_msg"></div>
    <div class="section-title" data-t="subscription"></div>
    <div id="sub-current-info" class="card" style="margin-bottom:10px;"></div>
    <button class="btn-outline" onclick="openSubModal()" data-t="manage_sub"></button>
  </div>

  <div id="page-calc" class="page" style="display:none">
    <div class="section-title" data-t="calculator"></div>
    <div class="calc-display">
      <div class="calc-expr" id="calc-expr"></div>
      <div class="calc-result" id="calc-result">0</div>
    </div>
    <div class="calc-grid">
      <div class="calc-btn clear" onclick="calcClear()">C</div>
      <div class="calc-btn op" onclick="calcInput('(')">(</div>
      <div class="calc-btn op" onclick="calcInput(')')">)</div>
      <div class="calc-btn op" onclick="calcInput('/')">√∑</div>
      <div class="calc-btn" onclick="calcInput('7')">7</div>
      <div class="calc-btn" onclick="calcInput('8')">8</div>
      <div class="calc-btn" onclick="calcInput('9')">9</div>
      <div class="calc-btn op" onclick="calcInput('*')">√ó</div>
      <div class="calc-btn" onclick="calcInput('4')">4</div>
      <div class="calc-btn" onclick="calcInput('5')">5</div>
      <div class="calc-btn" onclick="calcInput('6')">6</div>
      <div class="calc-btn op" onclick="calcInput('-')">‚àí</div>
      <div class="calc-btn" onclick="calcInput('1')">1</div>
      <div class="calc-btn" onclick="calcInput('2')">2</div>
      <div class="calc-btn" onclick="calcInput('3')">3</div>
      <div class="calc-btn op" onclick="calcInput('+')">+</div>
      <div class="calc-btn" onclick="calcInput('0')">0</div>
      <div class="calc-btn" onclick="calcInput('.')">.</div>
      <div class="calc-btn op" onclick="calcInput('^')">x‚Åø</div>
      <div class="calc-btn eq" onclick="calcEquals()">=</div>
      <div class="calc-btn op wide" onclick="calcInput('sqrt(')">‚àö</div>
      <div class="calc-btn op" onclick="calcInput('Math.PI')">œÄ</div>
      <div class="calc-btn op" onclick="calcBackspace()">‚å´</div>
    </div>
    <button class="calc-ai-btn" id="ai-solve-btn" onclick="aiSolve()">üß† <span data-t="ai_solve"></span></button>
    <div id="ai-locked-calc" style="display:none;text-align:center;padding:12px;font-size:11px;color:var(--gold);cursor:pointer;" onclick="openSubModal()" data-t="calc_locked"></div>
    <div class="calc-solution" id="calc-solution"></div>
  </div>

  <div class="bottom-nav">
    <div class="nav-item active" onclick="switchPage('home',this)"><div class="nav-icon">ü§ñ</div><div class="nav-label">ZIVO</div></div>
    <div class="nav-item" onclick="switchPage('control',this)"><div class="nav-icon">üïπÔ∏è</div><div class="nav-label" data-t="nav_control"></div></div>
    <div class="nav-item" onclick="switchPage('boundary',this)"><div class="nav-icon">üìç</div><div class="nav-label" data-t="nav_zone"></div></div>
    <div class="nav-item" onclick="switchPage('calc',this)"><div class="nav-icon">üßÆ</div><div class="nav-label" data-t="nav_calc"></div></div>
    <div class="nav-item" onclick="switchPage('profile',this)"><div class="nav-icon">üë§</div><div class="nav-label" data-t="nav_profile"></div></div>
    <div class="nav-item" onclick="switchPage('settings',this)"><div class="nav-icon">‚öôÔ∏è</div><div class="nav-label" data-t="nav_settings"></div></div>
  </div>
</div>

<div class="modal-overlay" id="sub-modal">
  <div class="modal" style="position:relative">
    <div class="modal-close" onclick="closeSubModal()">‚úï</div>
    <div class="modal-title" data-t="choose_plan"></div>
    <div id="modal-trial-info" style="display:none;background:rgba(0,255,170,0.08);border:1px solid var(--success);border-radius:12px;padding:12px;margin-bottom:14px;font-size:12px;text-align:center;color:var(--success);" data-t="trial_modal_info"></div>
    <div class="plan-grid">
      <div class="plan-card" id="plan-monthly" onclick="selectPlan('monthly')">
        <div class="plan-name" data-t="plan_monthly"></div>
        <div class="plan-price" id="price-monthly">‚Äî</div>
        <div class="plan-period" data-t="per_month"></div>
      </div>
      <div class="plan-card" id="plan-yearly" onclick="selectPlan('yearly')">
        <div class="plan-save" data-t="save_40"></div>
        <div class="plan-name" data-t="plan_yearly"></div>
        <div class="plan-price" id="price-yearly">‚Äî</div>
        <div class="plan-period" data-t="per_month_billed"></div>
      </div>
      <div class="plan-card gold plan-forever" id="plan-forever" onclick="selectPlan('forever')">
        <div class="plan-name" data-t="plan_forever"></div>
        <div class="plan-price" style="color:var(--gold)" id="price-forever">‚Äî</div>
        <div class="plan-period" data-t="one_time"></div>
      </div>
    </div>
    <div class="section-title" data-t="whats_included"></div>
    <div class="feature-list">
      <div class="feature-item"><span class="fi-icon">‚úÖ</span><span data-t="feat_basic"></span></div>
      <div class="feature-item"><span class="fi-icon">‚úÖ</span><span data-t="feat_control"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_voices"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_smart"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_calc"></span></div>
      <div class="feature-item"><span class="fi-icon">üîí</span><span class="feature-locked" data-t="feat_custom_name"></span></div>
    </div>
    <button class="btn-primary" id="sub-btn" onclick="subscribePlan()" data-t="subscribe_btn"></button>
    <button class="btn-outline" onclick="closeSubModal()" style="margin-top:8px;" data-t="maybe_later"></button>
  </div>
</div>

<script>
const REGISTERED_ROBOTS = {
  'ZIVO-ADMINMW': { name: 'ZIVO #1', owner: 'Admin' },
};

const VOICES = [
  { id:'default', emoji:'ü§ñ', name:'ZIVO',  desc_key:'voice_default_desc', free:true  },
  { id:'sage',    emoji:'üßô', name:'Sage',  desc_key:'voice_sage_desc',    free:false },
  { id:'nova',    emoji:'‚ö°', name:'Nova',  desc_key:'voice_nova_desc',    free:false },
  { id:'echo',    emoji:'üåä', name:'Echo',  desc_key:'voice_echo_desc',    free:false },
  { id:'spark',   emoji:'üî•', name:'Spark', desc_key:'voice_spark_desc',   free:false },
  { id:'atlas',   emoji:'üåç', name:'Atlas', desc_key:'voice_atlas_desc',   free:false },
  { id:'luna',    emoji:'üåô', name:'Luna',  desc_key:'voice_luna_desc',    free:false },
  { id:'titan',   emoji:'‚öôÔ∏è', name:'Titan', desc_key:'voice_titan_desc',   free:false },
  { id:'pixel',   emoji:'üëæ', name:'Pixel', desc_key:'voice_pixel_desc',   free:false },
  { id:'zen',     emoji:'üçÉ', name:'Zen',   desc_key:'voice_zen_desc',     free:false },
];

const T = {
  ru:{online:'–í –°–ï–¢–ò',temp:'–¢–ï–ú–ü',uptime:'–í–†–ï–ú–Ø',battery:'–ë–ê–¢–ê–†–ï–Ø',log:'–ñ–£–†–ù–ê–õ',movement:'–î–í–ò–ñ–ï–ù–ò–ï',actions:'–î–ï–ô–°–¢–í–ò–Ø',wakeup:'–†–ê–ó–ë–£–î–ò–¢–¨',sleep:'–°–ü–ê–¢–¨',charge:'–ù–ê –ó–ê–†–Ø–î–ö–£',random:'–¢–ê–ù–ï–¶',zonemap:'–ö–ê–†–¢–ê –ó–û–ù–´',zonewidth:'–®–ò–†–ò–ù–ê',zonedepth:'–ì–õ–£–ë–ò–ù–ê',edgealerts:'–ó–ê–©–ò–¢–ê –ö–†–ê–Ø',on:'–í–ö–õ',falls:'–ü–ê–î–ï–ù–ò–ô',language:'–Ø–ó–´–ö',features:'–§–£–ù–ö–¶–ò–ò',voiceact:'–ì–æ–ª–æ—Å–æ–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è',voiceact_desc:'–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ—Ä–∞–∑–æ–π "–ü—Ä–∏–≤–µ—Ç ZIVO"',edgeprot:'–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞–¥–µ–Ω–∏—è',edgeprot_desc:'–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è —É –∫—Ä–∞—è —Å—Ç–æ–ª–∞',autocharge:'–ê–≤—Ç–æ –∑–∞—Ä—è–¥–∫–∞',autocharge_desc:'–ï—Ö–∞—Ç—å –Ω–∞ –±–∞–∑—É –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∑–∞—Ä—è–¥–µ',explore:'–°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏',explore_desc:'ZIVO –µ–∑–¥–∏—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ',notifs:'–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',notifs_desc:'–ó–∞—Ä—è–¥ –∏ –∑–∞—â–∏—Ç–∞ –∫—Ä–∞—è',nav_control:'–£–ü–†–ê–í–õ–ï–ù–ò–ï',nav_zone:'–ó–û–ù–ê',nav_settings:'–ù–ê–°–¢–†–û–ô–ö–ò',nav_calc:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',nav_profile:'–ü–†–û–§–ò–õ–¨',moods:['–ì–û–¢–û–í ‚Ä¢ –°–õ–£–®–ê–Æ','–ò–°–°–õ–ï–î–£–Æ','–°–ß–ê–°–¢–õ–ò–í','–ñ–î–£ –ö–û–ú–ê–ù–î–´'],log_connected:'–ü–æ–¥–∫–ª—é—á—ë–Ω –∫ {name}',upfmt:(h,m)=>h+'—á'+String(m).padStart(2,'0')+'–º',offline:'–ù–ï –ü–û–î–ö–õ–Æ–ß–Å–ù',not_connected:'ZIVO –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω',not_connected_desc:'–í–≤–µ–¥–∏ —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä',connect_btn:'–ü–û–î–ö–õ–Æ–ß–ò–¢–¨',serial_label:'–°–ï–†–ò–ô–ù–´–ô –ù–û–ú–ï–†',serial_wrong:'–ù–µ–≤–µ—Ä–Ω—ã–π —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä.',serial_hint:'–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä –Ω–∞ –Ω–∞–∫–ª–µ–π–∫–µ –Ω–∞ –¥–Ω–µ –∫–æ—Ä–ø—É—Å–∞',member_since:'–£—á–∞—Å—Ç–Ω–∏–∫ ZIVO',your_info:'–ò–ù–§–û–†–ú–ê–¶–ò–Ø',your_name:'–¢–í–û–Å –ò–ú–Ø',bot_custom_name:'–ò–ú–Ø –ë–û–¢–ê (—É–º–Ω—ã–π —Ä–µ–∂–∏–º)',smart_mode:'–£–ú–ù–´–ô –†–ï–ñ–ò–ú',smart_mode_title:'–£–º–Ω—ã–π —Ä–µ–∂–∏–º',smart_mode_desc:'–ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–≤–æ—ë –∏–º—è –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –≤—ã–±—Ä–∞–ª. –¢–æ–ª—å–∫–æ –ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è.',smart_mode_label:'–í–∫–ª—é—á–∏—Ç—å —É–º–Ω—ã–π —Ä–µ–∂–∏–º',smart_mode_sub:'–ë–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–≤–æ—ë –∏–º—è',voice_section:'–ì–û–õ–û–° –ë–û–¢–ê',voice_default_desc:'–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≥–æ–ª–æ—Å ZIVO',voice_sage_desc:'–ú—É–¥—Ä—ã–π –∏ —Å–ø–æ–∫–æ–π–Ω—ã–π',voice_nova_desc:'–≠–Ω–µ—Ä–≥–∏—á–Ω—ã–π –∏ –º–æ–ª–æ–¥–æ–π',voice_echo_desc:'–ì–ª—É–±–æ–∫–∏–π –∏ –æ–±—ä—ë–º–Ω—ã–π',voice_spark_desc:'–í–µ—Å—ë–ª—ã–π –∏ –∏–≥—Ä–∏–≤—ã–π',voice_atlas_desc:'–ú–æ—â–Ω—ã–π –∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π',voice_luna_desc:'–ú—è–≥–∫–∏–π –∏ –ª—É–Ω–Ω—ã–π',voice_titan_desc:'–†–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π',voice_pixel_desc:'–¶–∏—Ñ—Ä–æ–≤–æ–π –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π',voice_zen_desc:'–°–ø–æ–∫–æ–π–Ω—ã–π –∏ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π',voice_locked_msg:'üîí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–æ–ª–æ—Å–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Pro –≤–µ—Ä—Å–∏–∏',subscription:'–ü–û–î–ü–ò–°–ö–ê',manage_sub:'–£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–î–ü–ò–°–ö–û–ô',trial_active:'–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω!',trial_desc:'–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ',choose_plan:'–í–´–ë–ï–†–ò –ü–õ–ê–ù',plan_monthly:'–ú–µ—Å—è—Ü',plan_yearly:'–ì–æ–¥',plan_forever:'–ù–∞–≤—Å–µ–≥–¥–∞',per_month:'/–º–µ—Å—è—Ü',per_month_billed:'–≤ –º–µ—Å—è—Ü (–≥–æ–¥)',one_time:'–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂',save_40:'–°–ö–ò–î–ö–ê 40%',whats_included:'–ß–¢–û –í–ö–õ–Æ–ß–ï–ù–û',feat_basic:'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–º',feat_control:'–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã',feat_voices:'10 –≥–æ–ª–æ—Å–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä',feat_smart:'–£–º–Ω—ã–π —Ä–µ–∂–∏–º + —Å–≤–æ—ë –∏–º—è',feat_calc:'–£–º–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –ò–ò',feat_custom_name:'–ö–∞—Å—Ç–æ–º–Ω–æ–µ –∏–º—è –±–æ—Ç–∞',subscribe_btn:'–ü–û–î–ö–õ–Æ–ß–ò–¢–¨ PRO',maybe_later:'–ü–æ–∑–∂–µ',trial_modal_info:'–£ —Ç–µ–±—è –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ ‚Äî –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç—ã!',calculator:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',ai_solve:'–†–µ—à–∏—Ç—å —Å–ª–æ–∂–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ (–ò–ò)',calc_locked:'üîí –£–º–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Pro. –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å.',ai_solving:'–†–µ—à–∞—é...'},
  en:{online:'ONLINE',temp:'TEMP',uptime:'UPTIME',battery:'BATTERY',log:'LOG',movement:'MOVEMENT',actions:'ACTIONS',wakeup:'WAKE UP',sleep:'SLEEP',charge:'GO CHARGE',random:'DANCE',zonemap:'SAFE ZONE MAP',zonewidth:'WIDTH',zonedepth:'DEPTH',edgealerts:'EDGE ALERTS',on:'ON',falls:'FALLS',language:'LANGUAGE',features:'FEATURES',voiceact:'Voice Activation',voiceact_desc:'Wake up with "Hey ZIVO"',edgeprot:'Edge Protection',edgeprot_desc:'Stop at table edges',autocharge:'Auto Charging',autocharge_desc:'Return to base when low',explore:'Random Explore',explore_desc:'ZIVO moves on its own',notifs:'Notifications',notifs_desc:'Battery and edge alerts',nav_control:'CONTROL',nav_zone:'ZONE',nav_settings:'SETTINGS',nav_calc:'CALC',nav_profile:'PROFILE',moods:['READY ‚Ä¢ LISTENING','EXPLORING','HAPPY','IDLE ‚Ä¢ WAITING'],log_connected:'Connected to {name}',upfmt:(h,m)=>h+'h'+String(m).padStart(2,'0')+'m',offline:'DISCONNECTED',not_connected:'ZIVO is not connected',not_connected_desc:'Enter your ZIVO serial number',connect_btn:'CONNECT',serial_label:'SERIAL NUMBER',serial_wrong:'Wrong serial number.',serial_hint:'Serial number is on the sticker on the bottom',member_since:'ZIVO Member',your_info:'YOUR INFO',your_name:'YOUR NAME',bot_custom_name:'BOT NAME (smart mode)',smart_mode:'SMART MODE',smart_mode_title:'Smart Mode',smart_mode_desc:'Your bot responds to a custom name you choose. Pro only.',smart_mode_label:'Enable Smart Mode',smart_mode_sub:'Bot responds to its name',voice_section:'BOT VOICE',voice_default_desc:'Default ZIVO voice',voice_sage_desc:'Wise and calm',voice_nova_desc:'Energetic and young',voice_echo_desc:'Deep and rich',voice_spark_desc:'Fun and playful',voice_atlas_desc:'Powerful and authoritative',voice_luna_desc:'Soft and dreamy',voice_titan_desc:'Robotic and precise',voice_pixel_desc:'Digital and techy',voice_zen_desc:'Calm and meditative',voice_locked_msg:'üîí Extra voices available in Pro',subscription:'SUBSCRIPTION',manage_sub:'MANAGE SUBSCRIPTION',trial_active:'Free trial is active!',trial_desc:'All features unlocked',choose_plan:'CHOOSE YOUR PLAN',plan_monthly:'Monthly',plan_yearly:'Yearly',plan_forever:'Forever',per_month:'/month',per_month_billed:'/mo billed yearly',one_time:'one-time payment',save_40:'SAVE 40%',whats_included:"WHAT'S INCLUDED",feat_basic:'Robot control',feat_control:'Basic commands',feat_voices:'10 voices to choose',feat_smart:'Smart mode + custom name',feat_calc:'Smart AI calculator',feat_custom_name:'Custom bot name',subscribe_btn:'GET PRO',maybe_later:'Maybe later',trial_modal_info:'Your free trial is active ‚Äî all features are unlocked!',calculator:'CALCULATOR',ai_solve:'Solve complex equation (AI)',calc_locked:'üîí Smart calculator available in Pro. Tap to unlock.',ai_solving:'Solving...'},
  he:{online:'◊û◊ó◊ï◊ë◊®',temp:'◊ò◊û◊§',uptime:'◊ñ◊û◊ü',battery:'◊°◊ï◊ú◊ú◊î',log:'◊ô◊ï◊û◊ü',movement:'◊™◊†◊ï◊¢◊î',actions:'◊§◊¢◊ï◊ú◊ï◊™',wakeup:'◊î◊™◊¢◊ï◊®◊®',sleep:'◊©◊ô◊†◊î',charge:'◊ú◊ò◊¢◊ô◊†◊î',random:'◊ú◊®◊ß◊ï◊ì',zonemap:'◊û◊§◊™ ◊ê◊ñ◊ï◊®',zonewidth:'◊®◊ï◊ó◊ë',zonedepth:'◊¢◊ï◊û◊ß',edgealerts:'◊î◊í◊†◊™ ◊ß◊¶◊î',on:'◊§◊ï◊¢◊ú',falls:'◊†◊§◊ô◊ú◊ï◊™',language:'◊©◊§◊î',features:'◊™◊õ◊ï◊†◊ï◊™',voiceact:'◊î◊§◊¢◊ú◊î ◊ß◊ï◊ú◊ô◊™',voiceact_desc:'◊î◊§◊¢◊ú◊î ◊¢◊ù "◊î◊ô◊ô ZIVO"',edgeprot:'◊î◊í◊†◊î ◊û◊†◊§◊ô◊ú◊î',edgeprot_desc:'◊¢◊¶◊ï◊® ◊ë◊ß◊¶◊î ◊î◊©◊ï◊ú◊ó◊ü',autocharge:'◊ò◊¢◊ô◊†◊î ◊ê◊ï◊ò◊ï◊û◊ò◊ô◊™',autocharge_desc:'◊ó◊ñ◊ï◊® ◊ú◊ë◊°◊ô◊° ◊õ◊©◊î◊°◊ï◊ú◊ú◊î ◊†◊û◊ï◊õ◊î',explore:'◊°◊ô◊ï◊® ◊ê◊ß◊®◊ê◊ô',explore_desc:'ZIVO ◊†◊ï◊°◊¢ ◊ú◊ë◊ì',notifs:'◊î◊™◊®◊ê◊ï◊™',notifs_desc:'◊°◊ï◊ú◊ú◊î ◊ï◊î◊í◊†◊™ ◊ß◊¶◊î',nav_control:'◊©◊ú◊ô◊ò◊î',nav_zone:'◊ê◊ñ◊ï◊®',nav_settings:'◊î◊í◊ì◊®◊ï◊™',nav_calc:'◊û◊ó◊©◊ë◊ï◊ü',nav_profile:'◊§◊®◊ï◊§◊ô◊ú',moods:['◊û◊ï◊õ◊ü ‚Ä¢ ◊û◊ß◊©◊ô◊ë','◊ó◊ï◊ß◊®','◊©◊û◊ó','◊û◊û◊™◊ô◊ü'],log_connected:'◊û◊ó◊ï◊ë◊® ◊ú-{name}',upfmt:(h,m)=>h+'◊©'+String(m).padStart(2,'0')+'◊ì',offline:'◊û◊†◊ï◊™◊ß',not_connected:'ZIVO ◊ú◊ê ◊û◊ó◊ï◊ë◊®',not_connected_desc:'◊î◊ñ◊ü ◊ê◊™ ◊î◊û◊°◊§◊® ◊î◊°◊ô◊ì◊ï◊®◊ô',connect_btn:'◊î◊™◊ó◊ë◊®',serial_label:'◊û◊°◊§◊® ◊°◊ô◊ì◊ï◊®◊ô',serial_wrong:'◊û◊°◊§◊® ◊°◊ô◊ì◊ï◊®◊ô ◊©◊í◊ï◊ô.',serial_hint:'◊î◊û◊°◊§◊® ◊î◊°◊ô◊ì◊ï◊®◊ô ◊†◊û◊¶◊ê ◊ë◊™◊ó◊™◊ô◊™ ZIVO',member_since:'◊ó◊ë◊® ZIVO',your_info:'◊§◊®◊ò◊ô◊ù',your_name:'◊©◊û◊ö',bot_custom_name:'◊©◊ù ◊î◊ë◊ï◊ò (◊û◊¶◊ë ◊ó◊õ◊ù)',smart_mode:'◊û◊¶◊ë ◊ó◊õ◊ù',smart_mode_title:'◊û◊¶◊ë ◊ó◊õ◊ù',smart_mode_desc:'◊î◊ë◊ï◊ò ◊û◊í◊ô◊ë ◊ú◊©◊ù ◊©◊ë◊ó◊®◊™. Pro ◊ë◊ú◊ë◊ì.',smart_mode_label:'◊î◊§◊¢◊ú ◊û◊¶◊ë ◊ó◊õ◊ù',smart_mode_sub:'◊î◊ë◊ï◊ò ◊û◊í◊ô◊ë ◊ú◊©◊û◊ï',voice_section:'◊ß◊ï◊ú ◊î◊ë◊ï◊ò',voice_default_desc:'◊ß◊ï◊ú ZIVO ◊ë◊®◊ô◊®◊™ ◊û◊ó◊ì◊ú',voice_sage_desc:'◊ó◊õ◊ù ◊ï◊®◊í◊ï◊¢',voice_nova_desc:'◊ê◊†◊®◊í◊ò◊ô ◊ï◊¶◊¢◊ô◊®',voice_echo_desc:'◊¢◊û◊ï◊ß ◊ï◊¢◊©◊ô◊®',voice_spark_desc:'◊õ◊ô◊§◊ô ◊ï◊©◊ï◊ë◊ë◊ô',voice_atlas_desc:'◊ó◊ñ◊ß ◊ï◊°◊û◊õ◊ï◊™◊ô',voice_luna_desc:'◊®◊ö ◊ï◊ó◊ú◊ï◊û◊ô',voice_titan_desc:'◊®◊ï◊ë◊ï◊ò◊ô ◊ï◊û◊ì◊ï◊ô◊ß',voice_pixel_desc:'◊ì◊ô◊í◊ô◊ò◊ú◊ô ◊ï◊ò◊õ◊†◊ï◊ú◊ï◊í◊ô',voice_zen_desc:'◊®◊í◊ï◊¢ ◊ï◊û◊ì◊ô◊ò◊ò◊ô◊ë◊ô',voice_locked_msg:'üîí ◊ß◊ï◊ú◊ï◊™ ◊†◊ï◊°◊§◊ô◊ù ◊ñ◊û◊ô◊†◊ô◊ù ◊ë-Pro',subscription:'◊û◊†◊ï◊ô',manage_sub:'◊†◊ô◊î◊ï◊ú ◊û◊†◊ï◊ô',trial_active:'◊™◊ß◊ï◊§◊™ ◊†◊ô◊°◊ô◊ï◊ü ◊§◊¢◊ô◊ú◊î!',trial_desc:'◊õ◊ú ◊î◊§◊ï◊†◊ß◊¶◊ô◊ï◊™ ◊§◊™◊ï◊ó◊ï◊™',choose_plan:'◊ë◊ó◊® ◊™◊ï◊õ◊†◊ô◊™',plan_monthly:'◊ó◊ï◊ì◊©◊ô',plan_yearly:'◊©◊†◊™◊ô',plan_forever:'◊ú◊¶◊û◊ô◊™◊ï◊™',per_month:'/◊ó◊ï◊ì◊©',per_month_billed:'/◊ó◊ï◊ì◊© (◊©◊†◊™◊ô)',one_time:'◊™◊©◊ú◊ï◊ù ◊ó◊ì ◊§◊¢◊û◊ô',save_40:'◊ó◊°◊ï◊ö 40%',whats_included:'◊û◊î ◊õ◊ú◊ï◊ú',feat_basic:'◊©◊ú◊ô◊ò◊î ◊ë◊ë◊ï◊ò',feat_control:'◊§◊ß◊ï◊ì◊ï◊™ ◊ë◊°◊ô◊°◊ô◊ï◊™',feat_voices:'10 ◊ß◊ï◊ú◊ï◊™ ◊ú◊ë◊ó◊ô◊®◊î',feat_smart:'◊û◊¶◊ë ◊ó◊õ◊ù + ◊©◊ù ◊û◊ï◊™◊ê◊ù',feat_calc:'◊û◊ó◊©◊ë◊ï◊ü AI ◊ó◊õ◊ù',feat_custom_name:'◊©◊ù ◊ë◊ï◊ò ◊û◊ï◊™◊ê◊ù',subscribe_btn:'◊î◊¶◊ò◊®◊£ ◊ú-Pro',maybe_later:'◊ê◊ï◊ú◊ô ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊®',trial_modal_info:'◊™◊ß◊ï◊§◊™ ◊î◊†◊ô◊°◊ô◊ï◊ü ◊©◊ú◊ö ◊§◊¢◊ô◊ú◊î ‚Äî ◊õ◊ú ◊î◊§◊ï◊†◊ß◊¶◊ô◊ï◊™ ◊§◊™◊ï◊ó◊ï◊™!',calculator:'◊û◊ó◊©◊ë◊ï◊ü',ai_solve:'◊§◊™◊ï◊® ◊û◊©◊ï◊ï◊ê◊î ◊û◊ï◊®◊õ◊ë◊™ (AI)',calc_locked:'üîí ◊û◊ó◊©◊ë◊ï◊ü ◊ó◊õ◊ù ◊ñ◊û◊ô◊ü ◊ë-Pro. ◊ú◊ó◊• ◊ú◊§◊™◊ô◊ó◊î.',ai_solving:'◊§◊ï◊™◊®...'},
  zh:{online:'Âú®Á∫ø',temp:'Ê∏©Â∫¶',uptime:'ËøêË°å',battery:'ÁîµÊ±†',log:'Êó•Âøó',movement:'ÁßªÂä®',actions:'Êìç‰Ωú',wakeup:'Âî§ÈÜí',sleep:'Áù°Áú†',charge:'ÂéªÂÖÖÁîµ',random:'Ë∑≥Ëàû',zonemap:'ÂÆâÂÖ®Âå∫Âüü',zonewidth:'ÂÆΩÂ∫¶',zonedepth:'Ê∑±Â∫¶',edgealerts:'ËæπÁºò‰øùÊä§',on:'ÂºÄÂêØ',falls:'Ë∑åËêΩ',language:'ËØ≠Ë®Ä',features:'ÂäüËÉΩ',voiceact:'ËØ≠Èü≥ÊøÄÊ¥ª',voiceact_desc:'ËØ¥"Âòø ZIVO"Âî§ÈÜí',edgeprot:'Èò≤Ë∑åËêΩ',edgeprot_desc:'Âú®Ê°åÂ≠êËæπÁºòÂÅú‰∏ã',autocharge:'Ëá™Âä®ÂÖÖÁîµ',autocharge_desc:'ÁîµÈáè‰ΩéÊó∂ËøîÂõûÂÖÖÁîµ',explore:'ÈöèÊú∫Êé¢Á¥¢',explore_desc:'ZIVO Ëá™‰∏ªÁßªÂä®',notifs:'ÈÄöÁü•',notifs_desc:'ÁîµÊ±†ÂíåËæπÁºòË≠¶Êä•',nav_control:'ÊéßÂà∂',nav_zone:'Âå∫Âüü',nav_settings:'ËÆæÁΩÆ',nav_calc:'ËÆ°ÁÆóÂô®',nav_profile:'‰∏™‰∫∫',moods:['ÂáÜÂ§áÂ•Ω‰∫Ü','Êé¢Á¥¢‰∏≠','ÂºÄÂøÉ','Á≠âÂæÖÂëΩ‰ª§'],log_connected:'Â∑≤ËøûÊé•Âà∞ {name}',upfmt:(h,m)=>h+'Êó∂'+String(m).padStart(2,'0')+'ÂàÜ',offline:'Êú™ËøûÊé•',not_connected:'ZIVO Êú™ËøûÊé•',not_connected_desc:'ËæìÂÖ•Â∫èÂàóÂè∑',connect_btn:'ËøûÊé•',serial_label:'Â∫èÂàóÂè∑',serial_wrong:'Â∫èÂàóÂè∑ÈîôËØØ„ÄÇ',serial_hint:'Â∫èÂàóÂè∑Âú® ZIVO Â∫ïÈÉ®ÁöÑË¥¥Á∫∏‰∏ä',member_since:'ZIVO ‰ºöÂëò',your_info:'‰∏™‰∫∫‰ø°ÊÅØ',your_name:'‰Ω†ÁöÑÂêçÂ≠ó',bot_custom_name:'Êú∫Âô®‰∫∫ÂêçÁß∞ÔºàÊô∫ËÉΩÊ®°ÂºèÔºâ',smart_mode:'Êô∫ËÉΩÊ®°Âºè',smart_mode_title:'Êô∫ËÉΩÊ®°Âºè',smart_mode_desc:'Êú∫Âô®‰∫∫ÂìçÂ∫î‰Ω†ÈÄâÊã©ÁöÑÂêçÂ≠ó„ÄÇ‰ªÖÈôêPro„ÄÇ',smart_mode_label:'ÂêØÁî®Êô∫ËÉΩÊ®°Âºè',smart_mode_sub:'Êú∫Âô®‰∫∫ÂìçÂ∫îÂÖ∂ÂêçÂ≠ó',voice_section:'Êú∫Âô®‰∫∫Â£∞Èü≥',voice_default_desc:'ÈªòËÆ§ZIVOÂ£∞Èü≥',voice_sage_desc:'ÁùøÊô∫Âπ≥Èùô',voice_nova_desc:'ÂÖÖÊª°Ê¥ªÂäõ',voice_echo_desc:'Ê∑±Ê≤â‰∏∞ÂØå',voice_spark_desc:'ÊúâË∂£Ê¥ªÊ≥º',voice_atlas_desc:'Âº∫Â§ßÊùÉÂ®Å',voice_luna_desc:'ÊüîÂíåÊ¢¶Âπª',voice_titan_desc:'Êú∫Âô®‰∫∫Á≤æÂáÜ',voice_pixel_desc:'Êï∞Â≠óÁßëÊäÄ',voice_zen_desc:'Âπ≥ÈùôÂÜ•ÊÉ≥',voice_locked_msg:'üîí Êõ¥Â§öÂ£∞Èü≥Âú®ProÁâàÊú¨‰∏≠ÂèØÁî®',subscription:'ËÆ¢ÈòÖ',manage_sub:'ÁÆ°ÁêÜËÆ¢ÈòÖ',trial_active:'ËØïÁî®ÊúüÊøÄÊ¥ªÔºÅ',trial_desc:'ÊâÄÊúâÂäüËÉΩÂÖçË¥π',choose_plan:'ÈÄâÊã©ÊñπÊ°à',plan_monthly:'ÊúàÂ∫¶',plan_yearly:'Âπ¥Â∫¶',plan_forever:'Ê∞∏‰πÖ',per_month:'/Êúà',per_month_billed:'/ÊúàÔºàÂπ¥‰ªòÔºâ',one_time:'‰∏ÄÊ¨°ÊÄß‰ªòÊ¨æ',save_40:'ËäÇÁúÅ40%',whats_included:'ÂåÖÂê´ÂÜÖÂÆπ',feat_basic:'Êú∫Âô®‰∫∫ÊéßÂà∂',feat_control:'Âü∫Êú¨ÂëΩ‰ª§',feat_voices:'10ÁßçÂ£∞Èü≥ÂèØÈÄâ',feat_smart:'Êô∫ËÉΩÊ®°Âºè+Ëá™ÂÆö‰πâÂêçÁß∞',feat_calc:'AIÊô∫ËÉΩËÆ°ÁÆóÂô®',feat_custom_name:'Ëá™ÂÆö‰πâÊú∫Âô®‰∫∫ÂêçÁß∞',subscribe_btn:'Ëé∑ÂèñPro',maybe_later:'Á®çÂêé',trial_modal_info:'ÊÇ®ÁöÑËØïÁî®ÊúüÂ∑≤ÊøÄÊ¥ª ‚Äî ÊâÄÊúâÂäüËÉΩÂ∑≤Ëß£ÈîÅÔºÅ',calculator:'ËÆ°ÁÆóÂô®',ai_solve:'Ëß£Â§çÊùÇÊñπÁ®ãÔºàAIÔºâ',calc_locked:'üîí Êô∫ËÉΩËÆ°ÁÆóÂô®Âú®ProÁâàÊú¨‰∏≠ÂèØÁî®„ÄÇÁÇπÂáªËß£ÈîÅ„ÄÇ',ai_solving:'Ëß£ÁÆó‰∏≠...'},
  uk:{online:'–í –ú–ï–†–ï–ñ–Ü',temp:'–¢–ï–ú–ü',uptime:'–ß–ê–°',battery:'–ë–ê–¢–ê–†–ï–Ø',log:'–ñ–£–†–ù–ê–õ',movement:'–†–£–•',actions:'–î–Ü–á',wakeup:'–†–û–ó–ë–£–î–ò–¢–ò',sleep:'–°–ü–ê–¢–ò',charge:'–ù–ê –ó–ê–†–Ø–î–ö–£',random:'–¢–ê–ù–ï–¶–¨',zonemap:'–ö–ê–†–¢–ê –ó–û–ù–ò',zonewidth:'–®–ò–†–ò–ù–ê',zonedepth:'–ì–õ–ò–ë–ò–ù–ê',edgealerts:'–ó–ê–•–ò–°–¢ –ö–†–ê–Æ',on:'–£–í–Ü–ú–ö–ù',falls:'–ü–ê–î–Ü–ù–¨',language:'–ú–û–í–ê',features:'–§–£–ù–ö–¶–Ü–á',voiceact:'–ì–æ–ª–æ—Å–æ–≤–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—è',voiceact_desc:'–ê–∫—Ç–∏–≤–∞—Ü—ñ—è "–ü—Ä–∏–≤—ñ—Ç ZIVO"',edgeprot:'–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–∞–¥—ñ–Ω–Ω—è',edgeprot_desc:'–ó—É–ø–∏–Ω—è—Ç–∏—Å—å –±—ñ–ª—è –∫—Ä–∞—é —Å—Ç–æ–ª—É',autocharge:'–ê–≤—Ç–æ –∑–∞—Ä—è–¥–∫–∞',autocharge_desc:'–á—Ö–∞—Ç–∏ –Ω–∞ –±–∞–∑—É –ø—Ä–∏ –Ω–∏–∑—å–∫–æ–º—É –∑–∞—Ä—è–¥—ñ',explore:'–í–∏–ø–∞–¥–∫–æ–≤—ñ –ø—Ä–æ–≥—É–ª—è–Ω–∫–∏',explore_desc:'ZIVO —ó–∑–¥–∏—Ç—å —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ',notifs:'–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è',notifs_desc:'–ó–∞—Ä—è–¥ —ñ –∑–∞—Ö–∏—Å—Ç –∫—Ä–∞—é',nav_control:'–ö–ï–†–£–í–ê–ù–ù–Ø',nav_zone:'–ó–û–ù–ê',nav_settings:'–ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø',nav_calc:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',nav_profile:'–ü–†–û–§–Ü–õ–¨',moods:['–ì–û–¢–û–í–ò–ô ‚Ä¢ –°–õ–£–•–ê–Æ','–î–û–°–õ–Ü–î–ñ–£–Æ','–©–ê–°–õ–ò–í–ò–ô','–ß–ï–ö–ê–Æ'],log_connected:'–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ {name}',upfmt:(h,m)=>h+'–≥'+String(m).padStart(2,'0')+'—Ö–≤',offline:'–ù–ï –ü–Ü–î–ö–õ–Æ–ß–ï–ù–û',not_connected:'ZIVO –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ',not_connected_desc:'–í–≤–µ–¥–∏ —Å–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä',connect_btn:'–ü–Ü–î–ö–õ–Æ–ß–ò–¢–ò',serial_label:'–°–ï–†–Ü–ô–ù–ò–ô –ù–û–ú–ï–†',serial_wrong:'–ù–µ–≤—ñ—Ä–Ω–∏–π —Å–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä.',serial_hint:'–°–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä –Ω–∞ –Ω–∞–∫–ª–µ–π—Ü—ñ –Ω–∞ –¥–Ω—ñ –∫–æ—Ä–ø—É—Å—É',member_since:'–£—á–∞—Å–Ω–∏–∫ ZIVO',your_info:'–Ü–ù–§–û–†–ú–ê–¶–Ü–Ø',your_name:"–¢–í–û–Ñ –Ü–ú'–Ø",bot_custom_name:"–Ü–ú'–Ø –ë–û–¢–ê (—Ä–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º)",smart_mode:'–†–û–ó–£–ú–ù–ò–ô –†–ï–ñ–ò–ú',smart_mode_title:'–†–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º',smart_mode_desc:"–ë–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ —Å–≤–æ—î —ñ–º'—è —è–∫–µ —Ç–∏ –æ–±—Ä–∞–≤. –¢—ñ–ª—å–∫–∏ –ø–ª–∞—Ç–Ω–∞ –≤–µ—Ä—Å—ñ—è.",smart_mode_label:'–£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ä–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º',smart_mode_sub:"–ë–æ—Ç —Ä–µ–∞–≥—É—î –Ω–∞ —Å–≤–æ—î —ñ–º'—è",voice_section:'–ì–û–õ–û–° –ë–û–¢–ê',voice_default_desc:'–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –≥–æ–ª–æ—Å ZIVO',voice_sage_desc:'–ú—É–¥—Ä–∏–π —ñ —Å–ø–æ–∫—ñ–π–Ω–∏–π',voice_nova_desc:'–ï–Ω–µ—Ä–≥—ñ–π–Ω–∏–π —ñ –º–æ–ª–æ–¥–∏–π',voice_echo_desc:"–ì–ª–∏–±–æ–∫–∏–π —ñ –æ–±'—î–º–Ω–∏–π",voice_spark_desc:'–í–µ—Å–µ–ª–∏–π —ñ –≥—Ä–∞–π–ª–∏–≤–∏–π',voice_atlas_desc:'–ü–æ—Ç—É–∂–Ω–∏–π —ñ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π',voice_luna_desc:'–ú—è–≥–∫–∏–π —ñ –º—Ä—ñ–π–ª–∏–≤–∏–π',voice_titan_desc:'–†–æ–±–æ—Ç–∏–∑–æ–≤–∞–Ω–∏–π —ñ —Ç–æ—á–Ω–∏–π',voice_pixel_desc:'–¶–∏—Ñ—Ä–æ–≤–∏–π —ñ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π',voice_zen_desc:'–°–ø–æ–∫—ñ–π–Ω–∏–π —ñ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–∏–π',voice_locked_msg:'üîí –î–æ–¥–∞—Ç–∫–æ–≤—ñ –≥–æ–ª–æ—Å–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ Pro –≤–µ—Ä—Å—ñ—ó',subscription:'–ü–Ü–î–ü–ò–°–ö–ê',manage_sub:'–ö–ï–†–£–í–ê–ù–ù–Ø –ü–Ü–î–ü–ò–°–ö–û–Æ',trial_active:'–ü—Ä–æ–±–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ –∞–∫—Ç–∏–≤–Ω–∏–π!',trial_desc:'–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ',choose_plan:'–û–ë–ï–†–ò –ü–õ–ê–ù',plan_monthly:'–ú—ñ—Å—è—Ü—å',plan_yearly:'–†—ñ–∫',plan_forever:'–ù–∞–∑–∞–≤–∂–¥–∏',per_month:'/–º—ñ—Å—è—Ü—å',per_month_billed:'–Ω–∞ –º—ñ—Å—è—Ü—å (—Ä—ñ–∫)',one_time:'–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂',save_40:'–ó–ù–ò–ñ–ö–ê 40%',whats_included:'–©–û –í–ö–õ–Æ–ß–ï–ù–û',feat_basic:'–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–æ–º',feat_control:'–ë–∞–∑–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏',feat_voices:'10 –≥–æ–ª–æ—Å—ñ–≤ –Ω–∞ –≤–∏–±—ñ—Ä',feat_smart:"–†–æ–∑—É–º–Ω–∏–π —Ä–µ–∂–∏–º + —Å–≤–æ—î —ñ–º'—è",feat_calc:'–†–æ–∑—É–º–Ω–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑ –Ü–Ü',feat_custom_name:"–ö–∞—Å—Ç–æ–º–Ω–µ —ñ–º'—è –±–æ—Ç–∞",subscribe_btn:'–û–¢–†–ò–ú–ê–¢–ò PRO',maybe_later:'–ü—ñ–∑–Ω—ñ—à–µ',trial_modal_info:'–£ —Ç–µ–±–µ –∞–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–æ–±–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ ‚Äî –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç—ñ!',calculator:'–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†',ai_solve:'–í–∏—Ä—ñ—à–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è (–Ü–Ü)',calc_locked:'üîí –†–æ–∑—É–º–Ω–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π —É Pro. –ù–∞—Ç–∏—Å–Ω–∏ —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏.',ai_solving:'–í–∏—Ä—ñ—à—É—é...'}
};

let lang='en',moodIdx=0,connected=false,currentRobot=null,currentSerial=null,selectedPlan='yearly';
const USER=JSON.parse(localStorage.getItem('zivo_user')||'{}');
function saveUser(){localStorage.setItem('zivo_user',JSON.stringify(USER));}
function isPro(){return USER.sub==='forever'||USER.sub==='monthly'||USER.sub==='yearly';}
function isTrialActive(){if(!USER.firstConnected)return false;return(Date.now()-USER.firstConnected)/(1000*60*60*24)<7;}
function hasProAccess(){return isPro()||isTrialActive();}
function trialDaysLeft(){if(!USER.firstConnected)return 0;return Math.max(0,Math.ceil(7-(Date.now()-USER.firstConnected)/(1000*60*60*24)));}

function setConnected(val){
  connected=val;
  const dot=document.getElementById('status-dot'),txt=document.getElementById('status-text'),face=document.getElementById('zivo-face');
  if(val){
    dot.style.cssText='width:9px;height:9px;border-radius:50%;background:var(--success);box-shadow:0 0 8px var(--success);animation:pulse 2s infinite';
    txt.style.color='var(--success)';txt.textContent=T[lang].online;
    document.getElementById('offline-banner').style.display='none';
    document.getElementById('pages-wrapper').style.display='block';
    document.getElementById('page-home').style.display='block';
    document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
    document.querySelector('.nav-item').classList.add('active');
    face.style.borderColor='var(--blue)';face.style.boxShadow='0 0 28px var(--blue-glow),inset 0 0 28px rgba(0,180,255,0.05)';
    if(!USER.firstConnected){USER.firstConnected=Date.now();saveUser();}
    updateTrialBanner();
  }else{
    dot.style.cssText='width:9px;height:9px;border-radius:50%;background:var(--gray);box-shadow:none;animation:none';
    txt.style.color='var(--gray)';txt.textContent=T[lang].offline;
    document.getElementById('offline-banner').style.display='block';
    document.getElementById('pages-wrapper').style.display='none';
    ['page-settings','page-profile','page-calc'].forEach(id=>document.getElementById(id).style.display='none');
    face.style.borderColor='var(--gray)';face.style.boxShadow='none';
  }
}

function tryConnect(){
  const input=document.getElementById('serial-input').value.trim().toUpperCase();
  const err=document.getElementById('serial-error'),btn=document.getElementById('connect-btn');
  if(!input){err.style.display='block';return;}
  btn.textContent='...';btn.style.opacity='0.6';err.style.display='none';
  setTimeout(()=>{
    if(input in REGISTERED_ROBOTS){
      currentRobot=REGISTERED_ROBOTS[input];currentSerial=input;
      localStorage.setItem('zivo_last_serial',input);
      setConnected(true);addLog('ok',T[lang].log_connected.replace('{name}',currentRobot.name));
    }else{
      btn.textContent=T[lang].connect_btn;btn.style.opacity='1';err.style.display='block';
      const inp=document.getElementById('serial-input');
      inp.style.borderColor='var(--danger)';setTimeout(()=>inp.style.borderColor='rgba(0,180,255,0.3)',2000);
    }
  },1200);
}

function updateTrialBanner(){
  const b=document.getElementById('trial-banner');
  if(isTrialActive()&&!isPro()){b.style.display='flex';document.getElementById('trial-days-left').textContent=trialDaysLeft();}
  else b.style.display='none';
}

function saveProfile(){USER.name=document.getElementById('user-name-input').value;saveUser();updateProfileUI();}
function saveBotName(){USER.botName=document.getElementById('bot-name-input').value||'ZIVO';saveUser();document.getElementById('bot-display-name').textContent=USER.botName||'ZIVO';}

function toggleSmartMode(){
  if(!hasProAccess()){openSubModal();return;}
  USER.smartMode=!USER.smartMode;
  document.getElementById('smart-toggle').classList.toggle('on',USER.smartMode);
  saveUser();sendCmd(USER.smartMode?'smart_on':'smart_off');
}

function updateProfileUI(){
  document.getElementById('profile-name-display').textContent=USER.name||'User';
  document.getElementById('user-name-input').value=USER.name||'';
  document.getElementById('bot-name-input').value=USER.botName||'';
  document.getElementById('bot-display-name').textContent=USER.botName||'ZIVO';
  const badge=document.getElementById('sub-badge-display');
  if(isPro()){badge.className='sub-badge pro';badge.textContent='PRO';}
  else if(isTrialActive()){badge.className='sub-badge trial';badge.textContent='TRIAL '+trialDaysLeft()+'d';}
  else{badge.className='sub-badge free';badge.textContent='FREE';}
  document.getElementById('smart-toggle').classList.toggle('on',!!USER.smartMode);
  document.getElementById('smart-mode-toggle-row').style.opacity=hasProAccess()?'1':'0.5';
  const si=document.getElementById('sub-current-info');
  if(isPro())si.innerHTML='<div style="font-size:13px;font-weight:700;color:var(--gold)">‚≠ê PRO Active</div><div style="font-size:11px;color:var(--gray);margin-top:4px">'+(USER.sub==='forever'?'Lifetime':'Renews automatically')+'</div>';
  else if(isTrialActive())si.innerHTML='<div style="font-size:13px;font-weight:700;color:var(--success)">üéÅ Free Trial</div><div style="font-size:11px;color:var(--gray);margin-top:4px">'+trialDaysLeft()+' days remaining</div>';
  else si.innerHTML='<div style="font-size:13px;font-weight:700;">Free Plan</div><div style="font-size:11px;color:var(--gray);margin-top:4px">Upgrade to unlock all features</div>';
  renderVoices();
  const pro=hasProAccess();
  document.getElementById('ai-solve-btn').style.display=pro?'block':'none';
  document.getElementById('ai-locked-calc').style.display=pro?'none':'block';
}

function renderVoices(){
  const list=document.getElementById('voice-list');list.innerHTML='';
  const pro=hasProAccess();
  VOICES.forEach(v=>{
    const isActive=(USER.voice||'default')===v.id,isLocked=!v.free&&!pro;
    const div=document.createElement('div');
    div.className='voice-card'+(isActive?' active':'')+(isLocked?' locked':'');
    div.innerHTML=`<div class="voice-avatar" style="background:linear-gradient(135deg,rgba(0,100,200,0.3),rgba(0,180,255,0.2))">${v.emoji}</div><div><div class="voice-name">${v.name}</div><div class="voice-desc">${T[lang][v.desc_key]||''}</div></div>${isLocked?'<div class="lock-icon" style="display:flex">üîí</div>':`<div class="voice-play" onclick="event.stopPropagation();playVoicePreview('${v.id}')">‚ñ∂</div>`}`;
    div.onclick=isLocked?()=>openSubModal():()=>selectVoice(v.id);
    list.appendChild(div);
  });
  document.getElementById('voice-locked-msg').style.display=pro?'none':'block';
}

function selectVoice(id){USER.voice=id;saveUser();sendCmd('set_voice:'+id);renderVoices();addLog('info','Voice: '+id);}
function playVoicePreview(id){addLog('info','Preview: '+id);}

function openSubModal(){
  document.getElementById('sub-modal').classList.add('open');selectPlan(selectedPlan);
  document.getElementById('modal-trial-info').style.display=isTrialActive()?'block':'none';
}
function closeSubModal(){document.getElementById('sub-modal').classList.remove('open');}
function selectPlan(plan){
  selectedPlan=plan;
  ['monthly','yearly','forever'].forEach(p=>document.getElementById('plan-'+p).classList.toggle('active',p===plan));
  document.getElementById('sub-btn').className=plan==='forever'?'btn-primary gold':'btn-primary';
}
function subscribePlan(){
  USER.sub=selectedPlan;USER.subStart=Date.now();saveUser();closeSubModal();updateProfileUI();
  addLog('ok','Subscribed: '+selectedPlan);
  const b=document.getElementById('sub-badge-display');b.className='sub-badge pro';b.textContent='PRO';
}

let calcExpr='';
function calcInput(val){
  calcExpr+=val;document.getElementById('calc-expr').textContent=calcExpr;
  try{const res=new Function('return '+calcExpr.replace(/\^/g,'**').replace(/sqrt\(/g,'Math.sqrt('))();if(isFinite(res))document.getElementById('calc-result').textContent=+res.toFixed(10);}catch(e){}
}
function calcClear(){calcExpr='';document.getElementById('calc-expr').textContent='';document.getElementById('calc-result').textContent='0';document.getElementById('calc-solution').style.display='none';}
function calcBackspace(){calcExpr=calcExpr.slice(0,-1);document.getElementById('calc-expr').textContent=calcExpr;}
function calcEquals(){
  try{const res=new Function('return '+calcExpr.replace(/\^/g,'**').replace(/sqrt\(/g,'Math.sqrt('))();document.getElementById('calc-result').textContent=+res.toFixed(10);calcExpr=String(+res.toFixed(10));}
  catch(e){document.getElementById('calc-result').textContent='ERR';}
}
async function aiSolve(){
  if(!hasProAccess()){openSubModal();return;}
  const expr=calcExpr||document.getElementById('calc-result').textContent;
  if(!expr||expr==='0')return;
  const btn=document.getElementById('ai-solve-btn'),sol=document.getElementById('calc-solution');
  btn.textContent='‚è≥ '+T[lang].ai_solving;btn.disabled=true;
  sol.style.display='block';sol.textContent='...';
  try{
    const resp=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:500,messages:[{role:'user',content:'Solve step by step (be concise): '+expr}]})});
    const data=await resp.json();sol.textContent=data.content?.[0]?.text||'No answer';
  }catch(e){sol.textContent='= '+document.getElementById('calc-result').textContent;}
  btn.innerHTML='üß† '+T[lang].ai_solve;btn.disabled=false;
}

function addLog(type,text){
  const list=document.getElementById('log-list'),now=new Date();
  const time=String(now.getHours()).padStart(2,'0')+':'+String(now.getMinutes()).padStart(2,'0');
  const el=document.createElement('div');el.className='log-entry';
  el.innerHTML='<span class="log-time">'+time+'</span><span class="log-text '+type+'">'+text+'</span>';
  list.insertBefore(el,list.firstChild);
  while(list.children.length>20)list.removeChild(list.lastChild);
}
async function sendCmd(cmd){if(!connected||!currentSerial)return;try{await fetch('http://zivo.local:8080/command',{method:'POST',headers:{'Content-Type':'application/json','X-Serial':currentSerial},body:JSON.stringify({cmd}),signal:AbortSignal.timeout(2000)});}catch(e){}}
async function pollRobot(){
  if(!connected||!currentSerial)return;
  try{
    const resp=await fetch('http://zivo.local:8080/status',{headers:{'X-Serial':currentSerial},signal:AbortSignal.timeout(2000)});
    if(!resp.ok)return;const data=await resp.json();
    const batt=data.battery??0;
    document.getElementById('batt-text').textContent=batt+'%';document.getElementById('batt-fill').style.width=batt+'%';
    document.getElementById('batt-text').style.color=batt<20?'var(--danger)':batt<50?'var(--warn)':'var(--success)';
    document.getElementById('temp-val').textContent=(data.temp??'--')+'¬∞';
    if(data.uptime){const h=Math.floor(data.uptime/3600),m=Math.floor((data.uptime%3600)/60);document.getElementById('uptime-val').textContent=T[lang].upfmt(h,m);}
  }catch(e){}
}

function applyLang(l){
  lang=l;const t=T[l];
  document.querySelectorAll('[data-t]').forEach(el=>{const k=el.getAttribute('data-t');if(t[k]!==undefined)el.textContent=t[k];});
  document.getElementById('mood-text').textContent=t.moods[moodIdx];
  document.body.style.direction=l==='he'?'rtl':'ltr';
  document.getElementById('status-text').textContent=connected?t.online:t.offline;
  document.getElementById('connect-btn').textContent=t.connect_btn;
  document.getElementById('ai-solve-btn').innerHTML='üß† '+t.ai_solve;
  renderVoices();
}
function selectLang(btn,l){document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');applyLang(l);}
function switchPage(name,el){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  el.classList.add('active');
  if(name==='settings')document.getElementById('page-settings').style.display='block';
  else if(name==='profile'){document.getElementById('page-profile').style.display='block';updateProfileUI();}
  else if(name==='calc'){document.getElementById('page-calc').style.display='block';updateProfileUI();}
  else if(connected){document.getElementById('pages-wrapper').style.display='block';document.getElementById('page-'+name).style.display='block';}
}

document.getElementById('sub-modal').addEventListener('click',function(e){if(e.target===this)closeSubModal();});

const lastSerial=localStorage.getItem('zivo_last_serial');
if(lastSerial&&lastSerial in REGISTERED_ROBOTS){
  currentRobot=REGISTERED_ROBOTS[lastSerial];currentSerial=lastSerial;
  setTimeout(()=>{setConnected(true);addLog('ok',T[lang].log_connected.replace('{name}',currentRobot.name));},500);
}else if(lastSerial){document.getElementById('serial-input').value=lastSerial;}

setInterval(pollRobot,3000);
setInterval(()=>{moodIdx=(moodIdx+1)%4;document.getElementById('mood-text').textContent=T[lang].moods[moodIdx];},4000);
applyLang('en');setConnected(connected);updateProfileUI();
if('serviceWorker' in navigator)navigator.serviceWorker.register('/sw.js');
</script>
</body>
</html>
